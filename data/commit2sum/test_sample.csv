commits,release
"Update README.md
backups(s3): send uploaded parts in complete request
Update FUNDING.yml
ci: pin go-version to 1.18.7
Add configuration for trusted proxies ()
docker: add configuration for user namespace remapping ()
go: update minimum to 1.18, update dependencies ()
server(transfers): track progress of archive creation and extraction ()
docker: use go1.18
Update CHANGELOG.md","Fixed
The S3 backup driver now supports Cloudflare R2
Added
During a server transfer, there is a new ""Archiving"" status that outputs the progress of creating the server transfer archive.
Adds a configuration option to control the list of trusted proxies that can be used to determine the client IP address.
Adds a configuration option to control the Docker user namespace setting when Wings creates containers.
Changed
Releases are now built using Go 1.18 — the minimum version required to build Wings is now Go 1.18.
SHA256 Checksum"
"Include error in log output if one occurs during move
Fix permissions not being checked correctly for admins","Fixed
Fixes SFTP authentication failing for administrative users due to a permissions adjustment on the Panel.
SHA256 Checksum"
"Update CHANGELOG.md
Bump PID limit to 512 by default","Changed
Upped the process limit for a container from 256 to 512 in order to address edge-cases for some games that spawn a lot of processes.
SHA256 Checksum"
"ASD-943 - Add estimated order amount to button render/updates, remove
decoupled render/checkout
Fix phpcs warnings
Version bump to 5.14.1 and update changelog","Changed how buttons are rendered for compatibility with estimated order amount feature
Removed estimated order amount from PDP button"
"ASD-755 - if no phone number is provided, use ""0"" to satisfy Amazon API
ASD-755 - also remove fields from address if they are a single dash ""-""
Version bump to 5.7.1 and add to changelog","Fixed issue when phone number not required and entered in Magento
Updated API calls to take in a masked cart ID so they can be used without relying on Magento sessions
Updated logging to sanitize some data"
"Fixed memory leak in CombinedCancellationToken ()
Fix typos ()
Make implicit nullable types explicit ()
Remove ignore-platform-req and extend PHP versions
Avoid psalm phar

psalm phar is only compatible with ^7.1, while the source version is compatible with ^7.1|^8 for some reason.
Fix PsalmTest and skip it on newer versions

There are parse errors, likely caused by the old version of psalm.
Skip PsalmTest also on older versions
Fix optional before required parameter deprecation","What's Changed
Fix typos by @krsriq in
Make implicit nullable types explicit by @nicolas-grekas in
New Contributors
@krsriq made their first contribution in
@nicolas-grekas made their first contribution in
Full Changelog: v2.6.2...v2.6.3"
"Fix - 100% CPU usage in NativeDriver

Also use better bounds for timer - it must not execute before, but may execute a little later (on my system it were up to 7 ms actually)
Update Loop::now() docs
Fix - Ensure nowUpdateNeeded is set to true after a blocking wait in NativeDriver

So that expired timeouts also indeed do trigger immediately instead of in the next tick.
Move nowUpdateNeeded setting to getTimeout()

Essentially the same fix as @bwoebi committed, just placed at the source of the problem.
Use a custom priority queue for timers

Fixes by allowing immediate removal of the watcher from the queue. Insert and extract is O(log(n)), peeking is O(1), and removal is O(n).
Fix phpdoc types for call / asyncCall ()

Incorrect types were indicated, due to which static analysis led to false positives.
Fix typo on homepage ()
Fix signal handler in NativeDriver when used with pcntl_async_signals

Fixes.
Test on PHP 7.3 & 7.4
Use shared style repo
Note method to retreive array of exceptions
Fix typo ()
Annotate that throwIfRequested might throw CancelledException
Add failing Coroutine test
Fix exceptions bubbling from Coroutine::__destruct

This has been an edge case potentially hiding some exceptions. The tests have been refactored to error if the loop has watchers leaking from one test to another test.
Fix code style
Catch also \Exception in clearLoopRethrows()
Improve try / catch nesting
Move Coroutine::__destruct to Placeholder
Declare variables as static within function
Swap sign of returned time on 32-bit systems
Bump nokogiri from 1.8.2 to 1.10.3 in /docs ()

Bumps [nokogiri](https://github.com/sparklemotion/nokogiri) from 1.8.2 to 1.10.3.
- [Release notes](https://github.com/sparklemotion/nokogiri/releases)
- [Changelog](https://github.com/sparklemotion/nokogiri/blob/master/CHANGELOG.md)
- [Commits](https://github.com/sparklemotion/nokogiri/compare/v1.8.2...v1.10.3)
Remove Gemfile.lock
Different approach for 32-bit support

Prior version made time run backwards… oops.
Support 32-bit platforms
Warn if time is about to overflow on 32 bit
Ignore code coverage for getCurrentTime on 32 bit","Fixed issue where the loop time in NativeDriver was not refreshed after waiting for I/O streams ()
Fixed compatibility issue of NativeDriver with pcntl_async_signals() ()
A custom queue is now used for timers in NativeDriver to allow cancelled timers to be garbage collected immediately instead of after their original expiration time ()
Resolving a promise with an object that throws when destructed will now forward that exception to the event loop error handler ()
Fixed loop time to support 32-bit systems ()"
"Version bump (0.16.3)
Added is_debug_verbose
Fixed wrong mpd seconds strings
Use notification_offset for upnext
Changed upnext default behaviour
Cleanups
Manage caches from the service individually

-avoids possible cache locks due to improper use of cache buckets
-makes it possible to use cache within the service even if it does not contain the data used by the frontend cache
Load the manifest from cache
Add Up Next install option and fixed labels
Updated italian translation
Revert ""Removed html parser from profile name""

This reverts commit 95a347bb65ec27abe0258941b25d5502702ffb3d.
Check if the user id token is still valid
Fixed strm resume workaround
Fixed error on py3 due to wrong decode
Added get methods for infolabels info
Added runtime info to Up Next
Reset user id token after an handshake
Czech language ()

* Czech language

Translated into Czech language

* Update strings.po
Added czech language to video content
Dropped no longer maintained languages
Fixed czech translation
Updated german translation for v.0.16.4 (see) ()
Added debug option to always show codec info on playback

*reused an unused id language
Moved debug settings to the right position
Updated es translation
Added ""because you liked"" to raccomendations menu
Removed kodi-addon-checker requirement

after the new release of xmlschema to 1.1.0
cause errors to building wheel in Travis CI
on Python 2.7 enviroment
Updated german translation for v.0.16.4 (see) ()
Update czech language ()

* Update czech language

Added czech translation ....

* Update czech language

Added czech translation ....

* Update strings.po
Updated ESN generator

on android now is mandatory append the widewine uuid system identifier
Update addon.xml ()

* Update czech language

Added czech translation ....

* Update czech language

Added czech translation ....

* Update strings.po

* Update addon.xml

Add czech plugin description....
Version bump (0.16.4)","Up Next is now supported only from version 1.1.0 and up
Added czech language
Added ""because you liked"" to recommendations menu
Added Up Next install option
Implemented Up Next feature, end time information
Implemented Up Next feature, fast start next video
Fixed the error ""Request failed validation during key exchange""
Fixed an issue that causing opening Up Next notification in wrong position
Fixed html tags in profiles names
Fixed STRM files resume workaround
Fixed retrieving infolabels from library on python 3
Managed user id token key expiration
Manifest is saved to hdd with enabled verbose debugging only
Updated de, es, hu, it translations
Some minor changes, fixes"
"Version bump (0.15.7)
Fixed prefetch_login unhandled exception
Do not sync on non-owner profile
Fixed UnicodeEncodeError when UpNext sending play_callback

The error occurred only when using UpNext addon from the Kodi library
with tvshows that had special chars on title

2019-10-29 08:24:34.543 T:3766571904   ERROR: EXCEPTION Thrown
(PythonToCppException) : -->Python callback/script returned the following error<--
- NOTE: IGNORING THIS CAN LEAD TO MEMORY LEAKS!
Error Type: <type 'exceptions.UnicodeEncodeError'>
Error Contents: 'ascii' codec can't encode character u'\xf3' in position 81: ordinal not in range(128)
Traceback (most recent call last):
File ""/storage/.kodi/addons/script.module.addon.signals/lib/AddonSignals.py"", line 52, in onNotification
self._slots[sender][signal](_decodeData(data))
File ""/storage/.kodi/addons/plugin.video.netflix/resources/lib/services/nfsession/nfsession.py"", line 533, in play_callback
common.play_media(data['play_path'])
File ""/storage/.kodi/addons/plugin.video.netflix/resources/lib/common/kodiops.py"", line 120, in play_media
xbmc.executebuiltin('PlayMedia({})'.format(media))
UnicodeEncodeError: 'ascii' codec can't encode character u'\xf3' in position 81: ordinal not in range(128)
Updated german translation ()

* Updated german translation
Fixed problem of non working cookies

it seems that the cause is due to website updates, because the cookies
have not expired and apparently there are no other factors that
determine invalidity
Version bump (0.15.8)","Fixed addon open issue caused to a broken cookies
Updated de translations
Fixed an issue that cause UpNext sometimes to fail
Minor fixes"
"Version bump (1.20.5) ()
Fix set_value sqlite params
Update Polish translation ()
Updated czech translation ()
[pylint] fix broad-exception-raised
Version bump (1.20.6) ()","Fix SQLite error on startup using some linux systems
Update translations po, cs_cz"
"Version bump (1.23.2) ()
[access] fix react context data paths
[msl_utils] Updated manifest endpoint
[session] updated page to get email

its backward compatible with old account interface
[infolabels] workaround for missing arts

Recently request paths data for images such as: boxarts, interestingMoment,
artWorkByType, storyArt

sometime website dont return the data
hoping this in future will be fixed on website
we request also itemSummary data to get the boxArt value as fallback
[api_requests] Disabled login with credentials
Version bump (1.23.3) ()","Disabled login with e-mail/password (new website protections)
Add workaround for missing images to tvshow/movies
Fixed login with Auth key due to e-mail parsing problem"
"Version bump (1.20.0) ()
Improvement to check service at startup
Fix MSL manifest xid for linux devices
Settings changes for about/logout
Allow execute settings without check login
Version bump (1.20.1) ()","Fixed playback on linux devices
Protected Logout setting with a confirmation dialog
Wait for service startup without notification
Add support info on add-on settings"
"Polish
Case pattern marshaled into Case Expressions ()

Co-authored-by: Tyler Van Gorder <tkvangorder@users.noreply.github.com>
FindImports getVisitor public visibility
Fix the JavaTemplate AnnotationTemplateGenerator so that MethodDeclaration and VariableDeclaration annotations are templated correctly. ()
Break apart recipe and take advantage of new markup syntax ()
Added normalizeName to VariableNameUtils.
Added variable name normalization to ReplaceDuplicateStringLiterals.
fixes
Insert the replaced string literal after the J.EnumValueSet in ReplaceDuplicateStringLiterals.
fixes
Revert support for duplicate string literals on enums in ReplaceDuplicateStringLiterals until JavaTemplate is fixed.
Replace duplicate String literals of enums in ReplaceDuplicateStringLiterals without JavaTemplate.
Use MavenSettings and activeProfiles set when an AST is parsed to subsequently resolve dependencies in recipes / fixes","What's Changed
Maven recipe running will now use the effective MavenSettings and active profiles that existed at parsing time.
Case pattern marshaled into Case Expressions by @tkvangorder in
Fix the JavaTemplate AnnotationTemplateGenerator so that MethodDeclar… by @pway99 in
Break apart recipe and take advantage of new markup syntax by @shanman190 in
Full Changelog: v7.32.0...v7.32.1"
"Leave leftpadded AST unchanged if visitor does not change it
Recipe.noop()
Skip UTF-8 BOM characters in XMLLexer.","Fixes
Skip UTF-8 BOM characters in XMLLexer.
Features
Add Recipe.noop() for use especially in tests validating parsing logic by running a no-op recipe over the input and expecting the source code to be unchanged."
"Fix ListUtils NPE (fixes)
Code cleanup recipe that lists all cleanup recipes (fixes)

* Move XXE vulnerability fix into the security package and rename for consistency
* Add XXE vulnerability fix to JavaSecurityBestPractices
UseDiamondOperator (fixes) and UnnecessaryExplicitTypeArguments (fixes)
Add test for issue
Fix spurious import added for static fields (fixes)
Fixing tests ()
Cleanup recipe for Converting Primitive Wrapper Class Constructors to valueOf ()

* Cleanup recipe for Converting Primitive Wrapper Class Constructors to valueOf. Fixes
moving Java11PrimitiveWrapperClassConstructorToValueOfTest from Java11TreeDebugTests.kt to Java11VisitorDebugTests.kt
Adding thrown exceptions to JavaType.Method  ()

* Adding thrown exceptions to method types.

Adding thrown exceptions to method types.

interim checkin

interim checkin

interim checkin

Adding access flags to JavaType.Class ()

Interim Check-in

* Adding throw exceptions to JavaType.Method

* Adding throw exceptions to JavaType.Method

* Adding throw exceptions to JavaType.Method

* Incorporating review feedback
Fixing NPE in TypeUtils
Polish display name and description of XXE vulnerability
Fix reporting of which recipes made changes. Fixes
Fix ArrayIndexOutOfBounds in MethodNameCasing
Revert ""Fix reporting of which recipes made changes. Fixes""

This reverts commit 2607e2abcaf72344ea811216c2f0bf0ed79e5a6d.
Revert ""Revert ""Fix reporting of which recipes made changes. Fixes""""

This reverts commit f819f7757d0efbc4b5c9e42c7ba16726a34fde3c.
Use ShallowClass for JavaType.Method throw list
Create 0002-recipe-naming.md
Update README.md
Update 0002-recipe-naming.md
disabled unit test for issue. AddImport does not consider the J.FieldAccess.target.type
Update 0002-recipe-naming.md
Update 0002-recipe-naming.md
Update 0002-recipe-naming.md
UnnecessaryThrows (fixes) and RedundantFileCreation

* Added constructorType to J.NewClass.
* JavaType.Method throw types are deep again.
AddImport considers J.FieldAccess.target.type when comparing types.  Fixes
Experimental support for recipe and parsing timeout (fixes) ()
Rename ModifierResults to Java11ModifierResults to avoid runtime name collisions with the Java 8 equivalent","Fix reporting of which recipes made changes. ( )
Fix possible runtime name collision between rewrite-java-11 and rewrite-java-8 versions of class ""ModifierResults"" cae57bc
Fix ArrayIndexOutOfBounds in MethodNameCasing 2c55ec3
Fix NPE in TypeUtils 9da463a
Fix spurious import added for static fields ()
UseDiamondOperator () and UnnecessaryExplicitTypeArguments ()
Adding thrown exceptions to JavaType.Method ()
Add Cleanup recipe for Converting Primitive Wrapper Class Constructors to valueOf ()"
"Add simple single file multipart file upload to HttpSender ()
Do not unwrap negated assignment

Fixes https://github.com/openrewrite/rewrite/issues/3913
Fix `TypesInUse` regression ()

* Fix `TypesInUse` regression

Introduced in 9d264b4f4991b62854572c5e576e2ab0514361d5

Fixes:

* Correct method name detection

* Update rewrite-java-test/src/test/java/org/openrewrite/java/RemoveUnusedImportsTest.java

Co-authored-by: Tim te Beek <tim@moderne.io>

---------

Co-authored-by: Tim te Beek <tim@moderne.io>
`FindParseFailures`: Null-safe
Find `@Option` annotations without `example` values ()

* Find `@Option` annotations without `example` values

As came up in Slack: https://github.com/openrewrite/gh-automation/issues/45#issuecomment-1891827588

* Skip boolean fields
Add CommitMessage marker
License headers
Print idempotence for prefix of varargs parameters in Javadoc","What's Changed
Fix TypesInUse regression by @knutwannheden in
Find @Option annotations without example values by @timtebeek in
Do not unwrap negated assignment 670dd5c
FindParseFailures: Null-safe ef368c0
Add CommitMessage marker 8a42e33
Print idempotence for prefix of varargs parameters in Javadoc 8955881
Full Changelog: v8.13.3...v8.13.4"
"`ChangeMethodName`: Slightly improve performance

Don't call `DeclaresMethod` twice when `ignoreDefinition = true`.
Don't call `J.ClassDeclaration#withBody()` using `null`

See: openrewrite/rewrite-static-analysis
Constructor call type attribution should include generics ()

* Constructor call type attribution should include generics

When the target type of a constructor call declares generic type variables, the `J.NewClass` type attribution should also include these details. So for example the type attribution for `new ArrayList<String>()` should be a `JavaType.Method` which as the declaring type has `java.util.ArrayList<String>` rather than just `java.util.ArrayList`.

An alternative to this would be to add a new `type` field to `J.NewClass`.

* Polish

* Update other Java parsers

* Guard against NPE

* Add another test case to `NewClassTest`

* Try something slightly different

* Keep type attribution as is for anonymous subclasses

* No diamond operator for anonymous subclasses in Java 8
`UnnecessaryParentheses`: Fix for negated `instanceof`

Fixes:
Improve error messages in RewriteTest relating to erroneous creation/non-creation of files
Add pretty checkmarks to error message about unexpected file creation in recipe tests.
Oops, fix conditional
Fix LOWER_CAMEL, UPPER_CAMEL to handle uppercase abbreviation better ()

* Fix LOWER_CAMEL, UPPER_CAMEL to handle uppercase abbreviation better

* Apply comment

---------

Co-authored-by: 김선우 <seonwoo960000@toss.im>
`SpacesVisitor`: Remove spaces before statement semicolon ()
Validate that Change(Managed)DependencyGroupIdAndArtifactId updates GAV ()

ChangeDependencyGroupIdAndArtifactId and ChangeManagedDependencyGroupIdAndArtifactId are intended to be set up to *change* maven coordinates. If the pre- and post-coordinates are the same, it's likely that the UpgradeDependencyVersion recipe was intended. This change adds validation of the newGroupId/newArtifactId options.

See https://github.com/openrewrite/rewrite-java-dependencies/issues/55
Fix - Maven repositories in settings.xml override repositories of the same id in pom.xml, including the default maven central repository","What's Changed
Constructor call type attribution should include generics by @knutwannheden in
Fix LOWER_CAMEL, UPPER_CAMEL to handle uppercase abbreviation better by @seonwoo960000 in
SpacesVisitor: Remove spaces before statement semicolon by @knutwannheden in
Validate that Change(Managed)DependencyGroupIdAndArtifactId updates GAV by @tobli in
Fix - Maven repositories in settings.xml override repositories of the same id in pom.xml, including the default maven central repository by @sambsnyd in 9cf0f03
Full Changelog: v8.13.0...v8.13.2"
"Fix - Maven repositories in settings.xml override repositories of the same id in pom.xml, including the default maven central repository
Add simple single file multipart file upload to HttpSender ()","What's Changed
Add simple single file multipart file upload to HttpSender by @pstreef in
Full Changelog: v8.13.2...v8.13.3"
"Add null check. A non null ref can point to a null objectId: ()

* Add null check. A non null ref can point to a null objectId:

SymbolicRef[HEAD -> refs/heads/main=0000000000000000000000000000000000000000(-1)]

* cleanup
fix: prevent all referenced properties from updating to latest regardless of recipe ()
Add headers for FindCommitters data tables ()
Fix UpgradeDependencyVersion so it doesn't use the same GradleProject marker for every project in a multi-project build.
Add logic to simplify `J.Ternary`
feat: add from date option to FindCommitters recipe ()

* Add date option for FindCommitters

* Add test

* Formatting

* fix description
Handle empty string option ()

* Handle empty string option

* default null
Add recipe which encloses all parameters interpolated into Groovy GStrings in curly braces
License headers
Add FindClassHierarchy recipe to produce a data table of class declarations, their superclasses, and interfaces
Make DependencyUseStringNotation compatible with G.GString ()

* Fixes

* Fixes

---------

Co-authored-by: Jente Sondervorst <jente.sondervorst@colruytgroup.com>
Improve AddProperty to insert in alphabetical order by key
Update AddProperty description to reflect its new behavior
Get gradle AddPropertyTest passing given changes to underlying AddProperty recipe
Normalization of maven repositories that don't permit directory listing ()","What's Changed
fix: prevent all referenced properties from updating to latest regardless of recipe by @ajohnsonz in
Add headers for FindCommitters data tables by @pstreef in
feat: add from date option to FindCommitters recipe by @pstreef in
Handle empty string option by @pstreef in
Make DependencyUseStringNotation compatible with G.GString by @Jenson3210 in
Normalization of maven repositories that don't permit directory listing by @jkschneider in
New Contributors
@Jenson3210 made their first contribution in
Full Changelog: v8.14.3...v8.14.4"
"Added support for annotations in fully qualified type names. ()

* Added support for annotations in fully qualified type names.

* Add `J.AnnotatedType#getAllAnnotations()`

Also removed some code from `J.MethodDeclaration#getAllAnnotations()` and `J.VariableDeclarations#getAllAnnotations()` as that returned type annotations rather than annotations on the variable / method.

---------

Co-authored-by: Knut Wannheden <knut@moderne.io>
Again try to improve error message from `AddPluginVisitor`
Include Recipe class simple name in validation errors ()

Fixes
Maven POM downloader optimizations ()

* Maven POM downloader optimizations

* Fix missing cache metrics for Maven POM cache

* Add back `@NonFinal` to `knownToExist`, because Lombok add `knowToExist\' to the list of required arguments in the constructor
filePattern on FindSourceFiles is now nullable, and matches all files… ()

filePattern on FindSourceFiles is now nullable, and matches all files on blank input, to make it a little more convenient to use in place of HasSourcePath
`SimplifyBooleanExpression` should only remove parens when related

The `SimplifyBooleanExpressionVisitor` should only remove unnecessary parentheses when the visitor already changed the parenthesized expression.
Fix test failure on main after b70c34b3767afe5bfc5c5db08d833b8823f2f79d
`SemanticallyEqual`: Fix bug in `visitFieldAccess()` ()

* `SemanticallyEqual`: Fix bug in `visitFieldAccess()`

When comparing `J.FieldAccess` instances, the targets also needs to be compared.

* Start adding some more `SemanticallyEqualTest` test cases

* Polish

* Polish

* Add more tests

* Add more tests
Fix another `SemanticallyEqualVisitor` bug

The logic to compare field accesses against identifiers must also be used when comparing identifiers against field accesses.
Add more `SemanticallyEqualVisitor` tests
Fix another `SemanticallyEqual` bug
Add `J.NullableType` for Kotlin / C# ()

* Add J.NullableType for kotlin/JS/C#

* fix

* Add visiting annotations

* Add visitNullableType to JavaIsoVisitor

* Fix a bug

* Add suffix space location and some cosmetics

---------

Co-authored-by: Knut Wannheden <knut@moderne.io>
Adjust test after new `maven-compiler-plugin` release
Ensure ExplicitPluginVersionTest needs no further updates
Modify `J.Annotation#getSimpleName()` for Kotlin

Kotlin's multi annotations are now modelled using a ""dummy"" annotation which then contains the individual annotations. This requires a custom LST element to be used for `J.Annotation#annotationType`.

Note: An alternative to this solution would be to add a `getSimpleName()` method to the `NameTree` interface.
Delete `data-flow/model.csv` resource

This resource was moved to `rewrite-analysis`.
added plugins to ResolvedPom + some tests ()

* added plugins to ResolvedPom + some tests

* started logic to merge plugins

* merge configurations

* basic executions

* fix potential NPE

* fix NPE

* avoid empty configs

---------

Co-authored-by: Tim te Beek <tim@moderne.io>
Fixed prefix on key after folder scalars.
Feat:token length estimator ()

* calculate token len for class and method definition

* changed datatable to take in name instead of whole code snippet

---------

Co-authored-by: juju <justine.gehring@gmail.com>","What's Changed
Include Recipe class simple name in validation errors by @timtebeek in
Maven POM downloader optimizations by @ammachado in
filePattern on FindSourceFiles is now nullable, and matches all files… by @nmck257 in
SemanticallyEqual: Fix bug in visitFieldAccess() by @knutwannheden in
Add J.NullableType for Kotlin / C# by @kunli2 in
added plugins to ResolvedPom + some tests by @joanvr in
Fixed prefix on key after folder scalars. by @traceyyoshima in
Feat:token length estimator by @justine-gehring in
Full Changelog: v8.11.2...v8.11.3"
"Move `array.py` and `sharding.py` from `experimental/` to `_src/`.

PiperOrigin-RevId: 477201711
Update version and changelog for jax 0.3.19 release
setup: bundle *.pyi files with distribution
Disintegrate `Array` into DeviceBuffers inside GDA. This is required for backwards compatibility changes as users can create GDAs and pass that to pjit even when Array is switched on.

PiperOrigin-RevId: 477297406
Add `addressable_` counterparts of `local_` to GDA to make it easier for users to move to Array as both will have the same API.

PiperOrigin-RevId: 477332697
Fix the bug where XLA doesn't provide shardings for all the outputs if all the elements in the output tuple have the same sharding. XLA decides to run the `FusionTupleDeduplicator` to put the sharding on ROOT instead of the tuple.

PiperOrigin-RevId: 477343328
[c++ jit] only set use_fastpath in cache_miss if all args are DeviceArrays

fixes

Co-authored-by: Peter Hawkins <phawkins@google.com>
Co-authored-by: Kuangyuan Chen <chky@google.com>
Propagate `name` through ExecuteReplicated for `dispatch.check_special`

PiperOrigin-RevId: 477351323
Make addressable_shards a property like local_shards

PiperOrigin-RevId: 477358276
Fix test failure in GPU CI if NCCL_DEBUG is enabled.

If NCCL_DEBUG is enabled, NCCL prints extra status information. Make
test accept this.
jax/jaxlib 0.3.20 release candidate.
Disable multiprocess_gpu_test that fails on ROCm.","Notable changes:
Adds missing .pyi files that were missing from the previous release ().
Fixes an incompatibility between jax 0.3.19 and the libtpu version it pinned (). Requires jaxlib 0.3.20.
Fix incorrect pip url in setup.py comment ()."
"Use `_rewriting_take` and `_chunk_iter` path during `__getitem__` and `__iter__` respectively when the Array is fully replicated

For example:

```
k1, k2 = jax.random.split(key, 2) # where key is fully replicated on 8 devices
```

Then `k1` and `k2` should also maintain the sharding of `key` since `key` is fully replicated.

PiperOrigin-RevId: 480434272
Port more tests from jtu.cases_from_list to jtu.sample_product.
Update version.py, setup.py and CHANGELOG post jax 0.3.22 release
Update Colab TPU driver version
Reenable some tests disabled in the past because of an LLVM bug.

The issue no longer reproduces at head.

PiperOrigin-RevId: 480505525","Changes
Update Colab TPU driver version for new jaxlib release."
"[sparse] validate BCOO on instantiation
Remove the cached check in aot compiled call in MeshExecutable because a fast C++ dispatch path exists. This leads to a better error message which contains the shape and arg value.

PiperOrigin-RevId: 494815311
Finish jax and jaxlib release 0.4.0

PiperOrigin-RevId: 494833878
Remove the specialized sm versions for testing. It caused release wheels to ship without correct sm versions compiled in.

PiperOrigin-RevId: 494854373
Update CHANGELOG to indicate that 0.4.0 was yanked.

PiperOrigin-RevId: 494868884
Update values for release 0.4.1

PiperOrigin-RevId: 494889744","Changes
Support for Python 3.7 has been dropped, in accordance with JAX's
{ref}version-support-policy.
The behavior of XLA_PYTHON_CLIENT_MEM_FRACTION=.XX has been changed to allocate XX% of
the total GPU memory instead of the previous behavior of using currently available GPU memory
to calculate preallocation. Please refer to
GPU memory allocation for
more details.
The deprecated method .block_host_until_ready() has been removed. Use
.block_until_ready() instead."
"Bump version: 0.5.1 → 1.0.0
Fix README for PyPI rendering

Title underline too short.
Create TAXII query correctly. closes
Simplify FilterSet instance in MemorySource
Add support for 'real_stix_objs' for test cases
Finish merging all the changes from @mbastian1135
Finish adding new tests for TAXII datastore. closes
Add `medallion` dependency to Travis CI tests
Sort import statements in tests.
Add two more tests for the `dict` case in TAXIICollectionSink
Remove 'real_stix_objs1' as it is unused in the tests
Update file taxii_example.py
Update TAXII2 filter fields in documentation
Remove dev and nightly Python builds from Travis.
Fix make_constant when value is already a constant

Fixes.
Update CHANGELOG for v1.0.1
Bump version: 1.0.0 → 1.0.1","Fixes bug with incorrect TAXII parameters ().
Fixes bug with constructing patterns ()."
"Bumped patch version
Moved enforcement of network address rules to Apache client DNS resolver to avoid race condition where rules can be bypassed via successive lookups returning different IP addresses
Applied DNS resolver enforcement to webhooks extension
Make NetworkAddressRulesAdheringDnsResolver testable

By using composition rather than inheritance
Stop NetworkAddressRules doing DNS lookups

By distinguishing between DomainNameWildcard rules and IP based rules
Bumped patch version","Security
This security release addresses the following issues
CVE-2023-41327 - Controlled SSRF through URL in the WireMock Webhooks Extension and WireMock Studio
Base CVSS Score: 4.6 (AV:A/AC:L/PR:N/UI:R/S:U/C:N/I:L/A:L/E:F/RL:O/RC:C)
CVE-2023-41329 - Domain restrictions bypass via DNS Rebinding in WireMock and WireMock Studio webhooks, proxy and recorder modes
Base CVSS Score: 3.9 (AV:A/AC:H/PR:H/UI:N/S:U/C:L/I:L/A:L/E:F/RL:O/RC:C)
NOTE: WireMock Studio, a proprietary distribution discontinued in 2022, is also affected by those issues and also affected by CVE-2023-39967 - Overall CVSS Score 8.6 - “Controlled and full-read SSRF through URL parameter when testing a request, webhooks and proxy mode”. The fixes will not be provided. The vendor recommends migrating to WireMock Cloud which is available as SaaS and private beta for on-premises deployments
Related releases
WireMock Docker 3.0.3-1 - Docker Image with the Patch
WireMock 2.35.1 /  WireMock Docker 2.35.1-1 - Backport to WireMock 2.x
Python WireMock 2.6.1 - Python library that bundles the WireMock JAR file
NOTE: Other distributions like Testcontainers modules or Helm chart need explicit version declaration, and hence a user action is needed to update the dependencies should they be considered a risk
Credits
@W0rty, @numacanedo, @Mahoney, @tomakehurst, @oleg-nenashev"
"Changed version to 3.0.0
update
update
update
update
Replace Guava by JDK (Partly)
Replace Guava by JDK (Partly)
Replace Guava by JDK (Partly)
update
Bump io.netty:netty-all from 4.1.96.Final to 4.1.97.Final

Bumps [io.netty:netty-all](https://github.com/netty/netty) from 4.1.96.Final to 4.1.97.Final.
- [Commits](https://github.com/netty/netty/compare/netty-4.1.96.Final...netty-4.1.97.Final)

---
updated-dependencies:
- dependency-name: io.netty:netty-all
  dependency-type: direct:production
  update-type: version-update:semver-patch
...

Signed-off-by: dependabot[bot] <support@github.com>
update
Added beta warning comment to all stores interfaces (other than Stores which already had it)
Excluded transitive jsr305 dependency from build to avoid javax.annotation classes ending up in the standalone JAR
Shadow additional packages ()
Removed redundant relocation of javax.annotation from the build
Add annotations for Beta and Internal APIs ()

* Add annotations for Beta and Internal APIs

* Spotless

* Excluded transitive jsr305 dependency from build to avoid javax.annotation classes ending up in the standalone JAR

* Replace Guava by JDK (Partly)

* update

* update

* update

* update

* update

* update

* update

* update

* update

* update

* update

* update

* update

* update

* update

* update

* update

* update

* update

* update

* update

* update

* Replace Guava by JDK (Partly)

* Replace Guava by JDK (Partly)

* Replace Guava by JDK (Partly)

* update

* update

* Shadow additional packages ()

* Removed redundant relocation of javax.annotation from the build

* Fixed Spotless errors

---------

Co-authored-by: Tom Akehurst <tom@wiremock.org>
Co-authored-by: Kirill Peshin <kirill.peshin@bscmsc.ru>
Co-authored-by: jluehe <janluehe@yahoo.com>
Respect StopAction in V1 Filter

We should only continue to V2 filters if the V1 filters return a ContinueAction.
Stop returning 500s for unmatched path patterns

The Diff rendering did not handle the `SubExpressionException` thrown in
e.g. `MatchesJsonPathPattern`. This makes it catch that exception and
output it in the diff.
Bump com.diffplug.spotless from 6.20.0 to 6.21.0

Bumps com.diffplug.spotless from 6.20.0 to 6.21.0.

---
updated-dependencies:
- dependency-name: com.diffplug.spotless
  dependency-type: direct:production
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>
Revert ""Stop returning 500s for unmatched path patterns""
Stop returning 500s for unmatched path patterns

The Diff rendering did not handle the `SubExpressionException` thrown in
e.g. `MatchesJsonPathPattern`. This makes it catch that exception and
output a useful value in the diff.
Revert Release Drafter to semver after the 3.0.0 release
Ensured that the shadow JAR is always built last. Relocated dependencies in webhooks. ()
Added validation of UUIDs in path parameters in the admin API so that clearer errors are reported when non UUIDs are provided or item isn't found
Fixed get patch version function in build
Fixed bump patch and minor versions logic
Stopped updating package-lock.json when bumping versions
Bump patch version to 3.0.1","Bug fixes
Stop returning 500s for unmatched path patterns () @Mahoney
Ensure that the shadow JAR is always built last to ensure webhooks fat JAR wins () @tomakehurst
Added validation of UUIDs in path parameters in the admin API so that clearer errors are reported when non UUIDs are provided or item isn't found rather than throwing a 500 error () @tomakehurst
Respect StopAction in V1 Filter () @Mahoney
Thanks to the regression reporters: @defnngj , @oleg-nenashev , @Mahoney"
"chore(release): 1.11.10 [skip ci]

## [1.11.10](https://github.com/iamkun/dayjs/compare/v1.11.9...v1.11.10) (2023-09-19)

### Bug Fixes

* Add Korean Day of Month with ordinal ([](https://github.com/iamkun/dayjs/issues/2395)) ([dd55ee2](https://github.com/iamkun/dayjs/commit/dd55ee2aadd1009242235e47d558bbf028827896))
* change back fa locale to the Gregorian calendar equivalent ([](https://github.com/iamkun/dayjs/issues/2411)) ([95e9458](https://github.com/iamkun/dayjs/commit/95e9458b221fe35e59ee4a160a5db247313a68fb))
* duration plugin - MILLISECONDS_A_MONTH const calculation ([](https://github.com/iamkun/dayjs/issues/2362)) ([f0a0b54](https://github.com/iamkun/dayjs/commit/f0a0b546b074b3b511c2319a1ce83d412894b91f))
* duration plugin getter get result  0 instead of undefined ([](https://github.com/iamkun/dayjs/issues/2369)) ([061aa7e](https://github.com/iamkun/dayjs/commit/061aa7ed6c31696974665fc9b11a74d30841ebed))
* fix isDayjs check logic ([](https://github.com/iamkun/dayjs/issues/2383)) ([5f3f878](https://github.com/iamkun/dayjs/commit/5f3f8786c796cd432fe6bcb6966a810daea89203))
* fix timezone plugin to get correct locale setting ([](https://github.com/iamkun/dayjs/issues/2420)) ([4f45012](https://github.com/iamkun/dayjs/commit/4f4501256fa1bc72128aae1d841bbd782df86aed))
* **locale:** add meridiem in `ar` locale ([](https://github.com/iamkun/dayjs/issues/2418)) ([361be5c](https://github.com/iamkun/dayjs/commit/361be5c7c628614ee833d710acbe154a598b904d))
* round durations to millisecond precision for ISO string ([](https://github.com/iamkun/dayjs/issues/2367)) ([890a17a](https://github.com/iamkun/dayjs/commit/890a17a8d8ddd43c7c8b806e3afc7b27f3288d27))
* sub-second precisions need to be rounded at the seconds field to avoid adding floats ([](https://github.com/iamkun/dayjs/issues/2377)) ([a9d7d03](https://github.com/iamkun/dayjs/commit/a9d7d0398d22ebd4bfc3812ca0134a97606d54d9))
* update $x logic to avoid plugin error ([](https://github.com/iamkun/dayjs/issues/2429)) ([2254635](https://github.com/iamkun/dayjs/commit/22546357f30924fcff3b3ffa14fd04be21f97a5e))
* Update Slovenian locale for relative time ([](https://github.com/iamkun/dayjs/issues/2396)) ([5470a15](https://github.com/iamkun/dayjs/commit/5470a15e437fac803797363063b24f3ba3bd5299))
* update uzbek language translation ([](https://github.com/iamkun/dayjs/issues/2327)) ([0a91056](https://github.com/iamkun/dayjs/commit/0a910564d76dc7c128da8e0d85d8e11ebdb5660b))
chore: Readme add usage trend ()
Update README.md
chore: Update README.md
fix: update locale Bulgarian monthsShort Jan ()

* fix: update locale Bulgarian monthsShort Jan
chore: Update README.md
chore: Update README.md
chore: Update README.md
fix: Update 'da' locale to match correct first week of year ()

The first week of the year in Denmark is always the week containing January 4th
chore: add french README.md ()
fix: day of week type literal ()
chore(release): 1.11.11 [skip ci]

## [1.11.11](https://github.com/iamkun/dayjs/compare/v1.11.10...v1.11.11) (2024-04-28)

### Bug Fixes

* day of week type literal ([](https://github.com/iamkun/dayjs/issues/2630)) ([f68d73e](https://github.com/iamkun/dayjs/commit/f68d73efe562fdedd9e288ecb0ce6565e602f507))
* improve locale ""zh-hk"" format and meridiem ([](https://github.com/iamkun/dayjs/issues/2419)) ([a947a51](https://github.com/iamkun/dayjs/commit/a947a5171aad5695eaf593bc95fe073de0f0894a))
* Update 'da' locale to match correct first week of year ([](https://github.com/iamkun/dayjs/issues/2592)) ([44b0936](https://github.com/iamkun/dayjs/commit/44b0936ad709212b63e48672d8b9c225e2c3b830))
* update locale Bulgarian monthsShort Jan ([](https://github.com/iamkun/dayjs/issues/2538)) ([f0c9a41](https://github.com/iamkun/dayjs/commit/f0c9a41c6ec91528f3790e442b0c5dff15a4e640))","Bug Fixes
day of week type literal () (f68d73e)
improve locale ""zh-hk"" format and meridiem () (a947a51)
Update 'da' locale to match correct first week of year () (44b0936)
update locale Bulgarian monthsShort Jan () (f0c9a41)"
"chore(release): 1.8.10 [skip ci]

## [1.8.10](https://github.com/iamkun/dayjs/compare/v1.8.9...v1.8.10) (2019-03-10)

### Bug Fixes

* **locale:** Add nepali (ne) locale ([](https://github.com/iamkun/dayjs/issues/524)) ([bdbec01](https://github.com/iamkun/dayjs/commit/bdbec01))
* Add WeekYear plugin ([a892608](https://github.com/iamkun/dayjs/commit/a892608))
* API .locale() with no argument should return current locale name string ([8d63d88](https://github.com/iamkun/dayjs/commit/8d63d88))
* CustomParseFormat correct parse HH:mm:ss with only one digit like 0:12:10 ([600d547](https://github.com/iamkun/dayjs/commit/600d547))
* CustomParseFormat plugin parse Do format string ([bf27fda](https://github.com/iamkun/dayjs/commit/bf27fda)), closes [](https://github.com/iamkun/dayjs/issues/522)
* Expand setters like .year(2000) .hour(12) ([ac532a0](https://github.com/iamkun/dayjs/commit/ac532a0))
* Move toObject, toArray API to separate plugin from core ([40a3431](https://github.com/iamkun/dayjs/commit/40a3431))
fix: Correct typescript definition `add`

fix
fix: Add locale support for Azerbaijani language (az) ()
fix: Fix CustomParseFormat plugin formatting bug ()

fix:
fix: Update pt locale ()

Added some missing properties and localized formats
fix: Add .add('quarter') .startOf('quarter') through plugin quarterOfYear

fix, fix
docs: Update quarterOfYear docs
docs: fix doc error
test: remove local test
chore(release): 1.8.11 [skip ci]

## [1.8.11](https://github.com/iamkun/dayjs/compare/v1.8.10...v1.8.11) (2019-03-21)

### Bug Fixes

* Add .add('quarter') .startOf('quarter') through plugin quarterOfYear ([dde39e9](https://github.com/iamkun/dayjs/commit/dde39e9)), closes [](https://github.com/iamkun/dayjs/issues/537) [](https://github.com/iamkun/dayjs/issues/531)
* Add locale support for Azerbaijani language (az) ([](https://github.com/iamkun/dayjs/issues/535)) ([eeb20fa](https://github.com/iamkun/dayjs/commit/eeb20fa))
* Correct typescript definition `add` ([22a249c](https://github.com/iamkun/dayjs/commit/22a249c)), closes [](https://github.com/iamkun/dayjs/issues/531)
* Fix CustomParseFormat plugin formatting bug ([](https://github.com/iamkun/dayjs/issues/536)) ([8578546](https://github.com/iamkun/dayjs/commit/8578546)), closes [](https://github.com/iamkun/dayjs/issues/533)
* Update pt locale ([](https://github.com/iamkun/dayjs/issues/538)) ([1ac9e1e](https://github.com/iamkun/dayjs/commit/1ac9e1e))","Bug Fixes
Add .add('quarter') .startOf('quarter') through plugin quarterOfYear (dde39e9), closes
Add locale support for Azerbaijani language (az) () (eeb20fa)
Correct typescript definition add (22a249c), closes
Fix CustomParseFormat plugin formatting bug () (8578546), closes
Update pt locale () (1ac9e1e)"
"chore(release): 1.8.11 [skip ci]

## [1.8.11](https://github.com/iamkun/dayjs/compare/v1.8.10...v1.8.11) (2019-03-21)

### Bug Fixes

* Add .add('quarter') .startOf('quarter') through plugin quarterOfYear ([dde39e9](https://github.com/iamkun/dayjs/commit/dde39e9)), closes [](https://github.com/iamkun/dayjs/issues/537) [](https://github.com/iamkun/dayjs/issues/531)
* Add locale support for Azerbaijani language (az) ([](https://github.com/iamkun/dayjs/issues/535)) ([eeb20fa](https://github.com/iamkun/dayjs/commit/eeb20fa))
* Correct typescript definition `add` ([22a249c](https://github.com/iamkun/dayjs/commit/22a249c)), closes [](https://github.com/iamkun/dayjs/issues/531)
* Fix CustomParseFormat plugin formatting bug ([](https://github.com/iamkun/dayjs/issues/536)) ([8578546](https://github.com/iamkun/dayjs/commit/8578546)), closes [](https://github.com/iamkun/dayjs/issues/533)
* Update pt locale ([](https://github.com/iamkun/dayjs/issues/538)) ([1ac9e1e](https://github.com/iamkun/dayjs/commit/1ac9e1e))
fix: Update ko locale weekdaysShort  ()
fix: Add 79 locales ()
fix: Add plugin minMax to sopport .max .min
docs: update minMax plugin docs
fix: Add isoWeeksInYear plugin
docs: Add IsoWeeksInYear docs
fix: Add Calendar plugin
fix: Fix set Month Year error in last day of the month
docs: Add Calendar plugin docs
fix: Add .get API
docs: Update .get docs
docs: Update available units table doc
fix: Update localizedFormat plugin to support lowercase localizable formats (l, ll, lll, llll) ()
test: Update test to keep locale name and file name the same
fix: Add Occitan (oc-lnc) locale file ()
docs: Update zh-cn doc
chore: calendar plugin get config from locale file ()
chore(release): 1.8.12 [skip ci]

## [1.8.12](https://github.com/iamkun/dayjs/compare/v1.8.11...v1.8.12) (2019-04-02)

### Bug Fixes

* Add .get API ([7318797](https://github.com/iamkun/dayjs/commit/7318797))
* Add 79 locales ([](https://github.com/iamkun/dayjs/issues/541)) ([f75a125](https://github.com/iamkun/dayjs/commit/f75a125))
* Add Calendar plugin ([d1b9cf9](https://github.com/iamkun/dayjs/commit/d1b9cf9))
* Add isoWeeksInYear plugin ([2db8631](https://github.com/iamkun/dayjs/commit/2db8631))
* Add Occitan (oc-lnc) locale file ([](https://github.com/iamkun/dayjs/issues/551)) ([c30b715](https://github.com/iamkun/dayjs/commit/c30b715))
* Add plugin minMax to sopport .max .min ([2870a23](https://github.com/iamkun/dayjs/commit/2870a23))
* Fix set Month Year error in last day of the month ([d058f4a](https://github.com/iamkun/dayjs/commit/d058f4a))
* Update ko locale weekdaysShort  ([](https://github.com/iamkun/dayjs/issues/543)) ([317fd3e](https://github.com/iamkun/dayjs/commit/317fd3e))
* Update localizedFormat plugin to support lowercase localizable formats (l, ll, lll, llll) ([](https://github.com/iamkun/dayjs/issues/546)) ([f2b5ebf](https://github.com/iamkun/dayjs/commit/f2b5ebf))","Bug Fixes
Add .get API (7318797)
Add 79 locales () (f75a125)
Add Calendar plugin (d1b9cf9)
Add isoWeeksInYear plugin (2db8631)
Add Occitan (oc-lnc) locale file () (c30b715)
Add plugin minMax to sopport .max .min (2870a23)
Fix set Month Year error in last day of the month (d058f4a)
Update ko locale weekdaysShort  () (317fd3e)
Update localizedFormat plugin to support lowercase localizable formats (l, ll, lll, llll) () (f2b5ebf)"
"chore(release): 1.11.3 [skip ci]

## [1.11.3](https://github.com/iamkun/dayjs/compare/v1.11.2...v1.11.3) (2022-06-06)

### Bug Fixes

*  customParseFormat plugin to parse comma as a separator character ([](https://github.com/iamkun/dayjs/issues/1913)) ([41b1405](https://github.com/iamkun/dayjs/commit/41b1405971e099431211ae6c2a100cd797da4427))
* update Dutch [nl] locale ordinal ([](https://github.com/iamkun/dayjs/issues/1908)) ([5da98f8](https://github.com/iamkun/dayjs/commit/5da98f8085d2d2847d79e38c795082703a14f24b))
test: update test case
ci: fix node 18 travis issue
ci: fix node 18 travis issue
chore(release): 1.11.4 [skip ci]

## [1.11.4](https://github.com/iamkun/dayjs/compare/v1.11.3...v1.11.4) (2022-07-19)

### Bug Fixes

* correct past property in ku (kurdish) locale ([](https://github.com/iamkun/dayjs/issues/1916)) ([74e82b9](https://github.com/iamkun/dayjs/commit/74e82b9da5ec8b90361fc27ac7c8b63faf354502))
* fix French [fr] local ordinal ([](https://github.com/iamkun/dayjs/issues/1932)) ([8f09834](https://github.com/iamkun/dayjs/commit/8f09834a88b8e7f8353c6e7473d4711596890a8c))
* fix objectSupport plugin ConfigTypeMap type ([](https://github.com/iamkun/dayjs/issues/1441)) ([](https://github.com/iamkun/dayjs/issues/1990)) ([fd51fe4](https://github.com/iamkun/dayjs/commit/fd51fe4f7fa799d8c598343e71fa59299ec4cf93))
* fix type error to add ordianl property in InstanceLocaleDataReturn and GlobalLocaleDataReturn types ([](https://github.com/iamkun/dayjs/issues/1931)) ([526f0ae](https://github.com/iamkun/dayjs/commit/526f0ae549ffbeeb9ef1099ca23964791fc59743))
* update locale ar-* meridiem function ([](https://github.com/iamkun/dayjs/issues/1954)) ([3d31611](https://github.com/iamkun/dayjs/commit/3d316117f04362d31f4e8bd349620b8414ce5d0c))
* zh-tw / zh-hk locale ordinal error ([](https://github.com/iamkun/dayjs/issues/1976)) ([0a1bd08](https://github.com/iamkun/dayjs/commit/0a1bd08e736be7d4e378aaca280caa6543f8066d))","Bug Fixes
correct past property in ku (kurdish) locale () (74e82b9)
fix French [fr] local ordinal () (8f09834)
fix objectSupport plugin ConfigTypeMap type () () (fd51fe4)
fix type error to add ordianl property in InstanceLocaleDataReturn and GlobalLocaleDataReturn types () (526f0ae)
update locale ar-* meridiem function () (3d31611)
zh-tw / zh-hk locale ordinal error () (0a1bd08)"
"chore(release): 1.8.32 [skip ci]

## [1.8.32](https://github.com/iamkun/dayjs/compare/v1.8.31...v1.8.32) (2020-08-04)

### Bug Fixes

* Add Experimental Timezone Plugin ([](https://github.com/iamkun/dayjs/issues/974)) ([e69caba](https://github.com/iamkun/dayjs/commit/e69caba1b0957241a855aa0ae38db899fa2c3795))
* fix parse date string error e.g. '2020/9/30' ([](https://github.com/iamkun/dayjs/issues/980)) ([231790d](https://github.com/iamkun/dayjs/commit/231790da62af0494732960c2c50d86ae9bf63ec6)), closes [](https://github.com/iamkun/dayjs/issues/979)
* update monthDiff function to get more accurate results ([19e8a7f](https://github.com/iamkun/dayjs/commit/19e8a7f2f7582b717f49d446822e39603694433c))
* Update UTC plugin to support keepLocalTime ([](https://github.com/iamkun/dayjs/issues/973)) ([9f488e5](https://github.com/iamkun/dayjs/commit/9f488e5aca92f0b4c2951459436829d79f86d8d7))
fix: Update pt-br locale weekStart 0 ()
fix: Fix Timezone plugin UTCOffset rounding bug ()

fix
fix: Fix isoWeek Plugin cal bug in UTC mode ()
fix: Fix Timezone plugin parsing js date, Day.js object, timestamp bug && update type file ()

fix, fix
fix: Fix UTC plugin bug while comparing an utc instance to a local one ()
fix: Add PluralGetSet plugin for plural getters/setters ()
chore: Reduce main bundle size ()
test: update test
fix: Add typescript type defs in esm build ()
chore: update build esm script
chore: update build script
chore(release): 1.8.33 [skip ci]

## [1.8.33](https://github.com/iamkun/dayjs/compare/v1.8.32...v1.8.33) (2020-08-10)

### Bug Fixes

* Add PluralGetSet plugin for plural getters/setters ([](https://github.com/iamkun/dayjs/issues/996)) ([f76e3ce](https://github.com/iamkun/dayjs/commit/f76e3ce2fbe5d3e9ed9121086baf55eb0cc4d355))
* Add typescript type defs in esm build ([](https://github.com/iamkun/dayjs/issues/985)) ([50e3b3c](https://github.com/iamkun/dayjs/commit/50e3b3c6719cb0b4ec6eff394dacd63d5db8f253))
* Fix isoWeek Plugin cal bug in UTC mode ([](https://github.com/iamkun/dayjs/issues/993)) ([f2e5f32](https://github.com/iamkun/dayjs/commit/f2e5f327aaf12b4572296ec6e107ecc05fcf76e7))
* Fix Timezone plugin parsing js date, Day.js object, timestamp bug && update type file ([](https://github.com/iamkun/dayjs/issues/994)) ([22f3d49](https://github.com/iamkun/dayjs/commit/22f3d49405da98db6da56d1673eebcd01b57554b)), closes [](https://github.com/iamkun/dayjs/issues/992) [](https://github.com/iamkun/dayjs/issues/989)
* Fix Timezone plugin UTCOffset rounding bug ([](https://github.com/iamkun/dayjs/issues/987)) ([b07182b](https://github.com/iamkun/dayjs/commit/b07182bbdf5aef7f6bf1e88fcd38432e2b8ee465)), closes [](https://github.com/iamkun/dayjs/issues/986)
* Fix UTC plugin bug while comparing an utc instance to a local one ([](https://github.com/iamkun/dayjs/issues/995)) ([747c0fb](https://github.com/iamkun/dayjs/commit/747c0fb4eba6353755b5dad3417fd8d5a408c378))
* Update pt-br locale weekStart 0 ([](https://github.com/iamkun/dayjs/issues/984)) ([0f881c1](https://github.com/iamkun/dayjs/commit/0f881c18efb02b9d0ba7f76cba92bb504226fa95))","Bug Fixes
Add PluralGetSet plugin for plural getters/setters () (f76e3ce)
Add typescript type defs in esm build () (50e3b3c)
Fix isoWeek Plugin cal bug in UTC mode () (f2e5f32)
Fix Timezone plugin parsing js date, Day.js object, timestamp bug && update type file () (22f3d49), closes
Fix Timezone plugin UTCOffset rounding bug () (b07182b), closes
Fix UTC plugin bug while comparing an utc instance to a local one () (747c0fb)
Update pt-br locale weekStart 0 () (0f881c1)"
"chore(release): 1.10.5 [skip ci]

## [1.10.5](https://github.com/iamkun/dayjs/compare/v1.10.4...v1.10.5) (2021-05-26)

### Bug Fixes

* add meridiem in ar locales ([](https://github.com/iamkun/dayjs/issues/1375)) ([319f616](https://github.com/iamkun/dayjs/commit/319f616e572a03b984013d04d1b3a18ffd5b1190))
* Added Zulu support to customParseFormat ([](https://github.com/iamkun/dayjs/issues/1359)) ([1138a3f](https://github.com/iamkun/dayjs/commit/1138a3f0a76592c6d72fb86c4399e133fa41e2ec))
* fix Bengali [bn] locale monthsShort error ([a0e6c0c](https://github.com/iamkun/dayjs/commit/a0e6c0cf3e1828020dfa11432c6716990f6ed5e0))
* fix missing types for ArraySupport plugin ([](https://github.com/iamkun/dayjs/issues/1401)) ([b1abdc4](https://github.com/iamkun/dayjs/commit/b1abdc40ee6c9d18ff46c311a114e0755677ea6f))
* fix Ukrainian [uk] locale ([](https://github.com/iamkun/dayjs/issues/1463)) ([0fdac93](https://github.com/iamkun/dayjs/commit/0fdac93ff2531542301b76952be9b084b2e2dfa0))
* hotfix for `Duration` types ([](https://github.com/iamkun/dayjs/issues/1357)) ([855b7b3](https://github.com/iamkun/dayjs/commit/855b7b3d049a3903794f91db3419f167c00dabd2)), closes [](https://github.com/iamkun/dayjs/issues/1354)
* timezone plugin DST error ([](https://github.com/iamkun/dayjs/issues/1352)) ([71bed15](https://github.com/iamkun/dayjs/commit/71bed155edf32bff24379930ac684fc783538d8f))
* Update duration plugin change string to number ([](https://github.com/iamkun/dayjs/issues/1394)) ([e1546d1](https://github.com/iamkun/dayjs/commit/e1546d1a0cdb97ae92cf11efe61d94707af6a3a3))
* update Duration plugin to support no-argument ([](https://github.com/iamkun/dayjs/issues/1400)) ([8d9a5ae](https://github.com/iamkun/dayjs/commit/8d9a5ae0749e1b4e76babd4deeaa3b1d9776c29b))
* Update Finnish [fi] locale to set yearStart  ([](https://github.com/iamkun/dayjs/issues/1378)) ([f3370bd](https://github.com/iamkun/dayjs/commit/f3370bda4e435118f714c8a7daf5c88cfc4b69ba))
* update Russian [ru] locale meridiem and unit tests ([](https://github.com/iamkun/dayjs/issues/1403)) ([f10f39d](https://github.com/iamkun/dayjs/commit/f10f39de7db70244a3c35e4a421090a12972457b))
* update Russian [ru] locale yearStart config  ([](https://github.com/iamkun/dayjs/issues/1372)) ([5052515](https://github.com/iamkun/dayjs/commit/5052515fe35b2444201ef8ef87220b1876a94d0a))
* update Slovenian [sl] locale to set correct ordinal  ([](https://github.com/iamkun/dayjs/issues/1386)) ([cb4f746](https://github.com/iamkun/dayjs/commit/cb4f74633b3020d6dbf19548c8cb13613dafca18))
* update Spanish [es] locale to change month names to lowercase ([](https://github.com/iamkun/dayjs/issues/1414)) ([9c20e77](https://github.com/iamkun/dayjs/commit/9c20e77caf7b1b5eccf418175203b198d4e29535))
* update Swedish [sv] locale to set correct yearStart ([](https://github.com/iamkun/dayjs/issues/1385)) ([66c5935](https://github.com/iamkun/dayjs/commit/66c59354964ef456bcd5f6152819618f44978082))
* update UTC plugin to support string argument like +HH:mm ([](https://github.com/iamkun/dayjs/issues/1395)) ([656127c](https://github.com/iamkun/dayjs/commit/656127cc44eda50923a1ac755602863fc32b9e69))
fix: update UTC plugin type file for strict parsing ()
fix: update names of weekdays and months in Bulgarian [bg] to lowercase ()
fix: add invalid date string override () ()
fix: Fix DayOfYear plugin when using BadMutable plugin ()
fix: Implement ordinal in Bulgarian translation (fixes) ()
fix: update customParseFormat plugin to custom two-digit year parse function ()
fix: update type file `.diff` ()
doc: Russian readme link changes & license translation ()
fix: parameter type ()
fix: add sv-fi Finland Swedish locale ()
fix: more strict delimiter in REGEX_PARSE ()
fix: dayjs ConfigTypeMap add null & undefined ()
fix: customParseFormat support parsing X x timestamp ()
chore(release): 1.10.6 [skip ci]

## [1.10.6](https://github.com/iamkun/dayjs/compare/v1.10.5...v1.10.6) (2021-07-06)

### Bug Fixes

* add invalid date string override ([](https://github.com/iamkun/dayjs/issues/1465)) ([](https://github.com/iamkun/dayjs/issues/1470)) ([06f88f4](https://github.com/iamkun/dayjs/commit/06f88f425828b1ce96b737332d25145a95a4ee9d))
* add sv-fi Finland Swedish locale ([](https://github.com/iamkun/dayjs/issues/1522)) ([8e32164](https://github.com/iamkun/dayjs/commit/8e32164855cff724642e24c37a631eb4c4d760c8))
* customParseFormat support parsing X x timestamp ([](https://github.com/iamkun/dayjs/issues/1567)) ([eb087f5](https://github.com/iamkun/dayjs/commit/eb087f52861313b8dd8a5c1b77858665ec72859e))
* dayjs ConfigTypeMap add null & undefined ([](https://github.com/iamkun/dayjs/issues/1560)) ([b5e40e6](https://github.com/iamkun/dayjs/commit/b5e40e6f16abeaea6a0facfa466d20aefaa8a444))
* Fix DayOfYear plugin when using BadMutable plugin ([](https://github.com/iamkun/dayjs/issues/1511)) ([0b0c6a3](https://github.com/iamkun/dayjs/commit/0b0c6a31ec9c0aff991b0e8dd6eed116201274cc))
* Implement ordinal in Bulgarian translation (fixes [](https://github.com/iamkun/dayjs/issues/1501)) ([](https://github.com/iamkun/dayjs/issues/1502)) ([b728da5](https://github.com/iamkun/dayjs/commit/b728da5ed9ed08210004ed20ce5fcd52a92de7da))
* more strict delimiter in REGEX_PARSE ([](https://github.com/iamkun/dayjs/issues/1555)) ([bfdab5c](https://github.com/iamkun/dayjs/commit/bfdab5c0d45a5736b68e8e1b1354fc021e05f607))
* parameter type ([](https://github.com/iamkun/dayjs/issues/1549)) ([f369844](https://github.com/iamkun/dayjs/commit/f369844dd69d253c4c7cbf68150939db3db233be))
* update customParseFormat plugin to custom two-digit year parse function ([](https://github.com/iamkun/dayjs/issues/1421)) ([bb5df55](https://github.com/iamkun/dayjs/commit/bb5df55cd3975dc7638b8f4e762afa470b6620f7))
* update names of weekdays and months in Bulgarian [bg] to lowercase ([](https://github.com/iamkun/dayjs/issues/1438)) ([b246210](https://github.com/iamkun/dayjs/commit/b24621091fec9cf6704de21e4b323f6f0c4abbf1))
* update type file `.diff` ([](https://github.com/iamkun/dayjs/issues/1505)) ([6508494](https://github.com/iamkun/dayjs/commit/6508494a4e62977b4397baaeef293d1bcf3c7235))
* update UTC plugin type file for strict parsing ([](https://github.com/iamkun/dayjs/issues/1443)) ([b4f28df](https://github.com/iamkun/dayjs/commit/b4f28df219fe63202dffdbeeaec5677c4d2c9111))","Bug Fixes
add invalid date string override () () (06f88f4)
add sv-fi Finland Swedish locale () (8e32164)
customParseFormat support parsing X x timestamp () (eb087f5)
dayjs ConfigTypeMap add null & undefined () (b5e40e6)
Fix DayOfYear plugin when using BadMutable plugin () (0b0c6a3)
Implement ordinal in Bulgarian translation (fixes) () (b728da5)
more strict delimiter in REGEX_PARSE () (bfdab5c)
parameter type () (f369844)
update customParseFormat plugin to custom two-digit year parse function () (bb5df55)
update names of weekdays and months in Bulgarian [bg] to lowercase () (b246210)
update type file .diff () (6508494)
update UTC plugin type file for strict parsing () (b4f28df)"
"chore(release): 1.8.29 [skip ci]

## [1.8.29](https://github.com/iamkun/dayjs/compare/v1.8.28...v1.8.29) (2020-07-02)

### Bug Fixes

* Duration plugin supports parse ISO string with week (W) ([](https://github.com/iamkun/dayjs/issues/950)) ([f0fc12a](https://github.com/iamkun/dayjs/commit/f0fc12adadcab53fb0577ad8f5e2f1cf784fd8f5))
* LocaleData plugin supports locale order ([](https://github.com/iamkun/dayjs/issues/938)) ([62f429d](https://github.com/iamkun/dayjs/commit/62f429db73a0a069b1267231dea172b85f4b90e3)), closes [](https://github.com/iamkun/dayjs/issues/936)
* Update type definition to support array format ([](https://github.com/iamkun/dayjs/issues/945)) ([81d4740](https://github.com/iamkun/dayjs/commit/81d4740511d47e34f891b21afeb0449ef8a28688)), closes [](https://github.com/iamkun/dayjs/issues/944)
* Update type definition to support strict mode ([](https://github.com/iamkun/dayjs/issues/951)) ([8d54f3f](https://github.com/iamkun/dayjs/commit/8d54f3f7d4d161e72c767fa09699e70a2b3d681c))
chore: Update readme
fix: Update French (fr) locale to set correct yearStart

fix
fix: Add Haitian Creole (ht) and Spanish Puerto Rico (es-pr) locale configs ()
fix: Fix UTC plugin wrong hour bug while adding month or year  ()
Fix: Locale presets type definition ()
chore: update LocalePresetType
chore(release): 1.8.30 [skip ci]

## [1.8.30](https://github.com/iamkun/dayjs/compare/v1.8.29...v1.8.30) (2020-07-22)

### Bug Fixes

* Add Haitian Creole (ht) and Spanish Puerto Rico (es-pr) locale configs ([](https://github.com/iamkun/dayjs/issues/958)) ([b2642e2](https://github.com/iamkun/dayjs/commit/b2642e2d1f87734a34808c66e5176cb18bc0414d))
* Fix UTC plugin wrong hour bug while adding month or year  ([](https://github.com/iamkun/dayjs/issues/957)) ([28ae070](https://github.com/iamkun/dayjs/commit/28ae070024ff26685c88ce4cc8747307e86923c9))
* Update French (fr) locale to set correct yearStart ([14ab808](https://github.com/iamkun/dayjs/commit/14ab808a7b7e226f2eb2cbe894916a18ed5d967d)), closes [](https://github.com/iamkun/dayjs/issues/956)","Bug Fixes
Add Haitian Creole (ht) and Spanish Puerto Rico (es-pr) locale configs () (b2642e2)
Fix UTC plugin wrong hour bug while adding month or year  () (28ae070)
Update French (fr) locale to set correct yearStart (14ab808), closes"
"chore(release): 1.8.34 [skip ci]

## [1.8.34](https://github.com/iamkun/dayjs/compare/v1.8.33...v1.8.34) (2020-08-20)

### Bug Fixes

* Fix Timezone plugin to preserve milliseconds while changing timezone ([](https://github.com/iamkun/dayjs/issues/1003)) ([5f446ed](https://github.com/iamkun/dayjs/commit/5f446eda770fa97e895c81a8195b3ba5d082cef0)), closes [](https://github.com/iamkun/dayjs/issues/1002)
* support parsing unlimited decimals of millisecond ([](https://github.com/iamkun/dayjs/issues/1010)) ([d1bdd36](https://github.com/iamkun/dayjs/commit/d1bdd36a56e3d1786523a180e3fc18068f609135)), closes [](https://github.com/iamkun/dayjs/issues/544)
* update Duration plugin to support global locale ([](https://github.com/iamkun/dayjs/issues/1008)) ([1c49c83](https://github.com/iamkun/dayjs/commit/1c49c83e79811eede13db6372b5d65db598aee77)), closes [](https://github.com/iamkun/dayjs/issues/1007)
fix: fix LocaleData plugin to support instance.weekdays() API ()

fix
fix: Fix BadMutable plugin bug in .diff ()
fix: Update Dutch (nl) locale to set correct yearStart
chore(release): 1.8.35 [skip ci]

## [1.8.35](https://github.com/iamkun/dayjs/compare/v1.8.34...v1.8.35) (2020-09-02)

### Bug Fixes

* Fix BadMutable plugin bug in .diff ([](https://github.com/iamkun/dayjs/issues/1023)) ([40ab6d9](https://github.com/iamkun/dayjs/commit/40ab6d9a53e8047cfca63c611c25dd045372d021))
* fix LocaleData plugin to support instance.weekdays() API ([](https://github.com/iamkun/dayjs/issues/1019)) ([a09d259](https://github.com/iamkun/dayjs/commit/a09d259a407b81d1cb6bb5623fad551c775d8674)), closes [](https://github.com/iamkun/dayjs/issues/1017)
* Update Dutch (nl) locale to set correct yearStart ([1533a2c](https://github.com/iamkun/dayjs/commit/1533a2cc1475270032da2d87b19fc3d62327e6e3))","Bug Fixes
Fix BadMutable plugin bug in .diff () (40ab6d9)
fix LocaleData plugin to support instance.weekdays() API () (a09d259), closes
Update Dutch (nl) locale to set correct yearStart (1533a2c)"
"chore(release): 1.8.19 [skip ci]

## [1.8.19](https://github.com/iamkun/dayjs/compare/v1.8.18...v1.8.19) (2020-01-06)

### Bug Fixes

* Add UpdateLocale plugin to update a locale's properties ([](https://github.com/iamkun/dayjs/issues/766)) ([82ce2ba](https://github.com/iamkun/dayjs/commit/82ce2ba8d7e402e40f6d005d400eb5356a0b0633))
* Fix CustomParseFormat Plugin 'YYYY-MM' use first day of the month ([ba709ec](https://github.com/iamkun/dayjs/commit/ba709eca86a71ae648bc68bf67d9abdc229198d4)), closes [](https://github.com/iamkun/dayjs/issues/761)
* Fix CustomParseFormat Plugin to set correct locale ([66ce23f](https://github.com/iamkun/dayjs/commit/66ce23f2e18c5506e8f1a7ef20d3483a4df80087))
* Fix WeekOfYear Plugin wrong calender week number bug ([79b86db](https://github.com/iamkun/dayjs/commit/79b86dbbf3cfd3f1e2165b3d479a7061ad1b6925)), closes [](https://github.com/iamkun/dayjs/issues/760)
* Update RelativeTime plugin to support function to make additional processing ([](https://github.com/iamkun/dayjs/issues/767)) ([4bd9250](https://github.com/iamkun/dayjs/commit/4bd9250fbe7131e2fddfb5fa1b3350e8c2262ca9))
* Update ru, uk, cs locale to support relativeTime with plural ([3f080f7](https://github.com/iamkun/dayjs/commit/3f080f7d6bfdc4018cbb7c4d0112ff1ead4ef6b8))
fix: Fix weekOfYear plugin to support yearStart locale for better week number result ()
fix: Add Bislama Locale (bi) ()
fix: Update pl locale fusional config
chore: Add locale comment
fix: Update LocaleData plugin to support dayjs.localeData().weekdays() API

fix
fix: Update LocaleData plugin to support dayjs.months dayjs.weekdays API

fix
fix: Update et (Estonian) locale relativeTime ()
chore(release): 1.8.20 [skip ci]

## [1.8.20](https://github.com/iamkun/dayjs/compare/v1.8.19...v1.8.20) (2020-02-04)

### Bug Fixes

* Add Bislama Locale (bi) ([](https://github.com/iamkun/dayjs/issues/780)) ([9ac6ab4](https://github.com/iamkun/dayjs/commit/9ac6ab481bc883dd4ecc02caab12c8b2fc218a42))
* Fix weekOfYear plugin to support yearStart locale for better week number result ([](https://github.com/iamkun/dayjs/issues/769)) ([f00db36](https://github.com/iamkun/dayjs/commit/f00db36e70bc7beaca1abadeb30a9b1fbb3261ee))
* Update et (Estonian) locale relativeTime ([](https://github.com/iamkun/dayjs/issues/790)) ([d8e0f45](https://github.com/iamkun/dayjs/commit/d8e0f45f6cd2d5e5704b9797929227454c92d1a5))
* Update LocaleData plugin to support dayjs.localeData().weekdays() API ([287fed6](https://github.com/iamkun/dayjs/commit/287fed6db9eb4fd979b4861aca4dacbd32422533)), closes [](https://github.com/iamkun/dayjs/issues/779)
* Update LocaleData plugin to support dayjs.months dayjs.weekdays API ([144c2ae](https://github.com/iamkun/dayjs/commit/144c2ae6e15fbf89e3acd7c8cb9e237c5f6e1348)), closes [](https://github.com/iamkun/dayjs/issues/779)
* Update pl locale fusional config ([d372475](https://github.com/iamkun/dayjs/commit/d3724758bb27d5b17587b995ba14e7e80dcd1151))","Bug Fixes
Add Bislama Locale (bi) () (9ac6ab4)
Fix weekOfYear plugin to support yearStart locale for better week number result () (f00db36)
Update et (Estonian) locale relativeTime () (d8e0f45)
Update LocaleData plugin to support dayjs.localeData().weekdays() API (287fed6), closes
Update LocaleData plugin to support dayjs.months dayjs.weekdays API (144c2ae), closes
Update pl locale fusional config (d372475)"
"Nuclei detection should be more stable across regions ()

This does a better job of detecting the average color of the area being
analyzed to reduce individual tile effects.  It also fixes a potential
infinite loop in a degenerate case.

Closes.
Fix divide zero guard ()
Update conf.py","What's Changed
Fix divide zero guard by @manthey in
Full Changelog: v1.3.3...v1.3.4"
"Bump scikit-learn from 0.24.2 to 1.0

Bumps [scikit-learn](https://github.com/scikit-learn/scikit-learn) from 0.24.2 to 1.0.
- [Release notes](https://github.com/scikit-learn/scikit-learn/releases)
- [Commits](https://github.com/scikit-learn/scikit-learn/compare/0.24.2...1.0)

---
updated-dependencies:
- dependency-name: scikit-learn
  dependency-type: direct:production
  update-type: version-update:semver-major
...

Signed-off-by: dependabot[bot] <support@github.com>
Update inverse transform for plotting
Bump pytorch-lightning from 1.4.8 to 1.4.9

Bumps [pytorch-lightning](https://github.com/PyTorchLightning/pytorch-lightning) from 1.4.8 to 1.4.9.
- [Release notes](https://github.com/PyTorchLightning/pytorch-lightning/releases)
- [Changelog](https://github.com/PyTorchLightning/pytorch-lightning/blob/master/CHANGELOG.md)
- [Commits](https://github.com/PyTorchLightning/pytorch-lightning/compare/1.4.8...1.4.9)

---
updated-dependencies:
- dependency-name: pytorch-lightning
  dependency-type: direct:production
  update-type: version-update:semver-patch
...

Signed-off-by: dependabot[bot] <support@github.com>
update poetry lock
Bump pyarrow from 5.0.0 to 6.0.0

Bumps [pyarrow](https://github.com/pandas-dev/pandas) from 5.0.0 to 6.0.0.
- [Release notes](https://github.com/pandas-dev/pandas/releases)
- [Changelog](https://github.com/pandas-dev/pandas/blob/master/RELEASE.md)
- [Commits](https://github.com/pandas-dev/pandas/commits)

---
updated-dependencies:
- dependency-name: pyarrow
  dependency-type: direct:development
  update-type: version-update:semver-major
...

Signed-off-by: dependabot[bot] <support@github.com>
Bump ipykernel from 6.4.1 to 6.4.2

Bumps [ipykernel](https://ipython.org) from 6.4.1 to 6.4.2.

---
updated-dependencies:
- dependency-name: ipykernel
  dependency-type: direct:development
  update-type: version-update:semver-patch
...

Signed-off-by: dependabot[bot] <support@github.com>
Bump scikit-learn from 1.0 to 1.0.1

Bumps [scikit-learn](https://github.com/scikit-learn/scikit-learn) from 1.0 to 1.0.1.
- [Release notes](https://github.com/scikit-learn/scikit-learn/releases)
- [Commits](https://github.com/scikit-learn/scikit-learn/compare/1.0...1.0.1)

---
updated-dependencies:
- dependency-name: scikit-learn
  dependency-type: direct:production
  update-type: version-update:semver-patch
...

Signed-off-by: dependabot[bot] <support@github.com>
Bump pytest-github-actions-annotate-failures from 0.1.3 to 0.1.5

Bumps [pytest-github-actions-annotate-failures](https://github.com/utgwkk/pytest-github-actions-annotate-failures) from 0.1.3 to 0.1.5.
- [Release notes](https://github.com/utgwkk/pytest-github-actions-annotate-failures/releases)
- [Changelog](https://github.com/utgwkk/pytest-github-actions-annotate-failures/blob/main/CHANGELOG.md)
- [Commits](https://github.com/utgwkk/pytest-github-actions-annotate-failures/compare/v0.1.3...v0.1.5)

---
updated-dependencies:
- dependency-name: pytest-github-actions-annotate-failures
  dependency-type: direct:production
  update-type: version-update:semver-patch
...

Signed-off-by: dependabot[bot] <support@github.com>
Bump black from 21.9b0 to 21.10b0

Bumps [black](https://github.com/psf/black) from 21.9b0 to 21.10b0.
- [Release notes](https://github.com/psf/black/releases)
- [Changelog](https://github.com/psf/black/blob/main/CHANGES.md)
- [Commits](https://github.com/psf/black/commits)

---
updated-dependencies:
- dependency-name: black
  dependency-type: direct:development
...

Signed-off-by: dependabot[bot] <support@github.com>
Bump coverage from 6.0.2 to 6.1.1

Bumps [coverage](https://github.com/nedbat/coveragepy) from 6.0.2 to 6.1.1.
- [Release notes](https://github.com/nedbat/coveragepy/releases)
- [Changelog](https://github.com/nedbat/coveragepy/blob/master/CHANGES.rst)
- [Commits](https://github.com/nedbat/coveragepy/compare/6.0.2...6.1.1)

---
updated-dependencies:
- dependency-name: coverage
  dependency-type: direct:development
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>
Bump ipykernel from 6.4.2 to 6.5.0

Bumps [ipykernel](https://ipython.org) from 6.4.2 to 6.5.0.

---
updated-dependencies:
- dependency-name: ipykernel
  dependency-type: direct:development
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>
Bump isort from 5.9.3 to 5.10.0

Bumps [isort](https://github.com/pycqa/isort) from 5.9.3 to 5.10.0.
- [Release notes](https://github.com/pycqa/isort/releases)
- [Changelog](https://github.com/PyCQA/isort/blob/main/CHANGELOG.md)
- [Commits](https://github.com/pycqa/isort/compare/5.9.3...5.10.0)

---
updated-dependencies:
- dependency-name: isort
  dependency-type: direct:development
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>
Fix inattention mutation to `x_cont`.
Bump isort from 5.10.0 to 5.10.1

Bumps [isort](https://github.com/pycqa/isort) from 5.10.0 to 5.10.1.
- [Release notes](https://github.com/pycqa/isort/releases)
- [Changelog](https://github.com/PyCQA/isort/blob/main/CHANGELOG.md)
- [Commits](https://github.com/pycqa/isort/compare/5.10.0...5.10.1)

---
updated-dependencies:
- dependency-name: isort
  dependency-type: direct:development
  update-type: version-update:semver-patch
...

Signed-off-by: dependabot[bot] <support@github.com>
update CHANGELOG.
Fix trailing whitespace.
Update metrics.py

fixing the signature for the base metric class
Add PR number to changelog
Fix condition for UserWarning (issue)
Bump pydata-sphinx-theme from 0.7.1 to 0.7.2

Bumps [pydata-sphinx-theme](https://github.com/pydata/pydata-sphinx-theme) from 0.7.1 to 0.7.2.
- [Release notes](https://github.com/pydata/pydata-sphinx-theme/releases)
- [Changelog](https://github.com/pydata/pydata-sphinx-theme/blob/master/docs/changelog.rst)
- [Commits](https://github.com/pydata/pydata-sphinx-theme/compare/v0.7.1...v0.7.2)

---
updated-dependencies:
- dependency-name: pydata-sphinx-theme
  dependency-type: direct:development
  update-type: version-update:semver-patch
...

Signed-off-by: dependabot[bot] <support@github.com>
Bump coverage from 6.1.1 to 6.1.2

Bumps [coverage](https://github.com/nedbat/coveragepy) from 6.1.1 to 6.1.2.
- [Release notes](https://github.com/nedbat/coveragepy/releases)
- [Changelog](https://github.com/nedbat/coveragepy/blob/master/CHANGES.rst)
- [Commits](https://github.com/nedbat/coveragepy/compare/6.1.1...6.1.2)

---
updated-dependencies:
- dependency-name: coverage
  dependency-type: direct:development
  update-type: version-update:semver-patch
...

Signed-off-by: dependabot[bot] <support@github.com>
Bump statsmodels from 0.13.0 to 0.13.1

Bumps [statsmodels](https://github.com/statsmodels/statsmodels) from 0.13.0 to 0.13.1.
- [Release notes](https://github.com/statsmodels/statsmodels/releases)
- [Changelog](https://github.com/statsmodels/statsmodels/blob/main/CHANGES.md)
- [Commits](https://github.com/statsmodels/statsmodels/compare/v0.13.0...v0.13.1)

---
updated-dependencies:
- dependency-name: statsmodels
  dependency-type: direct:production
  update-type: version-update:semver-patch
...

Signed-off-by: dependabot[bot] <support@github.com>
fixed accessing model.val_dataloader
Bump matplotlib from 3.4.3 to 3.5.0

Bumps [matplotlib](https://github.com/matplotlib/matplotlib) from 3.4.3 to 3.5.0.
- [Release notes](https://github.com/matplotlib/matplotlib/releases)
- [Commits](https://github.com/matplotlib/matplotlib/compare/v3.4.3...v3.5.0)

---
updated-dependencies:
- dependency-name: matplotlib
  dependency-type: direct:production
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>
Bump black from 21.10b0 to 21.11b0

Bumps [black](https://github.com/psf/black) from 21.10b0 to 21.11b0.
- [Release notes](https://github.com/psf/black/releases)
- [Changelog](https://github.com/psf/black/blob/main/CHANGES.md)
- [Commits](https://github.com/psf/black/commits)

---
updated-dependencies:
- dependency-name: black
  dependency-type: direct:development
...

Signed-off-by: dependabot[bot] <support@github.com>
Bump black from 21.11b0 to 21.11b1

Bumps [black](https://github.com/psf/black) from 21.11b0 to 21.11b1.
- [Release notes](https://github.com/psf/black/releases)
- [Changelog](https://github.com/psf/black/blob/main/CHANGES.md)
- [Commits](https://github.com/psf/black/commits)

---
updated-dependencies:
- dependency-name: black
  dependency-type: direct:development
...

Signed-off-by: dependabot[bot] <support@github.com>
Bump pyarrow from 6.0.0 to 6.0.1

Bumps [pyarrow](https://github.com/pandas-dev/pandas) from 6.0.0 to 6.0.1.
- [Release notes](https://github.com/pandas-dev/pandas/releases)
- [Changelog](https://github.com/pandas-dev/pandas/blob/master/RELEASE.md)
- [Commits](https://github.com/pandas-dev/pandas/commits)

---
updated-dependencies:
- dependency-name: pyarrow
  dependency-type: direct:development
  update-type: version-update:semver-patch
...

Signed-off-by: dependabot[bot] <support@github.com>
Bump ipykernel from 6.5.0 to 6.5.1

Bumps [ipykernel](https://ipython.org) from 6.5.0 to 6.5.1.

---
updated-dependencies:
- dependency-name: ipykernel
  dependency-type: direct:development
  update-type: version-update:semver-patch
...

Signed-off-by: dependabot[bot] <support@github.com>
Bump sphinx from 4.2.0 to 4.3.0

Bumps [sphinx](https://github.com/sphinx-doc/sphinx) from 4.2.0 to 4.3.0.
- [Release notes](https://github.com/sphinx-doc/sphinx/releases)
- [Changelog](https://github.com/sphinx-doc/sphinx/blob/4.x/CHANGES)
- [Commits](https://github.com/sphinx-doc/sphinx/compare/v4.2.0...v4.3.0)

---
updated-dependencies:
- dependency-name: sphinx
  dependency-type: direct:development
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>
fixed accessing model.val_dataloader
Bump pytorch-lightning from 1.4.9 to 1.5.2

Bumps [pytorch-lightning](https://github.com/PyTorchLightning/pytorch-lightning) from 1.4.9 to 1.5.2.
- [Release notes](https://github.com/PyTorchLightning/pytorch-lightning/releases)
- [Changelog](https://github.com/PyTorchLightning/pytorch-lightning/blob/1.5.2/CHANGELOG.md)
- [Commits](https://github.com/PyTorchLightning/pytorch-lightning/compare/1.4.9...1.5.2)

---
updated-dependencies:
- dependency-name: pytorch-lightning
  dependency-type: direct:production
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>
Bump torch from 1.9.1 to 1.10.0

Bumps [torch](https://github.com/pytorch/pytorch) from 1.9.1 to 1.10.0.
- [Release notes](https://github.com/pytorch/pytorch/releases)
- [Changelog](https://github.com/pytorch/pytorch/blob/master/RELEASE.md)
- [Commits](https://github.com/pytorch/pytorch/compare/v1.9.1...v1.10.0)

---
updated-dependencies:
- dependency-name: torch
  dependency-type: direct:production
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>
Fix adamw test by reducing learning rate
Bump pylint from 2.11.1 to 2.12.1

Bumps [pylint](https://github.com/PyCQA/pylint) from 2.11.1 to 2.12.1.
- [Release notes](https://github.com/PyCQA/pylint/releases)
- [Changelog](https://github.com/PyCQA/pylint/blob/main/ChangeLog)
- [Commits](https://github.com/PyCQA/pylint/compare/v2.11.1...v2.12.1)

---
updated-dependencies:
- dependency-name: pylint
  dependency-type: direct:development
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>
remove trainer dependency from optimizer config
remove AdamW to check if segmentation fault in CI is related
add weight decay > 0 for adamw tests
remove adamw ro test segmentation fault
replace adamw with SGD tests
add support for testing with lightning
add tests
edit changelog
fix minor bug
random commit to trigger CI
reduce number of batches to test for
Test SGD
Test if segmentation fault is a compounding issue
remove direct passing of optimizer class - something going wrong with memory
Bump coverage from 6.1.2 to 6.2

Bumps [coverage](https://github.com/nedbat/coveragepy) from 6.1.2 to 6.2.
- [Release notes](https://github.com/nedbat/coveragepy/releases)
- [Changelog](https://github.com/nedbat/coveragepy/blob/master/CHANGES.rst)
- [Commits](https://github.com/nedbat/coveragepy/compare/6.1.2...6.2)

---
updated-dependencies:
- dependency-name: coverage
  dependency-type: direct:development
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>
Make 0.9.2 release","Added
Added support for running pytorch_lightning.trainer.test ()
Fixed
Fix inattention mutation to x_cont ().
Compatability with pytorch-lightning 1.5 ()
Contributors
eavae
danielgafni"
"ceph: only set isUpgrade when the image changes

The isUpgrade flag was being set every time the operator
was started. This caused the upgrade checks to be run every
time the operator restarted. Thus, if any mons were down,
you likely would get stuck on the upgrade checks since another
mon could not be stopped. We need to rely on the upgrade being
detected either by a different image name from the cluster CR
update, or from different versions of the daemons running
in case the operator was restarted in the middle of an upgrade.

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>
(cherry picked from commit b79c223986cd94899be273cb7a66de1a5e7518a2)
ceph: fix object bucket provisioner when rgw not on port 80

Solves issue where provisioner would not handle other ports

Signed-off-by: Brian Sperduto <brian.sperduto@gmail.com>
(cherry picked from commit 78f72d48d631e7073467c9dc26fd31c5a8202a6b)
CSI: Add privileged securityContext to all daemonset containers

On systems with SELinux enabled, non-privileged containers
can't access data of privileged containers.
Since the socket is exposed by privileged containers,
all sidecars must be privileged too.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
(cherry picked from commit d9dd91d9fb7d9558aadf72b4fdbb08afa1623aa1)
CSI: use empty dir to store provisioner socket file

currently we are making use of hostpath
directory to store the provisioner socket, as this
socket is not needed by anyone else other than containers
inside the provisioner pod using empty directory
to store this socket is  the best option.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
(cherry picked from commit 7a7e65a9b255a99d3f0d3d38bc754db1fd78d838)
build: set the v1.1.9 release tag

With the v1.1.9 release we update the manifests with the new tag.

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>","Improvements
Rook v1.1.9 is a patch release limited in scope and focusing on bug fixes.
Ceph
CSI driver handling of upgrade from OCP 4.2 to OCP 4.3 (, @Madhu-1)
Fix object bucket provisioner when rgw not on port 80 (, @bsperduto)
Only perform upgrade checks when the Ceph image changes (, @travisn)"
"ceph: mention helm upgrade path for csi driver

Update documentation to mention helm chart upgrade path for csi driver.

This prevents the user from manually applying the RBAC roles when the helm chart does it for him also notifies him where to set the images for CSI in the helm chart.

Signed-off-by: Paul <paulcatinean@gmail.com>
(cherry picked from commit 6cd49153adb821538397430056436bea2519d232)
ceph: avoid duplication of mon anti-affinity

The default pod anti-affinity for the mons that rook adds
automatically intended to be appended to any anti-affinity that
is specified in the cluster CR.

There is a bug in the ApplyToPodSpec() method that has long existed.
The issue is that when antiaffinity is appended, it will append not only
to the pod spec, but will modify the original placement spec. Thus, each
mon that is started will have one more antiaffinity clause than the previous mon.

This condition is rarely hit or noticed because it commonly is only hit
in the canary pods. Since these pods are immediately deleted,
there are no side effects of the duplicate affinity clauses. The place
where it becomes an issue is when the mons are backed by a PVC. In this case,
the mons do not have node affinity and will hit the code path that appends
to the antiaffinity and thus modifies the original antiaffinity.

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>
k8sutil: set ResourceVersion for PrometheusRule

This change sets the ResourceVersion on the PrometheusRule object before
it is updated in Kubernetes.
This change fixes the following error
```
is invalid: metadata.resourceVersion: Invalid value: 0x0: must be specified for an update
```
which can occur during update when no ResourceVersion is set.

Resolves

Signed-off-by: Alexander Trost <galexrt@googlemail.com>
(cherry picked from commit 430e4dc0f4fee5b87b3016dffe64833a40aa6d14)
Ceph: fix updates for servicemonitor

with older implementation, servicemonitor was not getting
updated due to missing resource version. This fix adds
resource version to the servicemonitor definition and
ensures that the object is properly created or
updated.

Signed-off-by: Umanga Chapagain <chapagainumanga@gmail.com>
(cherry picked from commit db3735656c64b77ba57fb0c4f5be7282a36255b7)
CSI: Fix enable resizer and attacher leader election

If the user has specified the custom ceph-csi image
name in the operator the starting of the resizer and
attacher leaderelection will fail,
this Fix will use the last index of slice to check
the image version is v2.x or not.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
ceph: double check for a filesystem

It appears that udev does not report `ID_FS_TYPE` sometimes so let's try
again with lsblk before not skipping the device.

Closes: https://github.com/rook/rook/issues/5022
Signed-off-by: Sébastien Han <seb@redhat.com>
ceph: reject small devices

disk/partition smaller than 5GiB will be skipped and not used for OSD.

Signed-off-by: Sébastien Han <seb@redhat.com>
ceph: set pg_num for rgw metadata pools to lower default

The PG count on metadata pools should default to rgw_rados_pool_pg_num_min
instead of the more general default pg count. This means rgw pools
will default to 8 PGs instead of 32 PGs, which means a lot more pools
can be created before hitting the default PG limit.

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>
build: set manifest versions to v1.2.7

Set the manifest versions and docs to v1.2.7 for the patch release

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>","Improvements
Rook v1.2.7 is a patch release limited in scope and focusing on bug fixes.
Ceph
Apply the expected lower PG count for rgw metadata pools (, @travisn)
Reject devices smaller than 5GiB for OSDs (, @leseb)
Add extra check for filesystem to skip boot volumes for OSD configuration (, @leseb)
Avoid duplication of mon pod anti-affinity (, @travisn)
Update service monitor definition during upgrade (, @umangachapagain)
Resizer container fix due to misinterpretation of the cephcsi version (, @Madhu-1)
Set ResourceVersion for Prometheus rules (, @galexrt)
Upgrade doc clarification for RBAC related to the helm chart (, @PCatinean)"
"Edgefs:3181 prevents multiple targets deployment on the same node

Signed-off-by: Anton Skriptsov <sabbotagge@gmail.com>
(cherry picked from commit a0edbf627fe6e83f3918260bb45f994f6b753698)
Added separator to enable creation of multiple SCC

Signed-off-by: Umanga Chapagain <chapagainumanga@gmail.com>
(cherry picked from commit 32057646ccb284be2e02cb72bead036e964cb66a)
ceph: Check before copying binaries in osd pods

Before performing the copy, the OSD init container now checks
destination path exists. If the destination exists, it skips the copy.

The OSD pods copy the rook and tini binaries into a shared volume using
an init container. In restarting pods, this copy could fail with 'text
file busy'(ETXTBUSY), because the destination file in the shared volume
could be under execution. The restarting pods will enter a
'Init:CrashLoopBackOff' state after this, leaving the ceph cluster
degraded. Skipping the copy will allow the init containers to complete
successfully, allowing the pod to restart.

Fixes.

Signed-off-by: Kaushal M <kshlmster@gmail.com>
(cherry picked from commit f48f73300f9d129cc8fdc48c71934bfec02788aa)
Updated ceph image from v14.2.0-20190319 to v14.2.1-20190430

ceph image v14.2.0-20190319 has 3 high vulnerabilities so
updated it to v14.2.1-20190430
Signed-off-by: rohan47 <rohgupta@redhat.com>
(cherry picked from commit d4a29735ff0ff1519dc4c5620596e5d112bd1137)
ceph docs: quickstart uses the test configuration for a single osd

Since the default OSD is no longer created under dataDirHostPath,
the most common issue in the 1.0 release is that users don't have OSD
created in the cluster. Now the quickstart doc will guide users to
create a test cluster to get them going with a filestore OSD in
a directory, with clear guidance that this is not expected in production

Signed-off-by: travisn <tnielsen@redhat.com>
(cherry picked from commit 346f2c9fd4912e5ce749ad9d91be825768b7e19d)
use ceph fsid to filter ceph volume OSDs

- Updated getCephVolumeOSDs method to use fsid filter while retriving devices.
- This solves ""failed to fetch mon config (--no-mon-config to skip)"" error when multiple ceph clusters are running on same Node

Signed-off-by: Santosh Pillai <sapillai@redhat.com>
(cherry picked from commit ec2e6ea888b98f18f432c4c5541c17c6fd32ef87)
Signed-off-by: Santosh Pillai <sapillai@redhat.com>
fixed ceph pg dump pgs_brief json deserialization

Signed-off-by: rohan47 <rohgupta@redhat.com>
(cherry picked from commit a380ca7dc1044876d06f59fd2154fd46fb3b287a)
ceph: fix pod memory check

This commit fixes the second test case where limit and request are
either identical or different but still we use limit as a value.

Signed-off-by: Sébastien Han <seb@redhat.com>
(cherry picked from commit 24abbddf14904d6599872b7beb42f1fc039bbc7d)
ceph: add resource limit check for rbdmirror

The memory check was missing and will be trigger if resources limit are
configured for the rbdmirror pod.

Signed-off-by: Sébastien Han <seb@redhat.com>
(cherry picked from commit d3c8d5612b790dbdff5c3261c493e3aa4a3f4181)
ceph: add missing documentation for resource limits

This commit documents the minimum amount of memory accepted by Rook to
 run Ceph pods properly.

Signed-off-by: Sébastien Han <seb@redhat.com>
(cherry picked from commit 62b69d08e5cdf7ff35a016042bf5f26f191034dd)
ceph: set the fsgroup only on the top level of the mount

If setting the fsgroup recursively on a shared filesystem mount is
not desirable, the fsgroup capability on the flex driver
should first be disabled in the operator env vars. Now the driver
will apply the fsgroup only at the top level instead of
recursively for the entire shared filesystem.

Signed-off-by: travisn <tnielsen@redhat.com>
(cherry picked from commit fd341ae928d4664671a7b94faacb55691fb33afc)
discover: handle false-positives observed by users

the only exception to a naive device list comparison had been to ignore
drive UUID information which was unreliable when a device wasn't
formatted / partitioned. however various users have reported different
type of false positives that resulted in orchestration being run
continuously due to the wrong observation that devices were changing.

this patch fixes the cases we have observed and attempts to be slightly
more conservative in the calculation.

1. the devlinks is ignored. when a device is setup for lvm, for example,
the devlinks will be updated with different paths that point to the
device in addition to its standard paths addressable by pci address.

2. in the lvm case, the ""model"" field and ""filesystem"" field may also
change.

3. we ignore devices with devlinks that contain ""usb"" to avoid issues
when using usb drives.

4. be smart about detecting device availability. if a device transitions
from a non-empty (or has-partitions) state to an empty (or unpartitioned)
state then orchestration is triggered. this like observing that a device
is now available (e.g. in the allDevices case). however, when a device
transistions from empty to non-empty, then this is ignored as while it
is a change, it's generally a change associated with the new consumption
of the device.

fixes:
fixes:
fixes:

Signed-off-by: Noah Watkins <noahwatkins@gmail.com>
(cherry picked from commit 3966f163ede02deef9fef395eff05b4597543057)
ceph: retry on detecting ceph version

Sometime the kube engine needs a bit of time to return the logs of a
given job and fails to read the stream.
Retrying up to detect the Ceph version seems reasonnable to
overcome this issue.

Fixes: https://github.com/rook/rook/issues/3227
Signed-off-by: Sébastien Han <seb@redhat.com>
(cherry picked from commit 6438d9907ec7be0dd06f97f00b8144be4f00cfdd)
enable proper values for metadataOnly property

Signed-off-by: Dmitry Yusupov <dmitry.yusupov@nexenta.com>
(cherry picked from commit 41d92cee3efda14bc0a4c53cdfa0e95a013ccc83)
ceph: added resource quantity comparer when checking cluster changes

the resource struct has non-exportable fields which panics when
doing the diff comparison

Signed-off-by: d-luu <david@davidluu.info>
(cherry picked from commit d22886da37223974f0ace84e0bffcd88a647c7ac)
set the release version to v1.0.2 in deployment manifests

Signed-off-by: travisn <tnielsen@redhat.com>","Rook v1.0.2 is a patch release limited in scope and focusing on bug fixes.
Improvements
Ceph
Handle false positives for triggering orchestration after hotplugging devices (, @noahdesu)
Set fsgroup only on the top level of the cephfs mount (, @travisn)
Improved diff checking when the CR changes (, @d-luu)
Retry checking the ceph version if failed (, @leseb)
Resource limits: Document the minimum limits, add limits for rbd mirror daemons, and fix the memory check (@leseb)
Deserialization of pg dump for nautilus when removing OSDs (, @rohan47)
Start OSDs only for correct ceph cluster when there are multiple ceph clusters on the same nodes (, @sp98)
Clarify documentation for creating OSDs (, @travisn)
Update the operator base image to v14.2.1 (, @rohan47)
Add separator to scc yaml example (, @umangachapagain)
Check before copying binaries in osd pods (, @kshlm)
EdgeFS
Proper use of metadataOnly property (, @dyusupov)
Prevent multiple targets deployment on the same node (, @sabbot)"
"ceph: expose c-v log per pvc

We now use a defined directory for each prepare job so that logs won't
be entangled with each other.
Also, if an error occurs, we print the log file too so we don't have to
ssh onto a host to find the c-v debug log.

Closes: https://github.com/rook/rook/issues/3888
Signed-off-by: Sébastien Han <seb@redhat.com>
(cherry picked from commit 35ee1af42a0169a71a766f6b7235bd7351e1071e)
ceph: client CRD test fixes

wait for client to be updated before verifying caps

Signed-off-by: Mateusz Los <los.mateusz@gmail.com>
(cherry picked from commit cd713b11cb8d95d288796614a596f6428ddcf57e)
ceph: fix resources for prepare job

Now, we purely rely on what the user puts in the CR and apply it.
Prior to this commit we were putting 0 if not declared, this was not the
intentional.

Closes: https://github.com/rook/rook/issues/4713
Signed-off-by: Sébastien Han <seb@redhat.com>
(cherry picked from commit ef8ef454c3975b1ec261605aa5dd0b8b9e1f8ec1)
ceph: ensure crush-location osd command args is always the same

Currently each time the ceph operator restart, osds also restart.
This is due to a change in the crush-location args with location not ordered
At each restart the location order can change and lead to that kind of change in the osd deployment
104c105
<                             ""--crush-location=root=default host=hostname datacenter=PAR pod=2 rack=2"",
---
>                             ""--crush-location=root=default host=hostname pod=2 rack=2 datacenter=PAR"",
Sorting the topology to ensure stability of this command arg

Signed-off-by: n.fraison <n.fraison@criteo.com>

(cherry picked from commit 7bac0277962d04b86bd0f94b01ccd639cbb39c89)
ceph: fix external cluster config override cm creation

If an image is specified in the external cluster CR, the
'rook-ceph-config' config map will be created and then child CRs like
rgw/mds/nfs can be created.

Also, calling config.GetStore() was a mistake since it's calling by the
health check if new mons are being added to clusterInfo.

Closes: https://github.com/rook/rook/issues/4686
Signed-off-by: Sébastien Han <seb@redhat.com>
(cherry picked from commit f59bdd626a33c5317ae441bb13cadae4b256af22)
ceph: fixed Ceph external cluster, repeatedly saving mon endpoints to config

Before, every few seconds the config files for the cluster where written to disk.
Even when there were no changes in the clusters monitors.

Fixes: https://github.com/rook/rook/issues/4717
Signed-off-by: Elias Wimmer <elias.wimmer@tuwien.ac.at>
(cherry picked from commit 70f312e35de8f43aff64b1daea89447f5d477d7f)
ceph: add ceph version to cluster status

In order for deployments managed outside the immediate scope of
the ClusterController to accurately detect the Ceph version of
their images, the ClusterController must store the detected
version. This change records the Ceph version as part of the
cluster status and modifies the crashcollector deployment to
consume this field to record its own Ceph version. This replaces
an earlier solution to this problem in which the Ceph version
for a given image to version mapping was stored in a global
in-memory map by the operator.

Resolves: rook
Signed-off-by: Elise Gafford <egafford@redhat.com>
(cherry picked from commit b19f8d498988285da70137eb5bee9e7d2bbefe41)
Ceph: MDS pod placement adheres to fault domain topology

With this modification is guaranteed that at least 1 MDS pod is going to be
placed in each of the available zones in the k8s cluster.
This would be improved in the future using:
<Pod Topology Spread Constraints> (still in alpha state since kubernetes V.1.16)

This modification obtain the number of zones in the k8s cluster and appends an
<antiaffinity> term using the topologyKey
<topology.kubernetes.io/zone> in the same number of MDS pods.
In the case that will be more MDS pods than zones, the <antiaffinity> term won't
be added in these extra pods.

Important Note:
The antiaffiniy term only will work with nodes labeled using the NEW label:
 <topology.kubernetes.io/zone> present in k8s V.1.17 clusters.
For previous versions of k8s clusters the label used is:
 <failure-domain.beta.kubernetes.io/zone>
And therefore, in this kind of clusters this modification won't work.

Resolves

[test ceph]

Signed-off-by: Juan Miguel Olmo Martínez <jolmomar@redhat.com>
(cherry picked from commit f62b2fa30557e0a3713821169fdd3bbbb96117f5)
CSI: update ceph-csi image tag to v2.0.0

ceph-csi v2.0.0 is released. This commit updates
the image tag to latest released ceph-csi version

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
(cherry picked from commit 0abb3b9e1bee6e4025e7c9de68034190901cb4aa)
CSI: add missing image tag ENV to openshift operator

CSI image tag ENV required to select the image tag
is missing in operator-openshift.yaml, This commit
adds the missing image tag ENV to operator-openshift.yaml

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
(cherry picked from commit a5605e80637532e8491863908ba3a4eec8c8996a)
CSI: Remove containerized flag from rbd daemonset template

In ceph-csi release v2.0.0, deprecated `containerized` flag
is removed.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
(cherry picked from commit 29f8749ded003129f1b1315ca066bf06a4898a79)
CSI: update csi-attacher from v1.2.0 to v2.1.0

external-attacher v2.x is not compatible with v1.x
This PR makes the require changes in csi templates
and upgrade documentation for easily upgrade

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
(cherry picked from commit 06d2dd2994d563e4322266c3510419f5d6417f62)
CSI: upgrade node-driver-registrar from v1.1.0 to v1.2.0

latest released upstream version is v1.2.0,this
PR updates it to latest releasd version.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
(cherry picked from commit 8c1a90ca0116265ba6aa5bfe6a698ff2a5743d9d)
CSI: Add support for CSI volume expansion

This PR makes the necessary changes required
for volume expansion support for both cephfs and
rbd.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
(cherry picked from commit cf161848997a897dad8e6ea93fcb464bccba67d8)
CSI: Add support for rbd erasure coded pool

In ceph-csi v2.0.0 added a support for specifing
the erasure coded pool in storageclass which will be
used to store data.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
(cherry picked from commit 5a685fba77b218e4f3aebe4b4396a3158f5ca2d5)
CSI: Add log if the CSI volume expansion  is not supported

Added warning log in opeartor, if csi volume
expansion is not supported.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
(cherry picked from commit 1cab0985d5ec8bb42f6d932e0118037bff146cdd)
integration: update CSI clusterRoles

Updated rbd-external-provisioner-runner and
cephfs-external-provisioner-runner CSI
clusterroles inintegration tests.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
(cherry picked from commit 57c9002b92c883dd7cffb6a2ac3ac26b70ee956b)
CSI: Add support for external-attacher v1.2.x

To avoid upgrade issue if user is still using v1.2.0
we have added a version check and set the required
arguments to support v1.2.0 external attacher.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
CSI: Disable resizer if cephcsi is v1.2.2

as ceph-csi doesnot implement the RPC calls
required for cephfs and rbd resizer,disable the
deployment of resizer container if the cephcsi
image tag is v1.2.2

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
ceph: Add nil check for ceph version

as CephVersion is pointer added a nil check
for CephVersion in status to avoid panic.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
(cherry picked from commit 34e1585f54edc8fdf936cfc4a294eb0e10ed376f)
Ceph: Assure mon canary pods deletion

If for any cause the operator processing a mon failover is restarted, the
mon canary pods created in order to get the right placement for this
kind of pods can remain in <pending> state forever.

The following labels have been added to the mon canary deployments:
""mon_type"" = ""canary""
""canary_pvc_name"" = <PVC name used for the canary pod>

A separate <removeCanaryDeployments> has been implemented for
removing the dependence of the variable <canaryCleanup>.
This function uses the <canary> labels to obtain the <real>
and <existing> list of mon canary deployments in any moment.

This change, by itself, will avoid most of the problems with
pending canary pods, but as second safe guard measure a call to this
function has been added in the health check, to <force> a canary pod
deletion if the cluster of monitors is healthy and complete (this implies
that no canary pods should be present)

Resolves

[test ceph]

Signed-off-by: Juan Miguel Olmo Martínez <jolmomar@redhat.com>
(cherry picked from commit b4ae856c7026a270e74bc599305f41c106327ecf)
ceph: skip the upgrade checks in tests

The integration tests only have a single node so the upgrade
checks do not provide any real safety for the cluster during
the upgrade. We will be able to improve the reliability and speed
of the tests by disabling these checks.

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>
(cherry picked from commit 153f28344e83d923253d586f10490f1a5caf01fc)
ci: add external cluster functional test

Add coverage in the CI for the external cluster feature.

Closes: https://github.com/rook/rook/issues/3691
Signed-off-by: Sébastien Han <seb@redhat.com>
(cherry picked from commit 84fc10cdc1b2a46ca17c16a0024297281a2c3a9d)
CSI: rename upgrade-from-v1.2-apply.yaml to  enable-csi-2.0-rbac.yaml

renamed the file to be more clean that this is
only fopr csi v2.0 .

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
ceph: add missing codegen for CephVersion

CephVersion was added recently in types.go but the codegen wasn't
applied.

Signed-off-by: Sébastien Han <seb@redhat.com>
(cherry picked from commit 458ee5b6919c0e5d3d5c9bc03d5d41ed4150ec46)
ceph: fix TuneSlowDeviceClass spec

TuneSlowDeviceClass wasn't part of the StorageClassDeviceSet types but
only in VolumeSource which is not exposed in the CR spec so setting the
option would never work.
The only issue is that this apply to all volumeClaimTemplates
where each can point to a particular storage class...

Signed-off-by: Sébastien Han <seb@redhat.com>
(cherry picked from commit a60a18c477deb5f3063138771855f68dd935190a)
ceph: add partition support

We now support partitions via 2 ways:

* if `useAllDevice: true`: partitions will be taken into account and
presented as OSD candidate
* if specified in the cluster CR: it'll picked up as well

Signed-off-by: Sébastien Han <seb@redhat.com>
(cherry picked from commit dd659de46f099290c8ed194b1e714af1bdf5de47)
ceph: fix garbage collection for csi driver

The CSI driver was disappearing in some clusters after certain events such
as restarting the operator or master nodes being restarted. This is due to
an incorrect owner reference on the csi driver back to the configmap. The
owner reference must specify core/v1 instead of v1 for the APIVersion
of the configmap. This issue is only hit when the k8s garbage collector
rebuilds its cache, which would happen at indeterminate times from
Rook's perspective.

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>
(cherry picked from commit 48499115f86763485b554af3977c86210c037e99)
ceph: ability to enable the balancer module

The balancer module is a special module that needs particular actions to
be enabled.

Closes: https://bugzilla.redhat.com/show_bug.cgi?id=1790500
Signed-off-by: Sébastien Han <seb@redhat.com>
(cherry picked from commit 488b27a5b7bb4639841aea76eb491d08c7baf098)
ceph: skip partitions depending on the ceph version

If we detect a partition we should not use it if the ceph version is not
at least 14.2.8 since it has the necessary changes to support partitions
with ceph-volume.
Inspiration of https://github.com/rook/rook/pull/4783.

Signed-off-by: Sébastien Han <seb@redhat.com>
ceph: allow for empty all annotations

When the annotations are generated for a ceph daemon,
the all annotations are merged with the component annotations.
If there are no all annotations, the component annotation
calculation was crashing. Now we check for the case where
the all annotations are not defined.

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>
(cherry picked from commit 16b2058432a864f329cde6d0c6862da7bde8f7b8)
build: update manifest version to v1.2.3

With the v1.2.3 release we update the manifests to the new version.

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>","Improvements
Rook v1.2.3 is a patch release limited in scope and focusing on bug fixes.
Ceph
Fix garbage collection for the disappearing CSI driver (, @travisn)
Allow enabling of the Ceph-CSI v2.0.0 driver, with the default still as CSI v1.2.2 (, @Madhu-1)
Allow for empty ""all"" annotations (, @travisn)
Ability to enable the balancer module (, @leseb)
Fix TuneSlowDeviceClass spec (, @leseb)
Skip the upgrade checks in integration tests (, @travisn)
Add an external cluster functional test (, @leseb)
Remove unnecessary mon canary pods after an aborted mon failover (, @jmolmo)
Ensure MDS pod placement adheres to zone topology if specified (, @jmolmo)
Add nil check for ceph version in crash controller (, @Madhu-1)
Add ceph version to cluster status (, @egafford)
Ceph external cluster repeatedly saving mon endpoints to config (, @eliaswimmer)
Fix resource limits for the OSD prepare job (, @leseb)
Ensure OSD location is consistent to avoid unnecessary osds restarts (, @ashangit)
Fix external cluster config override configmap creation (, @leseb)
Improved ceph-volume logging in the OSD prepare job (, @leseb)
Integration test fix for the client CR (, @mateuszlos)"
"ceph: helm chart fix for rook-ceph

Go's template language doesn't treat infix `and` as a short-circuit,
which led to fatal errors after an update in Go 1.14 surfaced that as
a fatal error.  This commit removes the infix `and` and replaces it with
a default dict to handle the case of a missing Heml value.

Closes: https://github.com/rook/rook/issues/5378
Signed-off-by: Judson <nyarly@gmail.com>
(cherry picked from commit f89ecb615695ffee602b76156b7b94104ee78dff)
tests: fix aws_1.11.x test failure

kubelet in aws_1.11.x test requires kubernetes-cni 0.7.5.

Signed-off-by: Satoru Takeuchi <satoru.takeuchi@gmail.com>
ceph: update to ceph/ceph:v14.2.10

Update to the latest ceph release build for nautilus as the base
image for the operator and the default in cluster.yaml

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>
ceph: remove legacy target_size_ratio example

The target_size_ratio moved under the parameters element of
the pool settings. While the target size ratio is still supported
under the previous location for backward compatibility, the
example is preferred under parameters.

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>
(cherry picked from commit 3af205d958f53c3f54ea414a6ac87f5cdb9bed8c)
ceph: capture logging from the osd daemon

The OSD daemon has been missing critical flags for logging to stderr
where k8s can capture the logs. Without the --log-to-stderr=true,
all the OSD logging was essentially lost until now.

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>
(cherry picked from commit 8f9df75f7b7067dd1aea5fc64d7ced65edf43a4d)
ceph: resync crds when update from 1.2

Some CRDs definitions were missing, rending some CRD unusable. Now if
someone upgrades from 1.2, all CRDs will work as expected.

Closes: https://github.com/rook/rook/issues/5742
Signed-off-by: Sébastien Han <seb@redhat.com>
docs: remove references to xfs for ceph volumes

When mounting a ceph volume, xfs may cause issues with potential
deadlocks if the volume is on the same node as the OSDs. To avoid
this issue the default recommendation is ext4.

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>
(cherry picked from commit ba590396e858c5fbcea80f3d82707262a1bf6557)
ceph: fix manifest ceph version support comment

Adjust the comment for `cephVersion:allowUnsupported` in the
`cluster.yaml` manifest to correctly document that Nautilus and
Octopus are supported (not Mimic and Nautilus).

Signed-off-by: Blaine Gardner <blaine.gardner@suse.com>
(cherry picked from commit b8aea86cedf1a7c3a299950f2792f10c153e8e46)
ceph: remove an outdated document of mon placement

Although the document describes we can't set Pod{,Anti}Affinity
to mon's placement, the current implementation permits to do so.

Signed-off-by: Satoru Takeuchi <satoru.takeuchi@gmail.com>
(cherry picked from commit 63d077ffdea4d3d4cf2d42e1791889e8d35fb225)
ceph: fix mon endpoints split when using external ceph hosts

When hostname has hypen and/or numbers, the mon_endpoints is incorrectly
split and can point to invalid monitor names inside toolbox, Add fix to
split the hostname/ip that can include hypen, underscore or numbers.

Signed-off-by: Vasu Kulkarni <vasu@redhat.com>

Fixes

Signed-off-by: Vasu Kulkarni <vasu@redhat.com>
(cherry picked from commit 33bd58e07247c105a14accf9b922b0ea67dbbf4c)
ceph: ignore PodAntiAffinity for detect-version placement

When a PodAntiAffinity is set to mon, detect-version may not be scheduled because detect-version has the same PodAntiAffinity with mon.
This commit fixes this issue.

Closes

Signed-off-by: Hiroshi Muraoka <h.muraoka714@gmail.com>
(cherry picked from commit e2b1a2230df871b4feaf3ac22dc7775e9804539a)
build: set manifest versions to v1.3.8

Set manifest versions to v1.3.8 for the release

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>","Improvements
Rook v1.3.8 is a patch release limited in scope and focusing on small feature additions and bug fixes.
Ceph
Helm chart templating update (, @nyarly)
Update to the latest Ceph Nautilus release v14.2.10 (, @travisn)
Capture logging from the OSD daemons (, @travisn)
Ignore pod anti-affinity for the detect-version job placement (, @tapih)
Resync crds when updated from 1.2 (, @leseb)
Toolbox connection allowed for independent mode (, @vasukulkarni)"
"docs: cephfs mirroring updates around peer tokens

This commit updates the CephFS mirroring documentation
around Peer tokens to get the token created correctly.

Signed-off-by: Gaurav Sitlani <gauravsitlani@riseup.net>
(cherry picked from commit 27f2098ad911a1ab6ee8701a7c6170a83fe32f45)
docs: improve descriptions in localrules.yaml

Parallel upstream changes via https://github.com/ceph/ceph/pull/47284

Signed-off-by: Anthony D'Atri <anthonyeleven@users.noreply.github.com>
(cherry picked from commit dc53497d374ef2efd36a583b0ebe6eba22525e6c)
Revert ""ci: use ceph v17.2.1 instead of latest v17""

This reverts commit 3279cb91870e59eccabb9b5eff903d71beb31594.

Signed-off-by: subhamkrai <srai@redhat.com>
(cherry picked from commit c4742278d1ad09313192a533c622ccd0ddee7af7)
csi: disable liveness sidecar by default

A Liveness sidecar container that is deployed
with the CSI pods will be helpful to check
csi driver is properly responding or not.
and there is no liveness or readiness
kubernetes probe added for this one.
Providing an option to enable this
sidecar deployment and disabling it by default.

fixes

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
(cherry picked from commit 187bea6701b5bccebbcdb8a5c0dbefde6962fb9e)
core: add support to rotate log based on logfile size

this commits add new field `MaxLogSize` inside `LogCollectorSpec` of
cephCluster cr which will take max size of log after which we want to
rotate the log.

Signed-off-by: subhamkrai <srai@redhat.com>
(cherry picked from commit 62f73dcd989dde83eca48f58c47a7d27d98b6bc1)
monitoring: fix localrule indent

Indentation level for the rule array for pools was inconsistent, leading to a broken YAML array.
This commit corrects indentation level for pool rules to align with the rest of the array.

Closes: https://github.com/rook/rook/issues/10653
Signed-off-by: James Harmison <jharmison@gmail.com>
(cherry picked from commit 2ae305749ab73d095bf95600f84c22edf3c08f99)
docs: cephfs mirroring documentation added

This is a new documentation added for cephfs mirroring

Signed-off-by: gauravsitlani <gauravsitlani@riseup.net>
(cherry picked from commit 46c475751f0d46970d8791372e472a16d97559ae)
csi: introduce new log level for sidecars

This commit introduces new log level called csidecarLogLevel
for the sidecars which are not maintained by the csi-driver.
This will allow to have different configuration options
for the sidecars like snapshotter, resizer, attacher and
provisioner containers which will help to avoid the
spamming of logs to an extent.

Signed-off-by: yati1998 <ypadia@redhat.com>
(cherry picked from commit ecc67faa5c1942cb80c2726b25dcc9e241cb48bd)
test: increase timeout waiting for file deletion status

The file deletion status has been intermittently failing for several
months. Investigation shows that the timeout is just missing by
a few seconds. Now we increase the timeout from 15 to 45 seconds
to stabilize the test.

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>
(cherry picked from commit 13d527b5904fc049881ee53e0ea7b0702f31a728)
core: operator skips reconcile of mons and osds in debug

During certain maintenance tasks the admin will own running
operations on the ceph mons and osds, and the operator should
not interfere with those operations. If the operator sees
any mon in debug mode, every reconcile and mon health check
will be skipped. Thus, mons will not be updated while any
one of them is in maintenance. During OSD reconcile, individual
OSD deployment updates will only be skipped for OSDs that are
actively being debugged.

The debug mode for osd and mon deployments is signaled by
creating the ceph.rook.io/do-not-reconcile label.

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>
(cherry picked from commit 7c56b9328a69a20a6823422e5918cfe31eeb4943)
external: fix cluster id naming in import-external-cluster script

Cluster_ID variable that we export from python script was different
from what we going to use in import script so changed it

Signed-off-by: parth-gr <paarora@redhat.com>
(cherry picked from commit 62fec90c192238524c15c2f1759a18dad8b94d24)
docs: rename Rook-Ceph to Rook Ceph

Signed-off-by: Alexander Trost <galexrt@googlemail.com>
(cherry picked from commit fe2000e6d854832db1c8e6285cc6d4932e5f5294)
docs: add ci configuration page

This page contains initial information on Rook's CI setup, such as
environment variables.

Signed-off-by: Alexander Trost <galexrt@googlemail.com>
(cherry picked from commit 9872b3f7d6acfb62b1eedee6c3d44053a1b1a7d0)
core: skip ceph upgrade check in external cluster

Closes: rook
Signed-off-by: Joseph Lee <joseph@jc-lab.net>
(cherry picked from commit 9639b60fc47f28c713da629ec6623d6c89e7db37)
build: update the release version to v1.9.9

For the patch release update the examples and docs to
v1.9.9

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>","Improvements
Rook v1.9.9 is a patch release limited in scope and focusing on feature additions and bug fixes to the Ceph operator.
core: Skip ceph upgrade check in external cluster (, @jclab-joseph)
core: Operator to skip reconcile of mons and osds in debug mode (, @travisn)
docs: CephF mirroring documentation added (, @gauravsitlani)
csi: Introduce new log level for sidecars (, @yati1998)
test: Increase timeout waiting for file deletion status (, @travisn)
monitoring: Correct indentation level for pool alert (, @solacelost)
core: Add support to rotate log based on logfile size (, @subhamkrai)
csi: Disable liveness sidecar by default (, @Madhu-1)
docs: CephFS mirroring updates around Peer Tokens (, @gauravsitlani)
Improve descriptions in localrules.yaml (, @anthonyeleven)"
"ceph: fix ineffective break statement

The `break` statement is not necessary, especially since we don't want
to break out of the outerloop.

Signed-off-by: Sébastien Han <seb@redhat.com>
(cherry picked from commit 23298ba62d33d4fff23fdb71246e019a94d61be7)
ceph: update cluster-on-pvc example for proper OSD scheduling

The topology spread constraint example allowed scheduling even
if the TSC could not be satisfied when scheduling the osd prepare
jobs. This could lead to unevenly spread OSDs especially when
the cluster was not using the zone labels. Now the topology will be
required for scheduling, to ensure proper spread of the OSDs.

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>
(cherry picked from commit 9f6615033dc6fbb55d7a6f33123243c32f9d0e1f)
ceph: fix overwriting shared livenessProbe

When the Operator set the livenessProbe of the POD, it overwrote the contents of the shared
desiredProbe. Therefore, the wrongly configured livenessProbe was applied to other PODs,
resulting in a CrashLoop. In this PR, I created another instance to avoid overwriting the
desiredProbe.

Closes: https://github.com/rook/rook/issues/8196
Signed-off-by: Yuji Ito <llamerada.jp@gmail.com>
(cherry picked from commit d7c46d70d3ef05fb58285be0680f838a8e871d36)
ceph: ability pass rgw certificate to external mode

We now have a new option called --rgw-tls-cert-path to specify a
certificate path for the rgw external mode.

Example output:

```
[root@rook-ceph-tools-78cdfd976c-25942 /]# python3 /etc/ceph/create-external-cluster-resources.py --rbd-data-pool-name device_health_metrics --monitoring-endpoint 172.17.0.11 --rgw-tls-cert-path my-cert --rgw-endpoint 10.108.182.47:80
[{""name"": ""rook-ceph-mon-endpoints"", ""kind"": ""ConfigMap"", ""data"": {""data"": ""a=10.100.223.211:6789"", ""maxMonId"": ""0"", ""mapping"": ""{}""}}, {""name"": ""rook-ceph-mon"", ""kind"": ""Secret"", ""data"": {""admin-secret"": ""admin-secret"", ""fsid"": ""5cd5684c-8b8b-4d59-a98a-525f63ae69a3"", ""mon-secret"": ""mon-secret""}}, {""name"": ""rook-ceph-operator-creds"", ""kind"": ""Secret"", ""data"": {""userID"": ""client.healthchecker"", ""userKey"": ""AQBnx9BgnH9kDxAAb6T0nmMpetfmwNw5gKgA2w==""}}, {""name"": ""rook-csi-rbd-node"", ""kind"": ""Secret"", ""data"": {""userID"": ""csi-rbd-node"", ""userKey"": ""AQAe0bhgVvahJxAAGJLuP/Tajh2fz6ExqxYT/A==""}}, {""name"": ""ceph-rbd"", ""kind"": ""StorageClass"", ""data"": {""pool"": ""device_health_metrics""}}, {""name"": ""monitoring-endpoint"", ""kind"": ""CephCluster"", ""data"": {""MonitoringEndpoint"": ""172.17.0.11"", ""MonitoringPort"": ""9283""}}, {""name"": ""rook-csi-rbd-provisioner"", ""kind"": ""Secret"", ""data"": {""userID"": ""csi-rbd-provisioner"", ""userKey"": ""AQAe0bhgkpHWGhAAJNPrBBD5OfbQvGRAYUrbCg==""}}, {""name"": ""ceph-rgw-tls-cert"", ""kind"": ""Secret"", ""data"": {""cert"": ""-----BEGIN CERTIFICATE-----\nMIIFODCCAyCgAwIBAgIRAJW+FqD3LkbxezmCcvqLzZYwDQYJKoZIhvcNAQEFBQAw\nNzEUMBIGA1UECgwLVGVsaWFTb25lcmExHzAdBgNVBAMMFlRlbGlhU29uZXJhIFJv\nb3QgQ0EgdjEwHhcNMDcxMDE4MTIwMDUwWhcNMzIxMDE4MTIwMDUwWjA3MRQwEgYD\nVQQKDAtUZWxpYVNvbmVyYTEfMB0GA1UEAwwWVGVsaWFTb25lcmEgUm9vdCBDQSB2\nMTCCAiIwDQYJKoZIhvcNAQEBBQADggIPADCCAgoCggIBAMK+6yfwIaPzaSZVfp3F\nVRaRXP3vIb9TgHot0pGMYzHw7CTww6XScnwQbfQ3t+XmfHnqjLWCi65ItqwA3GV1\n7CpNX8GH9SBlK4GoRz6JI5UwFpB/6FcHSOcZrr9FZ7E3GwYq/t75rH2D+1665I+X\nZ75Ljo1kB1c4VWk0Nj0TSO9P4tNmHqTPGrdeNjPUtAa9GAH9d4RQAEX1jF3oI7x+\n/jXh7VB7qTCNGdMJjmhnXb88lxhTuylixcpecsHHltTbLaC0H2kD7OriUPEMPPCs\n81Mt8Bz17Ww5OXOAFshSsCPN4D7c3TxHoLs1iuKYaIu+5b9y7tL6pe0S7fyYGKkm\ndtwoSxAgHNN/Fnct7W+A90m7UwW7XWjH1Mh1Fj+JWov3F0fUTPHSiXk+TT2YqGHe\nOh7S+F4D4MHJHIzTjU3TlTazN19jY5szFPAtJmtTfImMMsJu7D0hADnJoWjiUIMu\nsDor8zagrC/kb2HCUQk5PotTubtn2txTuXZZNp1D5SDgPTJghSJRt8czu90VL6R4\npgd7gUY2BIbdeTXHlSw7sKMXNeVzH7RcWe/a6hBle3rQf5+ztCo3O3CLm1u5K7fs\nslESl1MpWtTwEhDcTwK7EpIvYtQ/aUN8Ddb8WHUBiJ1YFkveupD/RwGJBmr2X7KQ\narMCpgKIv7NHfirZ1fpoeDVNAgMBAAGjPzA9MA8GA1UdEwEB/wQFMAMBAf8wCwYD\nVR0PBAQDAgEGMB0GA1UdDgQWBBTwj1k4ALP1j5qWDNXr+nuqF+gTEjANBgkqhkiG\n9w0BAQUFAAOCAgEAvuRcYk4k9AwI//DTDGjkk0kiP0Qnb7tt3oNmzqjMDfz1mgbl\ndxSR651Be5kqhOX//CHBXfDkH1e3damhXwIm/9fH907eT/j3HEbAek9ALCI18Bmx\n0GtnLLCo4MBANzX2hFxc469CeP6nyQ1Q6g2EdvZR74NTxnr/DlZJLo961gzmJ1Tj\nTQpgcmLNkQfWpb/ImWvtxBnmq0wROMVvMeJuScg/doAmAyYp4Db29iBT4xdwNBed\nY2gea+zDTYa4EzAvXUYNR0PVG6pZDrlcjQZIrXSHX8f8MVRBE+LHIQ6e4B4N4cB7\nQ4WQxYpYxmUKeFfyxiMPAdkgS94P+5KFdSpcc41teyWRyu5FrgZLAMzTsVlQ2jqI\nOylDRl6XK1TOU2+NSueW+r9xDkKLfP0ooNBIytrEgUy7onOTJsjrDNYmiLbAJM+7\nvVvrdX3pCI6GMyx5dwlppYn8s3CQh3aP0yK7Qs69cwsgJirQmz1wHiRszYd2qReW\nt88NkvuOGKmYSdGe/mBEciG5Ge3C9THxOUiIkCR1VBatzvT4aRRkOfujuLpwQMcn\nHL/EVlP6Y2XQ8xwOFvVrhlhNGNTkDY6lnVuR3HYkUD/GKvvZt5y11ubQ2egZixVx\nSK236thZiNSQvxaz2emsWWFUyBy6ysHK4bkgTI86k4mloMy/0/Z1pHWWbVY=\n-----END CERTIFICATE-----""}}]
```

Signed-off-by: Sébastien Han <seb@redhat.com>
(cherry picked from commit d6451527437e8e999c3ea6d38d17f7969e32b989)
ceph: do not require rgw 'instances' spec

When the cluster is external we don't have any instances of rgw running
so let's not have this as a required field in the spec.

Signed-off-by: Sébastien Han <seb@redhat.com>
(cherry picked from commit e25e0e81039d00752b17c98d9a1e86d5f3956436)
ceph: ignore atari partitions when scanning disks

Ceph bluestore raw disks can sometimes appear as though they have Atari
(AHDI) partitions on them. If a disk has Atari partitions, we just
ignore them as though they don't exist. This should be a safe assumption
since the hardware was last manufactured in 1992 and likely can't run
Kubernetes.

If we don't ignore the Atari partitions, Rook can create a new OSD on a
disk that is already running an OSD, corrupting the first and possibly
also the latest OSD. This can happen an arbitrary number of times per
disk.

More info: https://github.com/rook/rook/issues/7940

Signed-off-by: Blaine Gardner <blaine.gardner@redhat.com>
(cherry picked from commit 7f516b9e3d1bc6a343617abe56ab304eda676d1a)
ceph: give resource request preference for mds_cache_memory_limit

earlier, for mds, when resource limit is not defined it has
default limit of `""mds_cache_memory_limit"": ""4294967296""`
even if resouce.request is defined.

Now, resource request will be given preference when both
request and limit is defined and if only limit is defined
it will be applied or otherwise.

Closes: https://github.com/rook/rook/issues/8143
Signed-off-by: subhamkrai <srai@redhat.com>
(cherry picked from commit d41878cb9ec4f6799a86395fc6b5eb1f6dae30d8)
ceph: silence harmless errors

Let's not look at misleading errors if the operator is still
initializing.

Signed-off-by: Sébastien Han <seb@redhat.com>
(cherry picked from commit 8c589a37851f94e3cc4dd7cd10bf0476f315d6ef)
cassandra: remove dependency on k8s.io/kubernetes

PublishNotReadyAddresses replaced the deprecated TolerateUnreadyEndpointsAnnotation in k8s v1.11

Signed-off-by: Andy Bursavich <abursavich@gmail.com>
ceph: extract flexvolume dependency on k8s.io/kubernetes

Signed-off-by: Andy Bursavich <abursavich@gmail.com>
test: extract utils dependency on k8s.io/kubernetes

Signed-off-by: Andy Bursavich <abursavich@gmail.com>
build: update golangci-lint version and nolint comment format

Signed-off-by: Andy Bursavich <abursavich@gmail.com>
build: remove k8s.io/kubernetes, cleanup directives, and tidy

Signed-off-by: Andy Bursavich <abursavich@gmail.com>
ceph: update CSIDriver object from betav1 to v1

Update the CSIDriver object to v1 from betav1 as it will be
deprecated in v1.19+ and become unavailable in v1.22+

Signed-off-by: Yug <yuggupta27@gmail.com>
(cherry picked from commit d513dc4bc597ca8fc0e9b332e6c66e38bdd6a587)
ceph: debug log the k8s version instead of info

The info log is rather verbose with all the filtering of the K8s version
like the following:
returning version v1.19.0 instead of v1.19.0+43983cd

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>
(cherry picked from commit aaa939f6868ab8995d0f683d05955f759d470b16)
ceph: operator pod killed due to resource limit

when operator pod resources are set(which are
default in case of helm), operator pod are
killed due to using concurrency while creating
object store.

this commit checks if operator resources are set
or not. if set then we'll *not* create object store
in concurrency or if not set then we'll create in
concurrency.

Closes: https://github.com/rook/rook/issues/8149
Co-authored-by: Sébastien Han <seb@redhat.com>
Signed-off-by: subhamkrai <srai@redhat.com>
(cherry picked from commit 4241ce7e6670fd84afe04d061125556b017dcee4)
ceph: retry reconcile immediately after cancellation

If the reconcile is cancelled due to a CR update, we want to retry the next
reconcile immediately rather than wait for the exponential backoff timeout
if the reconcile was already failing. The wait can easily be minutes
if the reconcile was in this state, which makes it appear the operator
is ignoring the request to start a new reconcile.

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>
(cherry picked from commit c39c1c7ddfa96b0296fedf3f6b50690f62b23ea6)
build: update release version to v1.6.7

With the patch release we update the docs and manifests to v1.6.7

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>","Improvements
Rook v1.6.7 is a patch release limited in scope and focusing on small feature additions and bug fixes.
Ceph
Ignore atari partitions for OSDs when scanning disks. This is a partial fix for multiple OSDs being created unexpectedly per disk, causing OSD corruption. See details to know if your OSDs are affected (, @BlaineEXE)
Update CSIDriver object from betav1 to v1 (, @Yuggupta27)
Retry cluster reconcile immediately after cancellation (, @travisn)
Avoid operator resource over-usage when configuring RGW pools and memory limits are applied (, @subhamkrai)
Remove k8s.io/kubernetes as a code dependency (, @abursavich)
Silence harmless errors if the operator is still initializing (, @leseb)
If MDS resource limits are not set, assign mds_cache_memory_limit = resource requests * 0.8 (, @subhamkrai)
Do not require rgw instances spec for external clusters (, @leseb)
Add tls support to external rgw endpoint (, @leseb)
Stop overwriting shared livenessProbe when overridden (, @llamerada-jp)
Update cluster-on-pvc example for proper OSD scheduling (, @travisn)"
"ceph: target_size_ratio must be a string instead of float

The pool parameters must be strings. In the pool examples now we add
quotes around the sample target_size_ratio to avoid deserialization
errors.

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>
(cherry picked from commit 5be965c1c3179de2c17eb709afa107a3ecf1b359)
docs: fix placement of param in ceph pool crd

`requireSafeReplicaSize` is now a sub-param of `replicated` and not of
Ceph's `parameters`.

Signed-off-by: Blaine Gardner <blaine.gardner@suse.com>
(cherry picked from commit 0a08480c3a2314b33a5af9fb8a21866876597a0e)
ceph: change command to add 3300 port for monmap

In the latest version of rook-ceph, disaster recovery does not work properly with the following command. Therefore, the command was updated to the latest command.

Closes: https://github.com/rook/rook/issues/5662
Closes: https://github.com/rook/rook/issues/5649

Signed-off-by: caffeinism <make.dirty.code@gmail.com>
(cherry picked from commit 7ac0ce6873ce5f2906ae2915c384b9757ab81590)
ceph: skip first mon health check at startup

At startup there is a race condition between the goroutine checking
for mon health and the first reconcile of the mons. There is a lock
that ensures only one of them will check the mon health at a time.
The issue is that if the wrong one gets there first, it will not
have the desired mon count initialized from the cluster CR as expected
and the healther checker will use a desired mon count of 0.
The desired count of 0 leads the health checker to remove
a mon since there are extra mons. Only one mon is allowed
to be removed at a time, and adjusting to fewer than two mons is
disallowed once there are at least two mons.

After the health checker is completed, the main reconcile of the mons
will proceed with the correct desired mon count of 3 and attempt
to restore to the real desired quorum size.

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>
ceph: remove unwanted metadatastore and mountcache flag

metadatastore and mountcache are required for cephcsi v1.0.0

as rook doesnot used ceph-csi v1.+ version
we can remove this flag. Removing these flags doesnot
affect the functionality of anything.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
(cherry picked from commit 73e1ee41c3197065e4f8ed015f352addd64c192f)
ceph: report error on timeout

If the healthcheck goroutine cannot check for the ceph status/times out
(if the mons are not in quorum) this should still be reflected in the
CRD status field.

Example:

```
status:
  ceph:
    details:
      error:
        message: 'failed to get status. . timed out: exit status 1'
        severity: Urgent
    health: HEALTH_ERR
    lastChanged: ""2020-07-20T14:11:05Z""
    lastChecked: ""2020-07-20T14:11:05Z""
    previousHealth: HEALTH_WARN
```

Signed-off-by: Sébastien Han <seb@redhat.com>
(cherry picked from commit 954074b707dd88fd920a038a451c3a3565b488f1)
ceph: let the healthcheck set the status phase

Instead of setting the Phase of the CR once the reconcile is done, let's
actually set in from the healthcheck so it is more accurate.

Closes: https://github.com/rook/rook/issues/5249
Signed-off-by: Sébastien Han <seb@redhat.com>
ceph: make rgw option on external script

Some clusters do not have rgws deployed so let's make it optional.

Signed-off-by: Sébastien Han <seb@redhat.com>
(cherry picked from commit faad0a45acaed4679d96fcd30e39de21a7624f27)
ceph: add provisioner toleration for csi version check job

Added a provisioner toleration to the csi version
check job, so that we can schedule the csi version
check on the node where the nodes are tainted.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
(cherry picked from commit d6b2ad142d4dc553cbd1550463bb8ed63f76a953)
ceph: do not warn about no redundancy in test cluster

In test environments the default pool size is set to 1, so there is no
redundancy. This causes recent Ceph versions to complain with
HEALTH_WARN as POOL_NO_REDUNDANCY get set.

By disabling the mon_warn_on_pool_no_redundancy option in ceph.conf, the
warning is not reported and the cluster is marked HEALTHY.

Signed-off-by: Niels de Vos <ndevos@redhat.com>
(cherry picked from commit bb2b4096d1b8cc9b230cc64204e30fe688244d96)
ceph: allowing ceph filesystem argument to be optional

If we are unable to get or infer a default value for ceph filesystem
script won't be throwing an error.

Signed-off-by: Arun Kumar Mohan <amohan@redhat.com>
(cherry picked from commit 18b32023c5eef98ab738c2828ce3d8d64f55af60)
ceph: provide storageclass-es if there are valid parameters

'ceph-rgw' storageclass will be provided only if 'rgw_endpoint' exists
'cephfs' storageclass will be provided only if ceph-fs and/or data-pool
parameters are valid.

Signed-off-by: Arun Kumar Mohan <amohan@redhat.com>
(cherry picked from commit cba605a9300e680b4cc745ac758b68d9d9ba78ba)
ceph: add http dial to verify external endpoint

If there is a typo in the rgw endpoint, then the user will be notified
that the gateway is not accessible or does not return the 200 HTTP code.

Signed-off-by: Sébastien Han <seb@redhat.com>
(cherry picked from commit 83e1ff102db55818ad4f07bad0c6e9650906812f)
ceph: do not validate rgw pool if no endpoint

If no endpoint is specified, we don't need to validate the rgw pools.

Signed-off-by: Sébastien Han <seb@redhat.com>
(cherry picked from commit 9ebc006391a5c627d4b91cd93325209a9b46651a)
build: update manifests with the v1.3.9 version

With the patch release we update the manifest versions to v1.3.9

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>","Improvements
Rook v1.3.9 is a patch release limited in scope and focusing on small feature additions and bug fixes.
Ceph
Avoid removing a healthy mon unexpectedly when the operator restarts (, @travisn)
External cluster export script enhancements (, @leseb @aruniiird)
Toleration for CSI version check job (, @Madhu-1)
Remove obsolete CSI metadatastore and mountcache flags (, @Madhu-1)
Report cluster status error on heatlh check timeout (, @leseb)
Pool CR settings must be strings (, @travisn)"
"ceph: add privileged securityContext to cephfs deployment

cephfs csi driver still uses the ceph CLI for all the
ceph fs operations, when cephcsi gets a request from
the kubernetes it will internally starts threads for
each call. in cephcsi we are setting the pids
limit to max, to set this value the container has
to be running as the privileged one.

if we go with default pid limit we will face core dump
due to resource crunch.

without privileged access we will see Failed to set new
PID limit to -1: open /sys/fs/cgroup/pids/kubepods.slice/
kubepods-besteffort.slice/kubepods-besteffort-pod1029ed37_bebc_466d_9e53_79e7323a67ed.slice/crio-9ef6768d027916f414bf30b54ef13eebad8efd0aa4741d97618affa838d7b4c0.scope/pids.max: permission denied

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
(cherry picked from commit 8f5196a559d23b45a97838776dac4b1e3b6b5db3)
docs: clarify the meaning of cleanup policy of ceph cluster crd

The description of cleanupPolicy is a bit ambiguous. First, we should clarify
that both skipping orchestration and data cleanup will happen iff
""yes-really-destroy-data"" is set to `confirmation`. Second, We should also
describe wiping devices will happen even if user don't specify `sanitizeDisks`
explicitly.

Signed-off-by: Satoru Takeuchi <satoru.takeuchi@gmail.com>
(cherry picked from commit 21cef906f776347a6ecb71b6327a69fd3ba87e11)
ceph: fill in rgw deployment version

The RGW deployment's ceph-version label should now display the same
version as the image it is using.

It previously displayed an empty version: 0.0.0-0.

Signed-off-by: Blaine Gardner <blaine.gardner@redhat.com>
(cherry picked from commit 98d5c73d5ef22274d10f76054f48822e86058c10)
ceph: update base image and examples to v15.2.5

For the v1.5 release we use the latest version of ceph by default,
which is now v15.2.5

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>
(cherry picked from commit a5b9fbc994388e235a604593c95002753f427815)
ceph: remove ""createInstance"" function

Since we moved to the controller-runtime, events are processed one by
one and so are reconciles. This means we won't have multiple
orchestrations happening at the same time. Thus removing this code.

Also removing one unused variable.

Signed-off-by: Sébastien Han <seb@redhat.com>
(cherry picked from commit 10dd8e118499860fd92e39582f3ebab153433ea2)
ceph: export isDoNotReconcile function

Since the predicate for the CephCluster object will soon move into its
own predidacte we need to export isDoNotReconcile so that it can be
consummed by the ""cluster"" package.

Signed-off-by: Sébastien Han <seb@redhat.com>
(cherry picked from commit 9b9f45b7927a5ea7d6811534f54bdbcfdf671092)
ceph: add dedicated predicate for CephCluster object

Since we want to pass a context to it, let's extract the logic into its
own predicate.

Signed-off-by: Sébastien Han <seb@redhat.com>
(cherry picked from commit 70c6752e0e927b794aad0c40780451a5c2787d81)
ceph: ability to abort orchestration

We can now prioritize orchestrations on certain event. Today only two
events will cancel on-going orchestrations (if any):

* request for cluster deletion
* request for cluster upgrade

If one of the two are caught by the watcher we will cancel the on-going
orchestration.
For that we implemented a simple approach based on check points, where
we will check for a cancellation request in certain part of the
orchestration. Mainly before each mons/mgr/osds orchestration loops.

This solution is not perfect, but we are waiting for the
controller-runtime to release its 0.7 version which will embed context
support. With that we will be able to cancel reconciles more precisely
and rapidly.

Operator log example:

```
2020-11-24 13:54:59.499719 I | op-mon: parsing mon endpoints: a=10.109.126.120:6789
2020-11-24 13:54:59.499719 I | op-mon: parsing mon endpoints: a=10.109.126.120:6789
2020-11-25 12:59:12.986264 I | ceph-cluster-controller: done reconciling ceph cluster in namespace ""rook-ceph""
2020-11-25 13:07:33.776947 I | ceph-cluster-controller: CR has changed for ""rook-ceph"". diff=  v1.ClusterSpec{
        CephVersion: v1.CephVersionSpec{
                Image:            ""ceph/ceph:v15.2.5"",
-               AllowUnsupported: true,
+               AllowUnsupported: false,
        },
        DriveGroups: nil,
        Storage:     {UseAllNodes: true, Selection: {UseAllDevices: &true}},
        ... // 20 identical fields
  }
2020-11-25 13:07:33.777039 I | ceph-cluster-controller: reconciling ceph cluster in namespace ""rook-ceph""
2020-11-25 13:07:33.785088 I | op-mon: parsing mon endpoints: a=10.107.242.49:6789,b=10.109.71.30:6789,c=10.98.93.224:6789
2020-11-25 13:07:33.788626 I | ceph-cluster-controller: detecting the ceph image version for image ceph/ceph:v15.2.5...
2020-11-25 13:07:35.280789 I | ceph-cluster-controller: detected ceph image version: ""15.2.5-0 octopus""
2020-11-25 13:07:35.280806 I | ceph-cluster-controller: validating ceph version from provided image
2020-11-25 13:07:35.285888 I | op-mon: parsing mon endpoints: a=10.107.242.49:6789,b=10.109.71.30:6789,c=10.98.93.224:6789
2020-11-25 13:07:35.287828 I | cephclient: writing config file /var/lib/rook/rook-ceph/rook-ceph.config
2020-11-25 13:07:35.288082 I | cephclient: generated admin config in /var/lib/rook/rook-ceph
2020-11-25 13:07:35.621625 I | ceph-cluster-controller: cluster ""rook-ceph"": version ""15.2.5-0 octopus"" detected for image ""ceph/ceph:v15.2.5""
2020-11-25 13:07:35.642688 I | op-mon: start running mons
2020-11-25 13:07:35.646323 I | op-mon: parsing mon endpoints: a=10.107.242.49:6789,b=10.109.71.30:6789,c=10.98.93.224:6789
2020-11-25 13:07:35.654070 I | op-mon: saved mon endpoints to config map map[csi-cluster-config-json:[{""clusterID"":""rook-ceph"",""monitors"":[""10.107.242.49:6789"",""10.109.71.30:6789"",""10.98.93.224:6789""]}] data:a=10.107.242.49:6789,b=10.109.71.30:6789,c=10.98.93.224:6789 mapping:{""node"":{""a"":{""Name"":""minikube"",""Hostname"":""minikube"",""Address"":""192.168.39.3""},""b"":{""Name"":""minikube"",""Hostname"":""minikube"",""Address"":""192.168.39.3""},""c"":{""Name"":""minikube"",""Hostname"":""minikube"",""Address"":""192.168.39.3""}}} maxMonId:2]
2020-11-25 13:07:35.868253 I | cephclient: writing config file /var/lib/rook/rook-ceph/rook-ceph.config
2020-11-25 13:07:35.868573 I | cephclient: generated admin config in /var/lib/rook/rook-ceph
2020-11-25 13:07:37.074353 I | op-mon: targeting the mon count 3
2020-11-25 13:07:38.153435 I | op-mon: checking for basic quorum with existing mons
2020-11-25 13:07:38.178029 I | op-mon: mon ""a"" endpoint is [v2:10.107.242.49:3300,v1:10.107.242.49:6789]
2020-11-25 13:07:38.670191 I | op-mon: mon ""b"" endpoint is [v2:10.109.71.30:3300,v1:10.109.71.30:6789]
2020-11-25 13:07:39.477820 I | op-mon: mon ""c"" endpoint is [v2:10.98.93.224:3300,v1:10.98.93.224:6789]
2020-11-25 13:07:39.874094 I | op-mon: saved mon endpoints to config map map[csi-cluster-config-json:[{""clusterID"":""rook-ceph"",""monitors"":[""10.107.242.49:6789"",""10.109.71.30:6789"",""10.98.93.224:6789""]}] data:a=10.107.242.49:6789,b=10.109.71.30:6789,c=10.98.93.224:6789 mapping:{""node"":{""a"":{""Name"":""minikube"",""Hostname"":""minikube"",""Address"":""192.168.39.3""},""b"":{""Name"":""minikube"",""Hostname"":""minikube"",""Address"":""192.168.39.3""},""c"":{""Name"":""minikube"",""Hostname"":""minikube"",""Address"":""192.168.39.3""}}} maxMonId:2]
2020-11-25 13:07:40.467999 I | cephclient: writing config file /var/lib/rook/rook-ceph/rook-ceph.config
2020-11-25 13:07:40.469733 I | cephclient: generated admin config in /var/lib/rook/rook-ceph
2020-11-25 13:07:41.071710 I | cephclient: writing config file /var/lib/rook/rook-ceph/rook-ceph.config
2020-11-25 13:07:41.078903 I | cephclient: generated admin config in /var/lib/rook/rook-ceph
2020-11-25 13:07:41.125233 I | op-mon: deployment for mon rook-ceph-mon-a already exists. updating if needed
2020-11-25 13:07:41.327778 I | op-k8sutil: updating deployment ""rook-ceph-mon-a"" after verifying it is safe to stop
2020-11-25 13:07:41.327895 I | op-mon: checking if we can stop the deployment rook-ceph-mon-a
2020-11-25 13:07:44.045644 I | op-k8sutil: finished waiting for updated deployment ""rook-ceph-mon-a""
2020-11-25 13:07:44.045706 I | op-mon: checking if we can continue the deployment rook-ceph-mon-a
2020-11-25 13:07:44.045740 I | op-mon: waiting for mon quorum with [a b c]
2020-11-25 13:07:44.109159 I | op-mon: mons running: [a b c]
2020-11-25 13:07:44.474596 I | op-mon: Monitors in quorum: [a b c]
2020-11-25 13:07:44.478565 I | op-mon: deployment for mon rook-ceph-mon-b already exists. updating if needed
2020-11-25 13:07:44.493374 I | op-k8sutil: updating deployment ""rook-ceph-mon-b"" after verifying it is safe to stop
2020-11-25 13:07:44.493403 I | op-mon: checking if we can stop the deployment rook-ceph-mon-b
2020-11-25 13:07:47.135524 I | op-k8sutil: finished waiting for updated deployment ""rook-ceph-mon-b""
2020-11-25 13:07:47.135542 I | op-mon: checking if we can continue the deployment rook-ceph-mon-b
2020-11-25 13:07:47.135551 I | op-mon: waiting for mon quorum with [a b c]
2020-11-25 13:07:47.148820 I | op-mon: mons running: [a b c]
2020-11-25 13:07:47.445946 I | op-mon: Monitors in quorum: [a b c]
2020-11-25 13:07:47.448991 I | op-mon: deployment for mon rook-ceph-mon-c already exists. updating if needed
2020-11-25 13:07:47.462041 I | op-k8sutil: updating deployment ""rook-ceph-mon-c"" after verifying it is safe to stop
2020-11-25 13:07:47.462060 I | op-mon: checking if we can stop the deployment rook-ceph-mon-c
2020-11-25 13:07:48.853118 I | ceph-cluster-controller: CR has changed for ""rook-ceph"". diff=  v1.ClusterSpec{
        CephVersion: v1.CephVersionSpec{
-               Image:            ""ceph/ceph:v15.2.5"",
+               Image:            ""ceph/ceph:v15.2.6"",
                AllowUnsupported: false,
        },
        DriveGroups: nil,
        Storage:     {UseAllNodes: true, Selection: {UseAllDevices: &true}},
        ... // 20 identical fields
  }
2020-11-25 13:07:48.853140 I | ceph-cluster-controller: upgrade requested, cancelling any ongoing orchestration
2020-11-25 13:07:50.119584 I | op-k8sutil: finished waiting for updated deployment ""rook-ceph-mon-c""
2020-11-25 13:07:50.119606 I | op-mon: checking if we can continue the deployment rook-ceph-mon-c
2020-11-25 13:07:50.119619 I | op-mon: waiting for mon quorum with [a b c]
2020-11-25 13:07:50.130860 I | op-mon: mons running: [a b c]
2020-11-25 13:07:50.431341 I | op-mon: Monitors in quorum: [a b c]
2020-11-25 13:07:50.431361 I | op-mon: mons created: 3
2020-11-25 13:07:50.734156 I | op-mon: waiting for mon quorum with [a b c]
2020-11-25 13:07:50.745763 I | op-mon: mons running: [a b c]
2020-11-25 13:07:51.045108 I | op-mon: Monitors in quorum: [a b c]
2020-11-25 13:07:51.054497 E | ceph-cluster-controller: failed to reconcile. failed to reconcile cluster ""rook-ceph"": failed to configure local ceph cluster: failed to create cluster: CANCELLING CURRENT ORCHESTATION
2020-11-25 13:07:52.055208 I | ceph-cluster-controller: reconciling ceph cluster in namespace ""rook-ceph""
2020-11-25 13:07:52.070690 I | op-mon: parsing mon endpoints: a=10.107.242.49:6789,b=10.109.71.30:6789,c=10.98.93.224:6789
2020-11-25 13:07:52.088979 I | ceph-cluster-controller: detecting the ceph image version for image ceph/ceph:v15.2.6...
2020-11-25 13:07:53.904811 I | ceph-cluster-controller: detected ceph image version: ""15.2.6-0 octopus""
2020-11-25 13:07:53.904862 I | ceph-cluster-controller: validating ceph version from provided image
```

Closes: https://github.com/rook/rook/issues/6587
Signed-off-by: Sébastien Han <seb@redhat.com>
(cherry picked from commit ad24990473a876ba014b11ef61f8d63d46190ec0)
ceph: ignore unscheduled ceph daemons while cleaning up

Before cleaning up the cluster, we wait for all the daemon pods to be cleaned up. This fails when
a daemon is in pending state and has no NodeName. This PR ignores daemon pods that are not scheduled on any node.

Signed-off-by: Santosh Pillai <sapillai@redhat.com>
(cherry picked from commit 753bdb3526ab56e6c6ce51215a6b97099bda7df9)
core: fix label merge

This makes it so the label merging function returns a new Labels object
with the merged content instead of modifying the existing one, which
would cause previously merged labels to be returned for a different set
of input labels.

Signed-off-by: Alexander Trost <galexrt@googlemail.com>
(cherry picked from commit 48d21947c2fade80c943cc666973f6559cb4c242)
ceph: update examples and base image to v15.2.7

With the release of the latest octopus v15.2.7 we update the base
of the operator image and set the examples to use the same release
to pick up the security and other bug fixes.

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>
(cherry picked from commit 0a35a08f2fe582ea17a09d24ed2b948e633feaec)
build: update release version to v1.4.8

For the patch release we update the manifest versions to v1.4.8.

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>","Improvements
Rook v1.4.8 is a patch release limited in scope and focusing on small feature additions and bug fixes.
Ceph
Update base operator image and example manifests to Ceph v15.2.7 (, @travisn)
Merge custom labels properly with other labels in the spec (, @galexrt)
Uninstall cleanup ignores ceph daemon pods that are in pending state (, @sp98)
Orchestration is aborted and restarted if the cluster CR is updated (, @leseb)
Restore mon clusterIP if the service is missing in disaster recovery scenarios (, @travisn)
Set the RGW deployment version label (, @BlaineEXE)
Add privileged securityContext to CephFS provisioner (, @Madhu-1)"
"mgr: failed to update the port of mgr's dashboard

if port was used by other daemon，the dashboard will start failed and the status of the ceph will be err，then we update the port to a unused port，the operator can not deal with it

Signed-off-by: zc <zc@zcdeMacBook-Pro.local>
(cherry picked from commit caf7b8c7536436f985799f44669e8f56ae90e9a3)
external: do not enforce rbd, cephfs and rgw flags for the external cluster

there might be a user who only wants to use rbd, so don't enforce them
to to create all the pools and pass the flags

Closes: https://github.com/rook/rook/issues/11846
Signed-off-by: parth-gr <paarora@redhat.com>
(cherry picked from commit e734911532802451755356b58df9f27b761f477b)
test: check rgw pod is running for canary github workflow

For the RGW daemon validation please check whether pod is Running than
the exisitng checks

Signed-off-by: Jiffin Tony Thottan <thottanjiffin@gmail.com>
(cherry picked from commit 715c89bcd86ee541f23cbf2786981cefbff5ee86)
docs: an update to disaster recovery with new scenario

add recovering steps when rook crs and ceph daemons are all deleted.

Signed-off-by: Ben Gao <bengao168@msn.com>
(cherry picked from commit 19cb58bf5ed69f006eef551fe6a93f4f99944a96)
helm: add option to scale down rook operator

Some administrative actions require the user to scale down the rook operator to zero replicas to stop any potential conflicts where the operator is attempting to do something contrary to the current goals of the administrator.

closes: https://github.com/rook/rook/issues/11927
Signed-off-by: TomHellier <me@tomhellier.com>
(cherry picked from commit 13b1585ac2d1045b9a8978a654efe3fa689e529a)
helm: drop snapshot.storage.k8s.io/v1beta1

v1 exists since k8s v1.20

Signed-off-by: Mathieu Parent <mathieu.parent@insee.fr>
(cherry picked from commit 1578d55b4db85f467cc12fb0162c2c416cd2cb50)
core: add clusterID to MCS spec

ClusterID uniquely identifies a cluster. It is used as a prefix to
nslookup exported services.
For example: <clusterid>.<svc>.<ns>.svc.clusterset.local

Signed-off-by: sp98 <sapillai@redhat.com>
(cherry picked from commit aefe0054c49666369272083013c2626965afa712)
core: use clusterID for service nslookup

use ClusterID of the k8s cluster while doing nslookup of the
exported mon or osd service IP

Signed-off-by: sp98 <sapillai@redhat.com>
(cherry picked from commit 9e8e85d68bab469106f9ec2f280dd3484256895d)
core: update default image to ceph v17.2.6

With the release of ceph v17.2.6, the examples and the base
image for the operator are updated to pick up the latest
and greatest.

Signed-off-by: travisn <tnielsen@redhat.com>
(cherry picked from commit 609ac91cb1b51e98d762f19925fd611ffa55eb2b)
external: add alias rbd pool name to support . pools name

if restricted permission was on the . was appended to k8s secret and
failed to create the secret so added a alias name is user wan't to suuport
pool with . in name

Signed-off-by: parth-gr <paarora@redhat.com>
(cherry picked from commit 6c3dabcf5fe9fc131a736072da725727b9108914)
core: disable exporter for Ceph v17.2.6

The expected ceph version for exporter is changed temporarily because
some regression was detected in Ceph version 17.2.6.
Thus, disabling ceph-exporter for now until all the regression are fixed.

Signed-off-by: avanthakkar <avanjohn@gmail.com>
(cherry picked from commit 3e46522423466757ff885ffed83a6905682a7625)
external: do not enforce need for monitoring endpoint

Add --skip-monitoring-endpoint to create-external-cluster-resources.py
to allow the script to work with Ceph clusters without an enabled
prometheus module.

Document the new flag in external-cluster.md and add relevant unit tests

Signed-off-by: Angelos Kolaitis <neoaggelos@gmail.com>
(cherry picked from commit 9e4a6ddee5bbfc45d6ffa19a8fc859ac93def634)
docs: update krew link osd removal docs

Signed-off-by: subhamkrai <srai@redhat.com>
(cherry picked from commit bb103f3a1b6acf2721434b886d01f3b99cee85e6)
external: add support for multisite in external cluster

Add support for realm, zone and zonegroup

Signed-off-by: parth-gr <paarora@redhat.com>
(cherry picked from commit b60da0b8c1170f1e5691cf39e100750aef1f67ea)
build: update examples and docs to v1.11.4

For the patch release update the examples and docs to
v1.11.4

Signed-off-by: travisn <tnielsen@redhat.com>","Improvements
Rook v1.11.4 is a patch release limited in scope and focusing on feature additions and bug fixes to the Ceph operator.
core: Update default image to Ceph v17.2.6 (, @travisn)
core: Disable the Ceph exporter daemon (, @avanthakkar)
helm: Add option to scale down rook operator (, @TomHellier)
helm: Drop snapshot.storage.k8s.io/v1beta1 (, @sathieu)
external: Add support for RGW multisite in external cluster script (, @parth-gr)
external: Do not require the monitoring endpoint (, @neoaggelos)
external: Allow creating pools with special characters in name (, @parth-gr)
external: Do not enforce rbd, cephfs and rgw flags for the external cluster (, @parth-gr)
core: Use cluster ID for ns lookup on exported multi-cluster service (, @sp98)
docs: Add scenario for deleted namespace to the disaster recovery guide (, @gaord)
mgr: Failed to update the port of dashboard (, @zhucan)"
"mon: set stretch tiebreaker reliably during failover

The failover of the arbiter mon in a stretch cluster was sometimes
failing due to the new tiebreaker not being set in ceph.
Rook would repeatedly try to remove the old tiebreaker mon
and keep failing because the new tiebreaker had not been set.
Now we make setting the tiebreaker idempotent in case the operator
restarts in the middle of the operation or some other corner
case causes the expected tiebreaker to be set. In that case,
the next reconcile will also ensure the tiebreaker mon is
set as expected.

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>
(cherry picked from commit d55669293a515f6647daa24927dcda54ead802b1)
osd: truncate osd prepare job names further

In K8s 1.22 there is a bug in the job name generation that
the job name is truncated an additional 10 characters. This can cause an issue
in the generated pod name if it then ends in a non-alphanumeric character. In that case,
we more aggressively generate a hashed job name.

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>
(cherry picked from commit ee83ca74af6a155e0338d0087743bc76035aacea)
test: generate long node name depending on test suite

The generation of a long node name in the integration tests was
being done based on the k8s version. In the past, older K8s versions
did not support the changing name. Now it's more maintainable if
we generate the long name depending on the test suite.

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>
(cherry picked from commit 9d2aa1f6bddb8894de68dd49ee5bf0e211604a06)
docs: clarify helm chart version upgrades

Since the cluster helm chart was created in v1.7, the new helm
chart specifies the ceph image, so we clarify the upgrade
doc with the latest info.

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>
(cherry picked from commit 1002c6fd2e7224e449b1033c017d84769fdee42b)
core: always return nil on error

We should always return a nil pointer of clusterInfo if
CreateOrLoadClusterInfo() returns an error.

Closes: https://github.com/rook/rook/issues/9314
Signed-off-by: Sébastien Han <seb@redhat.com>
(cherry picked from commit fdd243d3dea1d3f7972ef0bfaf04163506799017)
core: fix error message

Let's have a more accurate and correct error message that reflects what
the failing function tried to do.

Signed-off-by: Sébastien Han <seb@redhat.com>
(cherry picked from commit 4f1a2d47a41f6ef9fa5ad44af1eef3e630dc67ad)
core: continue and create an initial cluster info or fail

Let's catch the correct error when no cluster info exists yet. If we
have another error, we fail the orchestration and try again. This could
help up catching small API hiccups for example.

Signed-off-by: Sébastien Han <seb@redhat.com>
(cherry picked from commit e5ce6abac0b8d944752bba76daa4869d424d7b3f)
mds: skip sanity check during upgrades to 16.2.7

The mons need to be configured to skip the mds sanity check
during upgrade to 16.2.7 or the mons may crash during that
upgrade.

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>
(cherry picked from commit 0c19f62df275dd0b0668635ec4a318bb3fb1ea71)
build: update release version to v1.7.10

With the latest patch release we update the docs
and example manifests.

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>","Improvements
Rook v1.7.10 is a patch release limited in scope and focusing on small feature additions and bug fixes to the Ceph operator.
mds: Skip MDS sanity check during upgrades to Ceph 16.2.7 to avoid mon crash (, @travisn)
pool: Clean up health checkers during filesystem and object store deletion (, @BlaineEXE)
core: On failure initializing the cluster, return the error instead of continuing (, @leseb)
osd: Truncate name of the osd prepare job to avoid pod generation failure on K8s 1.22 (, @travisn)
mon: Set stretch tiebreaker reliably during mon failover (, @travisn)"
"ceph: fix panic in reCreateCSIDriverInfo

Initialize the client and the csidriver object
before calling the reCreateCSIDriverInfo
function.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
(cherry picked from commit d48f67a82cb580791b42102f693962a404009094)
ceph: fix logging of csidriver

log the successful message about
starting CSIDriver after creating
the daemonset and deployment objects.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
(cherry picked from commit e2dc41837151c4b9372701c65459fd3e09af2ba2)
ceph: remove variable declaration

remove csiDriver and csiClient variables
creation and reuse them from the method
receivers.
Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
(cherry picked from commit d246dde443bc2e68ce63f4a8575968ab16ff7c9d)
ceph: do not check ok-to-stop when OSDs are in CLBO

This handles the scenario where the OSDs have been created but not yet
started due to a wrong CR configuration.
For instance, when OSDs are encrypted and Vault is used to store
encryption keys, if the KV version is incorrect during the cluster
initialization the OSDs will fail to start and stay in CLBO until the
CR is updated again with the correct KV version so that it can start.

For this scenario, if the CRUSH map has no host registered yet it's fair
to assume the initialization broke and we need to fix it. So when don't
need to call ok-to-stop since it will always fail and eventually force
pass but let's not wait for nothing.

Signed-off-by: Sébastien Han <seb@redhat.com>
(cherry picked from commit 88048cc4e871ced8cb452245cbf034f4cbf9e666)
ceph: test against release version in the branch

The release version needs to be the same in the example/test manifests
as it is in the local build image. The github actions are different in
this regard than the Jenkins builds were. The Jenkins builds always
locally used the master tag instead of a release-specific tag.
Now that the github actions use the release-specific tag, the test
framework no longer should be using the master tag in release branches.

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>
(cherry picked from commit 23b772643bb36b4e4b27ef32477f4b7141d87896)
cassandra: suppress integration test errors temporarily

The Cassandra tests are failing in the CI, although they pass when
run locally on a developer cluster. Until the issue can be tracked
down we need to disable these checks to get to a green CI again.

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>
(cherry picked from commit 5489dd7b58540296464c3050e8bd5b498829aef8)
ceph: making script backward compatible with python2

Variable name `exec`, was raising an error with python2.
Renamed it to `execErr`.

Signed-off-by: Arun Kumar Mohan <amohan@redhat.com>
(cherry picked from commit 888d4ea7064763cf564813ba925a411296332a89)
ceph: merge toleration for osd/prepareOSD pod if specified both places

earlier, `ApplyToPodSpec()` was only taking one toleration and ignoring
tolerations from `placement.ALL()`.

this commit merge toleration for Mgr,Mon,Osd pod
example, for osd it will merge
spec.placement.all and
storageDeviceClassSets.Placement(in case of pvc) or
spec.placement.osd(in case of non-pvc's).

Signed-off-by: subhamkrai <srai@redhat.com>
(cherry picked from commit e1f232eeb7ac716e53ec27912ac0556062085a83)
Signed-off-by: subhamkrai <srai@redhat.com>
bot: add more ceph commit prefixes

With the storage providers moved to their own repo,
we add more possible prefixes for commits to the
ceph operator, including the ceph daemons and csi
driver.

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>
(cherry picked from commit a32b11c5729145e5349a43d65d5a25f70f942bce)
ceph: reconcile osd pdb if allowed disruption is 0

Rook checks for down OSDs by checking the `ReadyReplicas` count
in the OSD deployement. When an OSD pod goes into CBLO due to
disk failure, there is a delay before this `ReadyReplicas` count
becomes 0. The deplay is very small but may result in rook missing
OSD down event. As a result no blocking PDBs will be created and
only default PDB with `AllowedDisruptions` count as 0 is available.
This PR tries to solve this. The OSD pdb reconciler will be
reconciled again if `AllowedDisruptions` count in the main
PDB is 0.

Signed-off-by: Santosh Pillai <sapillai@redhat.com>
(cherry picked from commit 7480f6ba621edc29fbeabe24e7b4378aa92dad89)
build: update release version to v1.6.10

The patch release for v1.6.10 is ready, thus updating the example manifests
and documentation.

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>","Improvements
Rook v1.6.10 is a patch release limited in scope and focusing on small feature additions and bug fixes.
Ceph
Reconcile OSD PDB if allowed disruptions are 0 (, @sp98)
Merge tolerations for the OSDs if specified in both all and osd placement (, @subhamkrai)
External cluster script compatibility with python2 (, @aruniiird)
Do not check ok-to-stop when OSDs are in CLBO (, @leseb)
Fix panic when recreating the csidriver object (, @Madhu-1)"
"docs: add CSI section to Multus design doc

Add a section detailing a design to handle the volume-operations-blocked
on CSI restart issue when running with Multus.

See: https://github.com/rook/rook/issues/8085

Signed-off-by: Blaine Gardner <blaine.gardner@redhat.com>
(cherry picked from commit 2bf1e1f07b648418486cec7754c0151ff9e46c1c)
csi: make create and get process separate for csi users

Currently if we run external-script and user already exit,
it fails to create/run same user again if the caps are upgraded,
so we need to check first if user is already present.
And for upgrading user we can do upgrade after this
PR: https://github.com/rook/rook/pull/9609 will get merged.

Closes: https://bugzilla.redhat.com/show_bug.cgi?id=2048458

Signed-off-by: parth-gr <paarora@redhat.com>
(cherry picked from commit 4f43f2d93e3da4b1e8a6d1dcb6318f64288b8bd2)
object: update pool properties during reconcile

The reconcile was skipping updating most pool properties for
object stores. The implementation of pools between the file,
object, and pool controllers had some duplicate code, so
this change also factors out the common code for better
reuse in a single place. Anytime a pool is created or updated,
it will now consistently update all the pool properties
that are expected to be modifiable.

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>
(cherry picked from commit 221b3dfb72bab3a97b8020fb4da451acdcb65fc1)
docs: adds doc for implementation of csi-addons

This commit adds the documentation for implementation
of csi-addons.

Signed-off-by: yati1998 <ypadia@redhat.com>
(cherry picked from commit 045cc87e03d53023f5516d6815fa1ef570e4b65d)
osd: add namespace in vault client

If the KMS connection details for Vault have a VAULT_NAMESPACE we must
use it when building the vault client to auto-detect the KV internal
version.

Signed-off-by: Sébastien Han <seb@redhat.com>
(cherry picked from commit 23832c8cc7961ba15efb52bbc9ac49651913469e)
csi: bump registar image to v2.5.0

Upgrades image:

- k8s.gcr.io/sig-storage/csi-node-driver-registrar: v2.4.0 -> v2.5.0

Detailed changelog:

- https://github.com/kubernetes-csi/node-driver-registrar/blob/v2.5.0/CHANGELOG/CHANGELOG-2.5.md

Signed-off-by: Mathieu Parent <mathieu.parent@insee.fr>
(cherry picked from commit 405dcaadace878eec500051f57477ad1c54c08ca)
core: do not dereference a non-pointer

In this case `oldMappingToGo` and `newMappingToGo` were not pointers so
there is nothing to dereference.
This happens when the monitors endpoints configmap is updated, but only
on the pool and file controllers. They are watching for changes on that
configmap so that they can reconcile and upate the bootstrap peers token
when replication is enabled.

Closes: https://github.com/rook/rook/issues/9714
Signed-off-by: Sébastien Han <seb@redhat.com>
(cherry picked from commit 32998cbda4291e414be363d5f7ccb7fe9ec7c933)
build: update release version to v1.8.5

With the patch release the example manifests and docs are
updated to v1.8.5

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>","Improvements
Rook v1.8.5 is a patch release limited in scope and focusing on small feature additions and bug fixes to the Ceph operator.
core: Operator was crashing when the mon endpoints were updated (, @leseb)
csi: Bump registar image to v2.5.0 (, @sathieu)
osd: Add namespace in vault client (, @leseb)
doc: Add documentation for deploying the csi-addons (, @yati1998)
object: Update object pool properties during reconcile (, @travisn)
csi: Create separate csi users in external cluster configuration (, @parth-gr)"
"docs: add documentation for sharing a CephFS PVC across namespaces

Signed-off-by: Guillaume Moutier <guillaume.moutier@gmail.com>

various corrections following reviews

Signed-off-by: Guillaume Moutier <guillaume.moutier@gmail.com>
(cherry picked from commit 85244d187ad27182a76f2e8a04d0f1b03cd65a6d)
docs: add yaml way of configuring pg_num and pgp_num

- adds description on how to configure default pg_num and pgp_num
  parameters on per pool basis while deploying rook based ceph cluster.
- advices user to declare them during initial startup.

uptil now, docs only covered cli way of configuring them.

Closes: https://github.com/rook/rook/issues/10361

Signed-off-by: Deepika Upadhyay <deepika@koor.tech>
(cherry picked from commit 5a27780e91a3f16a19c1039b9c6513db7b9cbaf9)
ci: ignore body-max-line-length

We don't care the line length of commit message.

ref.
https://github.com/rook/rook/pull/10445

Signed-off-by: Satoru Takeuchi <satoru.takeuchi@gmail.com>
(cherry picked from commit 2f66e7d15be4e0ca6ac86862eed64c8fcd2c7962)
osd: disallow to create osd on lv with metadata device

OSD on logical volume is raw mode. This mode can'set metadata device.
We should not mark a logical volume as available in this case.

Closes: https://github.com/rook/rook/issues/10747

Signed-off-by: Satoru Takeuchi <satoru.takeuchi@gmail.com>
(cherry picked from commit 8b513a4a7469fd50e767e9d87c1521e0900d0ad5)
docs: add missed sssdConfigFile params for NFS CRD

Initial commit of NFS CRD docs missed two params, causing some users to
experience problems setting it up.

Signed-off-by: Blaine Gardner <blaine.gardner@redhat.com>
(cherry picked from commit f027140a9772f1d9d7db1cf4d6c9b1f28c85ead3)
ci: remove older k8s config since we moved to 1.19

no need of using older config to setup older k8s
since we moved to 1.19 as min k8s version.

Signed-off-by: subhamkrai <srai@redhat.com>
(cherry picked from commit 80be5b5fc0c63edb0fa3eeec73db41e36e5a29d8)
docs: update the latest-release docs to 1.10

With the v1.10.0 release out, the latest-release docs need
to point to the 1.10 release. With each release we will
update to the next release branch when we have shipped.

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>
(cherry picked from commit c4304e4b926bca9f7914776e8e9cececf208c8d9)
ci: fix release tests configuration

I missed to remove older config for release
tests yaml.

Signed-off-by: subhamkrai <srai@redhat.com>
(cherry picked from commit bfa78b7ea27d43a1341d1ee4b8d1a24bf679e496)
csi: set daemonset set name as template name

Currently daemonset template.metadata.name is
empty and the way we are setting is not correct
use the daemonset name as the template.metadata.name

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
(cherry picked from commit 2dae7f67784cfdf69de96887a33485faaca60bf0)
csi: add missing serviceAccoutName to holder

Add missing serviceAccountName for the holder
daemonset to create the pods with required
access.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
(cherry picked from commit 32943b64e353a00be1b4b004e9a9df4b2376fd5c)
test: wait for resource deletion during helm uninstall

The helm integration test was immediately removing both the cluster
and the operator charts, without waiting for any resource deletion
between the deletions. This causes intermittent failures in the
test since the cluster CR and mon secret and configmap to never
be deleted because the operator will be stopped before their
finalizers can be removed. Now we wait for their finalizers
to be removed before removing the operator chart.

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>
(cherry picked from commit 5c478e5e04e80c4e4b71919be905234d992e6ceb)
osd: refactor code

Simplify osd management code.

Signed-off-by: Satoru Takeuchi <satoru.takeuchi@gmail.com>
(cherry picked from commit 00b3d0f323d54a9d6a534d8536a0eebe02c5190a)
csi: change the default fsgroup policy for CSI driver object

This commit change the default fsgroup policy for csi driver object
to ""File"" type which is the better/correct setting for the CSI volumes
We have been using default value which is ""ReadWriteOnceWithFSType"".
with this change backward compatibility should be preserved.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>
(cherry picked from commit 32ecc37d378fa6d70b6f5ff242e8a510eae2c724)
ci: no need to copy working dir to GOPATH

this commits remove using working-dire and copying
files to GOPATH since they are not required anymore.

Signed-off-by: subhamkrai <srai@redhat.com>
(cherry picked from commit c2cc8d3a66202ec635040deda211a3cad7db7f5c)
csi: use cephcsi image for nfs nodeserver

Cephcsi v3.7 now supports nfs nodeserver.
This commit changes nfs nodeserver image to
cephcsi image and makes other necessary
modifications to template.

Signed-off-by: Rakshith R <rar@redhat.com>
(cherry picked from commit 9405b59ff4f32af1fff0a80ebdc1013140ac5b26)
csi: add holder pod support for nfs

This commit adds holder pod support
for nfs to be able to work in non-host
networking scenario, without being
affected by restarts of csi-nfsplugin.

Signed-off-by: Rakshith R <rar@redhat.com>
(cherry picked from commit 7c6e4d71bcdf36e4e6e7b69f47af724cddf4ba00)
csi: remove nfs image

This commit remove nfs image
since it is no longer needed.
Cephcsi itself will act as nfs
nodeserver.

Signed-off-by: Rakshith R <rar@redhat.com>
(cherry picked from commit 7722226521cb9528c0fc5eed2aa2fe9278d5e6c8)

# Conflicts:
#	deploy/examples/images.txt
ci: add e2e for csi-nfsplugin restart

This commit adds e2e for csi-nfsplugin restart
when it is not on host-networking.

Signed-off-by: Rakshith R <rar@redhat.com>
(cherry picked from commit 07aac106df8c198ab823302bd2806e24c08ea28f)
manifest: fix unexpected end of stream

Signed-off-by: Khris Richardson <khris.richardson@gmail.com>
(cherry picked from commit 9614428f54f693e87ede61b780107adea74548ba)
rbdmirror: remove volume replication sidecar

The volume replication operator is being moved to
kubernetes-csi-addons. This commit hence, removes
the volume replication sidecar and updates the
related documentation.
It will also update the csi-addons sidecar version
to the latest one.

Closes:

Signed-off-by: yati1998 <ypadia@redhat.com>
(cherry picked from commit 9b4361b3790d9528dca007e7fb79ee179e02a7e9)
csi: remove controller-ip from csi-addons

This commit removes controller-ip parameter from
csi-addons sidecar as it is no longer required to be
passed.

Signed-off-by: yati1998 <ypadia@redhat.com>
(cherry picked from commit cc4fd0c5472ce1f1a38aa4bab67661c5293d7871)
build: remove volume replication crd from build

This commit removes the creation of volume
replication crds from build.

Signed-off-by: yati1998 <ypadia@redhat.com>
(cherry picked from commit 69a233be4e3d264ac93bae01d360f785870ee868)
helm: set OBC storageclass name to right namespace

OBC storageclasses should have their names based on the cluster
namespace and not the operator namespace. Fix the chart to reflect this.

Signed-off-by: Blaine Gardner <blaine.gardner@redhat.com>
(cherry picked from commit 5f00d291c9a3cd7048452060b45ecf7c3556cb25)
csi: remove findCSIChange from predicate

findCSIChange will work only for single
line values/configration in the configmap,
If the value is multiline the regex will not
be able to indentify the change because of this
one no configurations will be applied to the
csi driver. Removing this check so that if there
is any update on the configmap we will
reconcile the csi driver.

Note:- This might looks heavy but updating of config
map is not a frequent event.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
(cherry picked from commit 5b843a17a1704f771ed3ab3a4e19328a555c7029)
operator: improve ProbeHandler error message

This commit implements more diagnostic error for unsccessful
Liveness- and Readiness-Probe of Pods.

Added codes are expected to catch failures of
`ceph status` and `ceph mon_status`, and report it.

Closes: https://github.com/rook/rook/issues/9846
Closes: https://github.com/rook/rook/issues/9852

Signed-off-by: motorailgun <motoi_public@mail.aria-on-the-planet.es>
Signed-off-by: Satoru Takeuchi <satoru.takeuchi@gmail.com>
(cherry picked from commit ff0951738fcd2479c53d6b1ac472b5176530f028)
ci: improve the log on intermittent build failure

The build process sometimes fails with intermittent problems. Some of them
are known problems and then we retry build process. However, there still
are unknown problems. In this case, it's hard to find the reason because
the build process exits immediately.

ref.
https://github.com/rook/rook/runs/8225144002?check_suite_focus=true#step:3:926

```
+ case ""$o"" in
+ exit 1
Error: Process completed with exit code 1.
```

To make debugging easier, let's print the output of `make`. This log won't be
too long since `make` prints most messages to stderr.

Signed-off-by: Satoru Takeuchi <satoru.takeuchi@gmail.com>
(cherry picked from commit 47f7aefa20a5bdf056c0ad3c3ba55ac6be2b8182)
docs: warn to upgrade to 1.9.10 before k8s 1.25

The helm chart is blocked from upgrading to newer versions of Rook
if v1.9.10 is not installed before upgrading to K8s 1.25. The
helm chart is confused by the PSPs that still exist in the installed
chart and fails to upgrade to the new chart.

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>
(cherry picked from commit 9cad930b4d57cff92ba925762f0d4cf00fc50532)
csi: add NFS snapshot support

This commit adds snapshotter sidecar to
NFS driver and required yamls and docs too.

Signed-off-by: Rakshith R <rar@redhat.com>
(cherry picked from commit 73042c753135dfd24e2879ef26d342151e303ac1)
csi: add NFS clone support

This commit reqired yaml and docs
changes too for NFS clone support.

Signed-off-by: Rakshith R <rar@redhat.com>
(cherry picked from commit f8eb2a2fbc34f962abaedc5cbe50c6c9b8a7c72d)
csi: add NFS expansion support

This commit adds resizer sidecar to
NFS driver and required storageclass
and rbac changes.

Signed-off-by: Rakshith R <rar@redhat.com>
(cherry picked from commit 9c4592720c924fa6ad4cfcc31332637c7a8da069)
build: update the release version to v1.10.1

For the patch release update the documentation and manifests
to v1.10.1

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>","Improvements
Rook v1.10.1 is a patch release limited in scope and focusing on feature additions and bug fixes to the Ceph operator.
nfs: Add support for NFS snapshots, restore clone & resize (, @Rakshith-R)
docs: Warn to upgrade Helm chart to 1.9.10 before upgrading to K8s 1.25 (, @travisn)
operator: Improve ProbeHandler error message (, @motorailgun)
helm: Set OBC storageclass name to correct namespace. If the operator is in a different namespace from the cluster, will require deleting the OBC storage class before upgrade. (, @BlaineEXE)
manifest: Fix unexpected end of stream (, @khrisrichardson)
rbd-mirror: Move volume replication sidecar to CSI-Addons (, @yati1998)
csi: Trigger CSI driver reconcile for every update to the configmap rook-ceph-operator-config (, @Madhu-1)
csi: Use cephcsi image for nfs nodeserver + holder design (, @Rakshith-R)
osd: Small refactor for maintainability (, @satoru-takeuchi)
csi: Change the default fsgroup policy for CSI driver object to File (, @humblec)
csi: Fix holder pod creation in openshift multus cluster (, @Madhu-1)
docs: Sharing a CephFS PVC across namespaces (, @guimou)
docs: Add example for configuring pg_num and pgp_num (, @ideepika)
osd: Disallow to create OSDs on an LV with metadata device (, @satoru-takeuchi)
docs: Add missed sssdConfigFile params for NFS CRD (, @BlaineEXE)"
"ci: skip mgr pod restart count upgrade 1.22.x suite

for now, let's skip the mgr pod restart count
for upgrade suite 1.22.x to get the CI green
and so that we don't skip any other error in name
of mgr restart count.

Signed-off-by: subhamkrai <srai@redhat.com>
(cherry picked from commit 1bd4ab9d81fc1a5c77f08a851602a239e89b0c80)
ci: increase upgrade test timeout to 40m

with reef, we are now upgrading 2 ceph versions which
takes time to complete the ci.

Signed-off-by: subhamkrai <srai@redhat.com>
(cherry picked from commit e139fd20beb84357d720c852961873a7d5785ecc)
ci: add github action to free space in runner

adding github action to free space in runner
which will help us avoiding mon low space error

Signed-off-by: subhamkrai <srai@redhat.com>
(cherry picked from commit 334a632ecd34c7bab474b06360a7639aa8f17c2f)
ci: same ceph version in toolbox and cluster-test

Let's use same ceph version(latest Reef) in both
cluster-test and toolbox.yaml so that we don't need
to pull image twice. Alos, github action helper script
was calling `deploy_manifest_with_local_build` which
is required for operator.yaml and not for toolbox.yaml.

Signed-off-by: subhamkrai <srai@redhat.com>
(cherry picked from commit b9c41fd548bc6b14cb89405efdaba3334b9a039f)
multus: use right interface in ci validation

runner version `2.306` had the interface `net`
but somehow version `2.307.1` which is latest
doesn't have `net` it has `eth0*` so using that.

```
cat /proc/net/dev
Inter-|   Receive                                                |  Transmit
 face |bytes    packets errs drop fifo frame compressed multicast|bytes    packets errs drop fifo colls carrier compressed
    lo:       0       0    0    0    0     0          0         0        0       0    0    0    0     0       0          0
 tunl0:       0       0    0    0    0     0          0         0        0       0    0    0    0     0       0          0
  eth0:     446       5    0    0    0     0          0         0        0       0    0    0    0     0       0          0
sh-4.4# grep etho /proc/net/dev
sh-4.4# grep eth0 /proc/net/dev
  eth0:     446       5    0    0    0     0          0         0        0       0    0    0    0     0       0          0
sh-4.4# exit
```

Signed-off-by: subhamkrai <srai@redhat.com>
(cherry picked from commit 4502ea8ee141834a87b91fed3f41517f1d9285f6)
ci: update the release test timeout to 40m

recentally, upgrade tests are getting
longer than 30m to pass since reef upgrade.
So, increasing the timeout to 40m.

Signed-off-by: subhamkrai <srai@redhat.com>
(cherry picked from commit 07bb18feba73288bb7c2d711e7ce1e6b9c84b8c3)
mon: delete ParseMonEndpoints from mon package

The function ParseMonEndpoints existed twice, once in the mon package
and once in the controller package. It has now been deleted from the
mon package. Usages in the mon package now reference the function
in the controller package.

Signed-off-by: Henry Davies <henrydavies@hotmail.co.uk>
(cherry picked from commit 2c8949e195161489cfc4be8a27b589f418c26a20)
helm: additional ServiceMonitor labels

add a value in rook-ceph chart to add additional labels to the
generated ServiceMonitor when monitoring is enabled

Signed-off-by: Cyril Jouve <jv.cyril@gmail.com>
(cherry picked from commit abd81e3c80cf558ad6064b7cfc2dca2255b80735)
object: fix s5cmd for s3 endpoint verification

add a new toolbox yaml manifest which will use the
rook image instead of ceph image
for running s5 cmd container needs to run with rook image

closes: https://github.com/rook/rook/issues/12227

Signed-off-by: parth-gr <paarora@redhat.com>
(cherry picked from commit 8a3f0583291e150c1c3854c14a35d5059610b793)
operator: fix formatting of some logger methods

Some logging instructions use formatting syntax `%q`, but the logging method is
`Info` or `Debug` instead of `Debugf` and `Infof`. As a result, the arguments of
the method were concatenated instead of formatted properly.

Signed-off-by: Lucas Henry <polyedre@disroot.org>
(cherry picked from commit c948183c0e3d9a4729a607649546e799fd52c494)
csi: add holder pods to the list to delete pod

Add holder pods label to the list so that Rook
can get all the pods on the failed node and
force delete the pods stuck in terminating state.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
(cherry picked from commit 22bfc9de3d518d640d4beea4c0296ba6ede4fb1d)
csi: add nfs pods to the list to delete pod

Add nfs pods label to the list so that Rook
can get all the pods on the failed node and
force delete the pods stuck in terminating state.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
(cherry picked from commit 29faca9032a72bed543cb442a2665c9458627c6a)
csi: add maxUnavailable for cephfs csi daemonset

Adding maxUnavailable parameter to the cephfs csi daemonset. The
default value of maxUnavailable = 1 can make the upgrade process
slower in environments with large number of nodes.

Fixes:
Signed-off-by: karthik-us <ksubrahm@redhat.com>
(cherry picked from commit 2675c976d5a9d93fd4d576d6080a1915f70dc1e2)
ci: improve the canary toolbox operator pod check

the wait command is provided by kubernetes so
instead of using manually shell hack using the wait
command

Signed-off-by: parth-gr <paarora@redhat.com>
(cherry picked from commit 64d3df4fcd62a790e54a18340b44de12891e3c96)
ci: fix testobjectsuite ci

Current reason for failure
clients: ""cephbuckettopic"" ""my-topic"" exist, but ARN was not set

Added some more re-try as it might take some more time to
update the ARN in status

OBC bound status was failing and going into
race condition adding a seprate timeout
makes recover it from that state

Signed-off-by: parth-gr <paarora@redhat.com>
(cherry picked from commit 715bd31a0ac4dbe64787d3da3176054390f914be)
ci: update the objectsuite test timeout to 40m

While running object test we need some more time
to run the cosi test completely so increasing the timeout

Also update timeout of ntegration-tests-on-release.yaml

Signed-off-by: parth-gr <paarora@redhat.com>
(cherry picked from commit 8617e2e9240a719dafa38efcafe9a63892961478)
ci: add free disk action to release/master ci

I missed adding the action which free some disk space
which may help with low resource issues.

Signed-off-by: subhamkrai <srai@redhat.com>
(cherry picked from commit 2eee0c7e1e24305b9eb03f51e8e3fa0520a62bf0)
multus: add sample job manifest for multus config validation

added a sample job manifest named `multus-validation` that
validates the multus configuration in the cluster.

Signed-off-by: Nikhil-Ladha <nikhilladha1999@gmail.com>
(cherry picked from commit 9fea9cd8656a00a60b359b55e36e899a24a4ffda)
nfs: run dbus-daemon sidecar as dbus user instead of root

When the dbus-daemon in the sidecar is started as ""root"" user, it fails
with the following log entry:

Failed to start message bus: Failed to drop capabilities: Operation not permitted

By starting the sidecar as ""dbus"" user (uid=81), the executable does not
try to drop capabilities, and starts successfully.

Signed-off-by: Niels de Vos <ndevos@ibm.com>
(cherry picked from commit 320b112cc6db5377004ed3d1b642a29bb5273cc7)
file: ignore exit code 22 when adding datapool

Ignore the exit code 22 when adding the
datapool to a filesystem.

updates:

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
(cherry picked from commit bd9b42d221883836f68fc4ea64820bff5ac6d5f9)
build: update patch version to v1.12.2

For the patch release the examples and the docs are updated
to v1.12.2.

Signed-off-by: travisn <tnielsen@redhat.com>","Improvements
Rook v1.12.2 is a patch release limited in scope and focusing on feature additions and bug fixes to the Ceph operator.
file: Handle filesystem add pool error for Reef (, @Madhu-1)
nfs: Run dbus-daemon sidecar as dbus user instead of root (, @nixpanic)
multus: Add sample job manifest for multus config validation (, @Nikhil-Ladha)
csi: Add CSI pods to the list to force delete when stuck terminating (, @Madhu-1)
csi: Configurable maxUnavailable for CephFS CSI Daemonset for faster updates (, @karthik-us)
mon: Cleanup ParseMonEndpoints from mon package (, @henrydavies1)
helm: Configure additional ServiceMonitor labels (, @jouve)
operator: Fix formatting of some logger methods (, @polyedre)
object: Fix s5cmd documentation for s3 endpoint verification (, @parth-gr)"
"csi: update cmdline args as used by ceph-csi

This commit adds cmdline args to enable
1. RecoverVolumeExpansionFailure
2. PreventVolumeModeConversion
3. HonorPVReclaimPolicy

Signed-off-by: Praveen M <m.praveen@ibm.com>
(cherry picked from commit a80396df1bf30e58acbebf7fd66eef0741f7bc4d)
csi: update csi provisioner to 3.6.3

updating csi provisioner to 3.6.3 to
as we have a bug in 3.6.2

resolves:

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
(cherry picked from commit 85b86efee1f8900ee6a29f6a153b4d47e613de44)
csi: make leader election flags configurable

This commit adds the flexibility to configure
leader election flags as per the user
requirement and also keeps the existing values
as the default one.

resolve:

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
(cherry picked from commit 9b418d24a1681c835be2796d15e2b1274e0f2ef7)
manifest: remove pg_autoscaler from mgr modules examples

The pg_autoscaler mgr module is no longer possible to disable.
Ceph requires the module to always be enabled. Now the
autoscaling configuration is done with a per-pool setting.

Now the rook module is shown as an example to enable.

Signed-off-by: travisn <tnielsen@redhat.com>
(cherry picked from commit f0c30e2edb0b1836d230f2c7dfb9deece784ed49)
exporter: skip reconcile on exporter deletion

The exporter pod is ephemeral and frequently being deleted
and re-created when ceph daemons are created. Therefore,
we need to skip reconciling based on the deletion
of the exporter deployment.

Signed-off-by: travisn <tnielsen@redhat.com>
(cherry picked from commit 995a64fb3a2a35e26f6f5d3141ef6e966c2e429c)
osd: wait for the pgs to be clean

If migration of the OSDs is enabled, operator should wait
for the pgs to be clean after the all the OSDs have reconciled.
This will help add the exponential backoff for the operator
restarts when OSD migration is needed but PGs are still rebalancing the
data after last OSD migration.

Signed-off-by: sp98 <sapillai@redhat.com>
(cherry picked from commit 43d3bf147aee36720098e1d653276b0ecbdcfcc1)
helm: fix indentation/whitespace

Removing whitespace for consistency and wrong indentation level.
There's one actual ""oopsie-fix"" in here for CSI_ENABLE_READ_AFFINITY

Signed-off-by: Erik Berg <erikberg@usit.uio.no>
(cherry picked from commit 9a2d8505e78749c5c2a53c3637659f4ba7a2ec72)
helm: remove duplicate key for toolbox keyring

We set `ceph_secret=${ROOK_CEPH_SECRET}` just a couple lines above,
and this duplicate is probably just an oversight.

This duplicate key is not present in the similar scripts in
  examples/toolbox.yaml
  examples/toolbox-operator-image.yaml

Signed-off-by: Erik Berg <erikberg@usit.uio.no>
(cherry picked from commit 2a225ac718820949102d66a53b4a7b3da200101a)
operator: increase cpu limits

The operator needs to burst significantly when reconciling,
then will quiet down and nearly not consume any cpu.
Therefore, we allow the operator to burst to more than
a full cpu instead of limiting it to a half cpu.

Signed-off-by: travisn <tnielsen@redhat.com>
(cherry picked from commit ca288874032ddcb802cff98a1aeeef72e27a1fc9)
build: update release version to v1.13.3

For the patch release update the examples and docs
to v1.13.3

Signed-off-by: travisn <tnielsen@redhat.com>","Improvements
Rook v1.13.3 is a patch release limited in scope and focusing on feature additions and bug fixes to the Ceph operator.
operator: Increase resource limits to 1.5 CPU (, @travisn)
helm: Remove duplicated toolbox keyring (, @eb4x)
exporter: Skip reconcile on exporter deletion (, @travisn)
manifest: Remove obsolete pg_autoscaler from mgr modules examples (, @travisn)
csi: Make leader election flags configurable (, @Madhu-1)
csi: Update csi provisioner to 3.6.3 (, @Madhu-1)
csi: Update feature gates cmdline args (, @iPraveenParihar)"
"monitoring: set honor labels on the service monitor

The endpoint property honorLabels: true should be set so that
different rgw instances can show separate prometheus
values instead of being aggregated.

Signed-off-by: Travis Nielsen <tnielsen@redhat.com>
(cherry picked from commit eed10334854b1017f0c145f0cac4f0ff9abb9f53)
monitoring: fix CephPoolGrowthWarning expression

Prometheus found duplicate series for the match group `pool_id`
and `instance` when evaluating the CephPoolGrowthWarning alert
expression. This alert has an evaluation interval of 2 days and
did not consider the changing POD names during the Rook migration process.

This commit adds the `pod` label to the set of considered labels.

Signed-off-by: Matej Feder <matej.feder@dnation.cloud>
(cherry picked from commit 6ba084f35accd48d6e1c3ae4440e75d37004231f)
core: increase storage deviceset name limit to 50

initially, we have the limit of 40 char set on
storageclassdeviceset.Name but seems like that is not enough and
upgrade clusters can face issue with this. So, increasing the limit to
50.

Signed-off-by: subhamkrai <srai@redhat.com>
(cherry picked from commit 1dcc99ec1d899429259ba00157a78fcf33602681)
build: set release version to v1.14.7

For the patch release update the examples and documentation
to v1.14.7

Signed-off-by: Blaine Gardner <blaine.gardner@ibm.com>
core: revert increase storage deviceset name limit to 50

This reverts commit 1dcc99ec1d899429259ba00157a78fcf33602681.

Signed-off-by: subhamkrai <srai@redhat.com>
(cherry picked from commit c7d07562c4b7fb77215aca84add06ff9f6766409)
osd: revert limit storageClassDeviceSets to 63 chars

This reverts commit 6f5cc9b01dd78924dc6bb8cff1f7215e6286aa0c.

Signed-off-by: subhamkrai <srai@redhat.com>
(cherry picked from commit e8aeb0d2633473dc97b956e451e71ab0e148d046)","What's Changed
monitoring: fix CephPoolGrowthWarning expression (, @matofeder)
monitoring: Set honor labels on the service monitor (, @travisn)
Full Changelog: v1.14.6...v1.14.7"
"feat: add onDayPointerEnter, onDayPointerLeave props ()
chore: Upgrade dependencies ()
Create dependabot.yml","What's Changed
feat: add onDayPointerEnter, onDayPointerLeave props by @norbertkeresztes in
New Contributors
@norbertkeresztes made their first contribution in
Full Changelog: v8.3.7...v8.4.1"
"Revert ""repo: remove links to docs""

This reverts commit f5f50fba70b6f87691788453a92b0da002f3ff90.
website: restore algolia search
chore(website): update example’s footers
fix: toMonth to include the full month ()
chore: add test for DateRange
chore: update date-fns imports ()
chore(website): add env var to deploy script
Bump v8.0.3","What's Changed
fix: toMonth to include the full month by @mputilov in
chore: update date-fns imports by @gpbl in
New Contributors
@mputilov made their first contribution in
Full Changelog: v8.0.2...v8.0.3"
"Added a tooltip for reset bonus income.  Also added a tooltip per wrinkler that shows the amount it will give on pop ()
Version change, minor optimizations in wrinker tooltip/reset bonus income tooltip, move wrinkler tooltip a little right to minor game
Added the option to turn off wrinkler tooltip (issue)
Fixed issue (tooltip is cut off at bottom)
A single word corrected by anonymous
Changed default Golden Cookie sound (issue
Changed default Golden Cookie sound (issue)
Fixed userscript section on README
Added the option to change sounds played when a Golden Cookie/Season Special spawns (Fixed issue)
Fixed minor flaw in README","Added the option to turn off wrinkler tooltip (Issue)
Fixed tooltip being cut off at bottom of screen (Issue)
Fixed URL for default sound of Golden Cookie and added the option to change the URL of the Golden Cookie/Season Special spawns (Issue)"
"Added season cookies/eggs gotten stats
Minor text changes
Fix multi click Golden Cookie issue (issue 5)
Complete refactoring to convert all innerHTML to pure DOM + file organization
Addition to previous commit
Added back reset bonus income stat","Fixed multi click Golden Cookie issue (issue)
Change all string concatenate innerHTML to DOM (maybe small performance improvement)
Split source code into files to make it easier to manage
Added back reset bonus income statistics (highly requested)"
"Fix a typo on the in the status template
Fix mypy complaints
Remove unused fn `trace_for_tag`
Remove fn `trace` and unused setting `dev_trace`
Remove unused fn `pprint`
Remove unused fn `log_on_exception`
Remove unused fn `dump` and `dump_var`
Snake case and define `__all__` for `debug.py`
Fix: Do not log same working dir in a row

We used `functools.lru_cache` here because we're lazy.  Ignore
whitespace changes properly.

Seen here: https://github.com/timbrel/GitSavvy/issues/1527#issuecomment-1077610112
Add more test cases to the output panel syntax test
Do not mark commit sha's in the middle of a word
Simplify sha regex
Flash status message when trying to discard staged files

Ideally we would support this but it gets complicated rather quickly.

a) a file can have staged and unstaged parts
b) a file can be actually untracked, only ""i-t-a""
Flash status message when trying to discard staged changes
Use `flash` fn throughout `diff.py`
Rename local variable `output_view` to `view`
Colorize intra-line differences
Flash status message when trying to discard staged changes (2)
Let `LogMixin` inherit from `GitCommand`
Fix typo
Fix off-by-one error when jumping from historical to working dir file

Note (again) that `rowcol` returns 0-based information but `open_file`
expects 1-based line/col values.
Rename `row` to `line` to clarify used metric","Maintenance sprint with small fixes and internal changes.
Notable:
The already unused setting dev_trace has been removed."
"Improve committing the first commit

Fixes
Replaces
See also

On or before the first commit, generating the diff against ""HEAD"" for
""commit -a"" or ""HEAD^"" for ""commit --amend"" fails as they don't point
to anything.  Catch such errors, generate the immutable empty tree sha,
and use it as the parent.
Add rebase action ""Show previous tip of the branch""

Only showing the previous tip (`branch@{1}`) is a bit easier to read
than the full `--reflog`.  From there a user can easily diff against the
HEAD or reset HEAD to the previous state.

You can also toggle ""all"" to make the previous tip the top of the graph
view.
Probe previous tip and scroll to it

Probe `@{1}` *before* updating the view state as otherwise ""refresh""
will throw in an unpleasant way.  Especially it will not even redraw
the prelude/help section, and of course throw on each focus, so closing
the view would be the only option for the user.

Since we now have the sha just `follow` it which really helps with
orientation.
Always bring hunk into viewport

For `jump_to_hunk`, if there is no hunk to jump to still bring the
selection, which might be on the only hunk currently available, into
the viewport.

Basically, show the cursor if a ""jump"" is requested for orientation.
Add ""Make fixup commit"" to the rebase menu

Fixes
Remove unused argument
Log background status calls
Trigger status refresh in main global_events

This is so that the status bar ""controller"" participates on the
IGNORE_NEXT_ACTIVATE signal.

We let go the first `on_activated` event even if we come from a widget,
for example the Command Palette.  This is because usually the user opens
a file using `ctrl+p`, and we must set our status in that case.

T.i. for normal views we trigger an status update on the first activate.
For our ""special"" views this is a no-op because they're still in a blank
state on the first *sync* activate event.  Neither any settings nor the
view syntax has been set at that point.
Rewrite throttler for the status bar

Fixes

The old throttler had a 100ms wait time but this is not a functionality
we need here. E.g. if you create a new view, Sublime puts two events on
the queue, namely 'on_new' and 'on_activated'.

By using the `runtime.throttler` we ensure that only one task on the
worker wins and gets executed.

Note that the implementation does not differentiate between different
views, windows, or repo paths. So there is a risk to undercall now.
Although it is very unlikely to get multiple triggers from different
sources in exactly one task, we capture and merge such events until the
worker thread is ready again which can be at any time in the future.
Note though that the *last* event wins in such cases.
Remove unsused `disable_logging` function
Automatically close ""used"" diff views after commit
Probe all consecutive diff views on the left

It is possible that the user had many diffs open directly on the left
side before committing.  Just go over all of them and stop the
synchronous update as soon as one view on the left did not close.
Prevent double refreshes by setting a flag

If we just checked a diff view and it did not close, it will receive
the focus after closing the commit view.  Prevent a second ""refresh""
in response to the obligatory `on_activated` event by setting a flag
manually.
Check if view has been closed before refreshing

If we delegate to the worker thread for refreshing, catch the edge case
that the view has been closed in between and abort early.  (Otherwise
the code throws unhandled.)
Switch to `on_activated` for the diff view for finer control
Draw diff views for single files synchronous initially

Generally, being synchronous ""on init"" looks way better.  Assume diffing
a single file is fast enough to do so.
Improve diff-view syntax

Restructure the simple diff-view syntax so that we can select the
prelude/header (via `comment.header`) and the content itself
(`git-savvy.diff`) easily.
Optimize if we should navigate after drawing

Storing the `raw_diff` on the view is not cheap, just compute if we
currently show any content using `find_by_selector`.
Shorten comment about psychoses
Make `view` and `settings` local variables for readability
Assume `commit -a` if nothing is staged yet

As quality-of-life hack: If you enter the commit process with nothing
staged, assume `include_unstaged`.

This is transparent as we always commit what's visible in the diff in
the commit message view.  If `-a` is not what you want, the user can
either just close the view, stage something and usually using `[c]` in
some of the views enter the commit process again.  She can also just
switch to a diff view, stage something and hit `[c]`, t.i. without
closing the view, as the view will update.
Rename local variables","Add ""Make fixup commit"" and ""Show previous tip"" to the rebase menu in the ""Repo History""
The latter is really the easier to use --reflog option which was already available in that view.
Often we only want to see the most recent previous tip after a rebase.  From there, we either
look up the diff against HEAD or maybe reset --hard.
Preparing a fixup commit directly from the ""Repo History"" also feels natural.  Please be sure
you already made the actual fixup, t.i. you changed and saved the code, before entering the
commit phase, otherwise there would be nothing to commit.  (Not that GitSavvy would commit
nothing then, but you would have to go back and redo.)
Quality-of-life improvements:
Automatically assume you want to commit -a if nothing is staged.
Automatically close ""stranded"" diff views after committing. ()"
"Provide the empty string as default for `stdout` and `stderr`

If the git output is not decodable we throw a `GitSavvyError` without
providing `stdout` nor `stderr`.  This results in throwing a `TypeError`
in `commit.py` where we serach for a string  in `stderr` without
checking if `stderr` is not `None`.

Instead of doing the `None`-check in `commit.py` provide the empty
string as default here to avoid possible other checks throughout our
code base.

Ref
Typecheck `GitSavvyError`
Type `LoggingProcessWrapper.communicate` to get more type errors
Fix: Do not naively decode output just for logging

In case `decode` is `False`, especially to avoid our standard decode
error handling, the automatic logging would have thrown anyway.

Just avoid the decoding here altogether as `log_git` does that for us
in a defensive way t.i. without throwing.
Fix: Let the diff view catch decode errors again

Regression since 4060ae79 (Other: improve catching errors, Jul 2017)

The diff view catched a `GitSavvyError` and looked for a
`UnicodeDecodeError` in its first argument.  This is never the case
since the refactoring in 4060ae79.

Opt-out of automatic decoding using `decode=False`.  Instead of showing
a modal dialog in case of an error, just print a message in place of
the usual diff.
Do not open an inline diff if the diff is not decodable

In case of an `UnicodeDecodeError` we showed the modal dialog but kept
an empty view afterwards.

Rather catch the error and close the view automatically.  (We also
close the view automatically if the diff is a combined diff, t.i. the
file has a merge conflict currently.  So this behavior is consistent.)
Catch decode errors in the commit message view

Fixes

Showing the diff is optional in the commit message view.  It is good to
have but a user can commit anyway.

In the case the diff is not decodable, do not show the error modal
dialog anymore.  Instead print an error message in place of the diff
just like we do in the diff view.
Show partially decoded data after the help text
Safely decode commit blobs for ""Show Commit""

Ref

""Show commit"" (and the details panels from the ""Repo History"") are
read-only views.  Throwing is not an option here as seen in.

Instead show a warning and the partially (""safe"") decoded output.","Improve UX when we can't decode a diff or patch.  This affects the diff and inline
diff view, the commit message view, and the ""Show Commit"" panel/view.  ()"
"Fix: Correctly draw gutter for initial revision of a file

`previous_commit` can return empty for the initial revision of a file.
`get_file_content_at_commit` though returns the current revision of a
file if the second arg is empty.

We special case here, and return the empty string as previous version
which in turns marks every line as newly added.
Let `previous_commit`/`next_commit` return `Optional[str]`

Instead of returning the empty string for failure, just return `None`.
This makes it at least clear for the caller that we have to expect
such special values here.  (In our case, `get_file_content_at_commit`
also accepts `None` as input so it would not have catched anything.)
Fix type of `get_file_content_at_commit` accepting `None` as input
Rename constant `HUNKS_LINES_RE` to `EXTRACT_B_START`
Rename internal var `fpath` to `file_path` per our convention
Correctly use `line` instead of `row`
Add type comment
Move parsing hunk header logic to `parse_diff`
Rewrite `util.parse_diff` using the newer `core.parse_diff`
Fix ""inline-diff"" when showing the initial revision of a file

The refactoring just before this commit were necessary to make this
work.  The old `util.parse_diff` code could not parse such initial
diffs because it expected exactly 4 lines of file header information
in the diff.  (For new files there are more.)
Fix: Better viewport scrolling esp. when navigating back

Generally, the commands `prev_modification` and `next_modification`
already jump, so the `view.show` in `set_sel` was probably never needed.

That being said, the way we jump back likely overjumps because we call
`prev_modification` twice.  We thus revert exactly this second jump
using `dont_move_viewport`.

We slightly optimize the general jump using `show_region` to ensure
some context at the top or bottom of the view is visible.
Restore original state if there is nothing to jump to","Teach the ""inline_diff"" and the ""File Revision View"" to correctly recognize and handle initial revisions of a file. ()
Fix unwanted viewport jumps when using gs_next_hunk or gs_prev_hunk. ()"
"Add mv command.

Fixes.
set the default for max_items_in_tags_dashboard to -1

so that PackageDev will be able to pick up the setting
-1 is in effect of selecting all tags.
Fix: do not pass kwargs to Exception
Enhancement: select commit as base in rebase dashboard
Fix: handle cancellation of the panel
changelog: [IMP] add BREAKING syntax

Should result in something like:

```
changelog:
 -  [IMP] add BREAKING syntax
        BREAKING: Line1 ...
                  Line 2 ...
                  Line 3 ...
```
Fix: Use correct argument for blame all commits

For blame to detect moved or copied lines in all commits, the command
line argument is -CCC, this was changed to -CC in the blame refactor.

-C detects in the modifying commit
-CC detects in the modifying commit AND the commit that created the file
-CCC detects moved or copied lines in all commits
Fix: ignoring file was not working ()

* Fix: ignoring file was not working

close

* Refactor: set throw_on_stderr=False when checking autocrlf

.. global configuration; instead of catching all Exceptions
Fix: ""OS error"" message not going away ()

* Fix: OS error messeage not going awayy

* Revert ""Fix: OS error messeage not going awayy""

This reverts commit c5bb2af86a840392045b4c02315cc48e851824f8.

* Fix: OS error message not going away
Fix: Commit view respect the include_unstaged ()

Fix
Fix: find() returns index instead of True/False ()
add 2.16.6 message","Changes since 2.16.5:
New Feature:
Add mv command.
Fix:
various small fixes
Use correct argument for blame all commits
fix ignoring file functionality
don't show ""OS error"" in rebase view
Commit view respect the include_unstaged
Enhancement:
set the default for max_items_in_tags_dashboard to -1
select commit as base in rebase dashboard
Contributors:
Randy Lai
David Arnold
Eric Huss
David Devlin
Simon"
"cue: deprecate Value.FieldByName

Can be replaced by LookupPath.

Also
- make Def behave like LookupDef
- update some other deprecation comments
- copy over tests

Change-Id: If7fa60fda28c9fea1b5328a41d79f52fafde394b
Reviewed-on: https://cue-review.googlesource.com/c/cue/+/9349
Reviewed-by: CUE cueckoo <cueckoo@gmail.com>
Reviewed-by: Paul Jolly <paul@myitcv.org.uk>
internal/core/export: export floats as float literals

This avoids round-tripping problems when floats can
be represented as integers.

Fixes

The real solution is probably to make integer a direct
subclass of float. This, however, is a far more substantial
change. See.

Change-Id: I1fa532677a4ba2dcbe85446fcd7134f5bc3a542d
Reviewed-on: https://cue-review.googlesource.com/c/cue/+/9381
Reviewed-by: CUE cueckoo <cueckoo@gmail.com>
Reviewed-by: Paul Jolly <paul@myitcv.org.uk>
internal/core/export: fix decl export printing and extraction

Fixes

A few related fixes:

- Extract from all evaluated structs, not just unevaluated
conjuncts, which results in dropping merged values.
(Note that unlike with fields attributes, the the declaration
attributes are value-bound, and thus need to be included.)

- Decl attrs were not always printed in export. This has now
been fixed.

- Changed the (internal) API to accept a Vertex, instead
of a list of conjuncts, which is a better abstraction.

Change-Id: Id598fefa88aff88aefd126fb80f1637b3f50c7fb
Reviewed-on: https://cue-review.googlesource.com/c/cue/+/9382
Reviewed-by: CUE cueckoo <cueckoo@gmail.com>
Reviewed-by: Paul Jolly <paul@myitcv.org.uk>
Reviewed-by: Marcel van Lohuizen <mpvl@golang.org>","Not a big release, just a couple of API bug fixes.
Changelog
c8b7fe0 internal/core/export: export floats as float literals
f1d3d81 internal/core/export: fix decl export printing and extraction"
"v7.2.2.0

Fix haproxy command
v7.2.2.0

https://roxy-wi.org/changelog_2_2
v7.2.2.0: Update WAF nginx module path in Ansible scripts

Path of the WAF nginx module in Ansible scripts has been updated from NGINX_PATH to SERVICE_PATH. This refactoring enhances the organization of the configuration files and improves code base understanding. Changes have been applied in the WAF configuration and service execution files.
v7.2.2.0: Refactor JavaScript code and adjust paths

This commit updates variable declarations from 'var' to 'let' in 'install.js' for better scope control. It additionally includes error-handling for undefined 'select_id' in 'parseAnsibleJsonOutput' function. The 'waf.js' file is moved to the 'app/static/js' directory and paths are updated accordingly in both 'waf.js' and 'waf.html'. The success handler in 'waf.js' is also updated to use 'parseAnsibleJsonOutput'.
v7.2.2.0: Update paths in waf.js file

The paths for waf.js and the loading image in waf.js have been updated to point to the correct locations. Also, unnecessary code related to the AJAX calls for metrics and installation has been removed, simplifying the code structure.
v7.2.2.0: Add timezone support to WAF rule configuration

The update adds timezone handling for web application firewall (WAF) rule configurations using roxy_wi_tools.GetDate method. This provides flexibility to manage configurations based on the specified timezone in SQL setting.
v7.2.2.0: Update error handling in waf.js and fix favicon and script paths

Refactored error handling in the waf.js file to simplify and reduce conditional checks. Also updated the paths for favicon images and included scripts to ensure accurate addressing, enhancing the consistency and reliability of the application's behavior.","The Whois tool has been added to the Nettools
The possibility to clone settings for S3 backup
Refactoring WAF installation"
"v7.3.0.0: Update UDP terminology in language templates

This commit changes the term ""UDP balancers"" to ""UDP listeners"" across all language templates. This adjustment ensures consistency and correctness in how we refer to this network entity in different languages.
v7.3.0.1

https://roxy-wi.org/changelog_3_1
v7.3.1.0: Refactor error handling and improve README.md readability

The error handling has been refactored in the Roxywi overview and routes files to raise and return more comprehensive exceptions. Unnecessary commented out JSON parsing code in the service installation file has been removed for better code clarity. Aside from these, various minor grammar and formatting fixes have been made to the README.md to improve readability.
v7.3.1.0: Refactor server-side code to use JSON-based APIs

The commit refactors the server-side modules of the Roxy-WI web interface to use JSON-based APIs for improved data exchange. Specifically, methods for user, group and SSH management have been updated to accept and return JSON data. Simultaneously, error handling is improved to give more informative responses instead of plain strings. The client-side JavaScript code is also refactored to accommodate these changes. Additionally, some minor corrections are made in the UI templates.
v7.3.1.0: Refactor and optimize server applications for better error handling and accuracy

The code changes focus on enhancing the server application's functionality by improving the error handling mechanism and streamlining the logic. Modifications include refining how servers get created, updated, and deleted, optimizing how ssh related actions are performed, and ensuring more accurate server scanning. The changes help reduce potential errors and make the application more efficient.
v7.3.1.0: Refactor and optimize server applications for better error handling and accuracy

The code changes focus on enhancing the server application's functionality by improving the error handling mechanism and streamlining the logic. Modifications include refining how servers get created, updated, and deleted, optimizing how ssh related actions are performed, and ensuring more accurate server scanning. The changes help reduce potential errors and make the application more efficient.
v7.3.1.0: Return insert result in db module

Modified the cred module in the db modules package. The insert statement under the try block was updated to return the result of the .execute() method. This will allow for better handling and control of the execution flow depending on the result of the insert operation.
v7.3.1.0: Remove OpenVPN code and update error handling in alert system

This commit removes unneeded OpenVPN related code and improves error handling in the alert system. All OpenVPN related functions and html files have been removed. Also, changes are made in the alerting module to raise exceptions instead of returning error messages, which provides a more pythonic way of error handling.
v7.3.1.0: Improve error handling and streamline data formatting

This update reviews and adjusts multiple code segments across the project. The improvements are mainly focused on error handling with more informative exceptions and error messages. Additionally, data formatting and retrieval have been streamlined, mainly regarding JSON data preparation and use in several functions, which should expedite the data processing and enhance the code maintainability. Minor changes were also done on the front-end logic for error handling and improved user interaction.","The possibility to use VIP address as outgoing instead of server's IP
Incoming and outgoing connections are updated automatically on the HAProxy overview page
Refactoring S3 backup installation"
"v7.3.1.0: Improve error handling and streamline data formatting

This update reviews and adjusts multiple code segments across the project. The improvements are mainly focused on error handling with more informative exceptions and error messages. Additionally, data formatting and retrieval have been streamlined, mainly regarding JSON data preparation and use in several functions, which should expedite the data processing and enhance the code maintainability. Minor changes were also done on the front-end logic for error handling and improved user interaction.
v7.3.2.0

https://roxy-wi.org/changelog_3_2
v7.3.2.0: Update nginx version in ansible-galaxy install command

The version of nginx being installed via the ansible-galaxy command in the installation.py file has been updated. The version number has been changed from 0.23.2 to 0.24.2, adhering to up-to-date libraries and compatibility improvements that the new version provides.
v7.3.2.0: Refactor auth.py and rollback version in installation.py

In auth.py, removed an unnecessary pass statement and reassigned unused bind variables. Also, added a check to assign a default value to 'session_ttl' if it is None. In installation.py, rolled back the nginxinc.nginx version used during ansible galaxy installation from 0.24.2 to 0.24.1.
v7.3.2.0: Refactor user_id retrieval function call

The user id retrieval function, get_user_id_by_username, in the config module was refactored. The changes included the removal of unnecessary use of keyword argument on a function call. This change simplifies the code, making it more readable and easier to understand.
v7.3.2.0: Add user parameter to save_config route

Imported user module to the routes module and added a user parameter decorator to the save_config route. This parameter fetches the user ID, which is then used to fetch the username. This username is passed to the upload_and_restart functions as a login argument.
v7.3.2.0: Enhance user parameter handling in various routes

Added decorator `@get_user_params()` to various route handlers in `routes.py`. Adjusted user handling in `config.py` by eliminating checks for 'login' and directly accessing user parameters from Flask's global variable `g`. Also moved user retrieval process from `routes.py` to lower level operations allowing for better abstraction and less redundancy.
v7.3.2.0: Refactor javascript code and update error handling in API

This commit includes two major changes. Javascript code in udp.js has been refactored to fix the sequence of operations. We have moved the getScript function inside the bracket to ensure smoother operation. Also, error handling in api_funct.py has been simplified and made more consistent by passing json.loads instead of raw strings to install_service method, and by directly setting 'e' as a value in case of exceptions. A minor style change has also been added on ha_cluster.html.
v7.3.2.0: Refactor action_service method in roxy module

Refactoring of the function 'action_service' has been completed in the roxywi module. The function for different actions ('start', 'stop', and 'restart') has been replaced by a dictionary for more clean and efficient code. This change also enhances code readability and maintainability.","Refactoring Filesystem backup installation
Refactoring working with Git
The possibility to view UDP balancer status"
"v7.0.0.0

Changelog: https://roxy-wi.org/changelog.0.0
v7.0.1.0

Changelog: https://roxy-wi.org/changelog.0.1
v7.0.1.0

Changelog: https://roxy-wi.org/changelog.0.1
v7.0.1.0

Changelog: https://roxy-wi.org/changelog.0.1
v7.0.1.0

Changelog: https://roxy-wi.org/changelog.0.1
v7.0.1.0

Changelog: https://roxy-wi.org/changelog.0.1
v7.0.1.0

Changelog: https://roxy-wi.org/changelog.0.1
v7.0.1.0

Changelog: https://roxy-wi.org/changelog.0.1
v7.0.1.0

Changelog: https://roxy-wi.org/changelog.0.1
v7.0.1.0

Changelog: https://roxy-wi.org/changelog.0.1
v7.0.1.0

Changelog: https://roxy-wi.org/changelog.0.1
v7.0.1.0

Fix showing Roxy-WI tools versions on the Tools and Update pages
v7.0.1.0

Set correct versions in requirements for EL7, 8
v7.0.1.0

Fix viewing internal logs
v7.0.1.0

Add correct installation command
v7.0.1.0

Fix update tools versions for sqlite db","The possibility to update Roxy-WI logs on the Overview page
Background jobs have been added. Actions like deleting old logs, history, check versions, etc now work in background"
"Update default API node to api.bts.mobi
Remove link to hackthedex.io

The site was long down and the domain name is lost
Remove text about bounty
Update gitignore and publish CLA
fix for issue using Notify websocket as per example in docs
excluding virtual env directory to git ignore
fix: fix
fix:
fix:
fix: linting via black
ci: Integrate semantic-release
docs: release flow and conventional commits
style: linting via black
Revert ""fix: fix""

This reverts commit 3b38b9939175a3d67bad15091fa9c544ff9c4afc.
fix: unitests now working
ci: build every push in gh actions
style: no more globbing for flake8
ci: use PAT instead of GITHUB_TOKEN to get push permissions on master
ci: try make semantic-release work with protected branch
0.7.1

Automatically generated by python-semantic-release","Fix
Unitests now working (77716a6)
Linting via black (6b4ac7f)
Fix (3b38b99)
Documentation
Release flow and conventional commits (4958a6e)"
"v11.2.0
refactor: remove default get method from fetch
refactor: use destructuring
refactor: use Array.prototype.map to iterate layers
refactor: use array destructuring
refactor: replace aws-sdk lambda client with more lightweight @aws-sdk scoped package
v11.2.1","Maintenance Improvements
remove default get method from fetch (8f40327)
replace aws-sdk lambda client with more lightweight @aws-sdk scoped package (1a482ad)
use array destructuring (97de51b)
use Array.prototype.map to iterate layers (6fc9e90)
use destructuring (414cf4a)"
"v9.2.2
refactor: path.resolve parameter
refactor: remove default parameter
refactor: path.resolve parameter, Part 2
refactor: use function statements
fix: [ERR_MISSING_ARGS]: The ""message"" argument must be specified when using --useChildProcesses ()

Co-authored-by: dnalborczyk <dnalborczyk@gmail.com>
v9.2.3","Bug Fixes
[ERR_MISSING_ARGS]: The ""message"" argument must be specified when using --useChildProcesses () (91ae1e1) thank you @khanguyen88
Maintenance Improvements
path.resolve parameter (733dcdf)
path.resolve parameter, Part 2 (48ee32f)
remove default parameter (b657cbf)
use function statements (d213921)"
"v2.2.1
readme: add badge
v2.2.2","Major bug fix concerning timeouts and babel runtime. See
In 2016 shared mutable state is still the root of all evil..."
"v4.8.0
v4.8.1","Bugfixes
Using resource proxy, query strings were not passed along. This update now will pass query strings. See"
"3.5.2
revert hapi dep to 15.2.0

fixes
3.5.3","Bugfixes
Reverted the HapiJs dependecy to a node v4.3.2-compatible version."
"v9.1.0
fix: worker-runner timout option ()
fix: round getRemainingTimeInMillis to nearest integer
fix: use Math.floor()
refactor: use object shorthand for getRemainingTimeInMillis
fix: default lambda timeout
doc: process.env.IS_OFFLINE description
doc: use IS_OFFLINE env variable in example
doc: remove some comments
doc: import env from node:process
doc: fix github actions build badge
doc: fix badge link
doc: import ApiGatewayManagementApi from aws-sdk
doc: add markdown yml file extension
doc: add java to supported runtimes
doc: remove whitespace
doc: nit
doc: extend lambda.invoke example
doc: add markdown yml file extension
doc: add initial section about run modes for node.js handlers
doc: add missing run modes link
doc: fix spelling
test: add tests for getRemainingTimeInMillis with worker threads
refactor: use try/finally
refactor: replace execaSync with execa (promise) ()
chore: bump deps
refactor: nit
test: move java tests to runtimes
test: move ruby tests to runtimes
test: move python tests to runtimes
test: move go tests to runtimes
test: fix plugin path
test: remove .only
test: fix go plugin path
test: fix java tests
test: move test helpers to test root
doc: fix versions
v9.1.1","Bug Fixes
default lambda timeout (ad217e2)
round getRemainingTimeInMillis to nearest integer (2106504)
use Math.floor() (f6145d9)
worker-runner timout option () (3437822) thank you @moroine
Maintenance Improvements
nit (6d82e3e)
replace execaSync with execa (promise) () (7fe54c5)
use object shorthand for getRemainingTimeInMillis (a9078df)
use try/finally (58698fa)"
"v12.0.1
test: scenario tests, revert middy to v3 -> node v14 compat
test: add http code test with timeout
chore: bump deps
chore: fix broken test ()
refactor: order nit
chore: formatting
refactor(alb): remove unused last request options
fix: set status code 200 for empty responses ()
v12.0.2","Bug Fixes
set status code 200 for empty responses () (5c1efcf)
Maintenance Improvements
alb: remove unused last request options (cc5064c)
order nit (5fe57af)"
"v13.5.0
Update README.md
fix: skip adding authorizer to event if no authorizer is configured ()

* dont add authorizor to event if no authorizer is configured

* update test descriptions

* Update src/events/http/HttpServer.js

Co-authored-by: Dorian <46839236+DorianMazur@users.noreply.github.com>

---------

Co-authored-by: Dorian <46839236+DorianMazur@users.noreply.github.com>
refactor: use provided log utils ()

* refactor: use provided log utils

* refactor: use provided log utils

* chore: prettier fix

* fix: change log to log.debug

* chore: add .DS_Store to gitignore

---------

Co-authored-by: MazurDorian <mazur.dorian15@gmail.com>
v13.5.1","Bug Fixes
skip adding authorizer to event if no authorizer is configured () (68f8f53) thank you @cnuss
Maintenance Improvements
use provided log utils () (93fafdb) thank you @czubocha"
"v4.10.2
add 4.10.2 changelog
demo: add new demos
bugfix: Fixed the problem of alternative refresh without any configuration
updated setting drawer Italian locale ()
bugfix: fix header style error in mobile
bugfix: change a to span tag

close
bugfix: Fixed issue where scroll bar would not appear in fixed menu mode
bugfix: when path is url,no need wrap /
bugfix: fix ? duplicate question
add 4.10.3 chanhelog
v4.10.3","add 4.10.3 chanhelog  540fc41
bugfix: fix ? duplicate question  21c2ae5
bugfix: when path is url,no need wrap /  099d573
bugfix: Fixed issue where scroll bar would not appear in fixed menu mode  e638aca
bugfix: change a to span tag  2c0c42b
bugfix: fix header style error in mobile  37ffbf2
updated setting drawer Italian locale ()  958c8c0
bugfix: Fixed the problem of alternative refresh without any configuration  86275f4
demo: add new demos  ad8ccc6
add 4.10.2 changelog  a727e88"
"v4.9.10
add menuDateRender test
big test router data
fix lint error
bugifx: fix mobile menu ()
feat: decoupling item path ()

* decoupling item path

* update snapshot
bugfix: remove height for layout

ref ant-design/ant-design-pro
feat: add children Wrapped div className ()

* add children Wrapped div className

* update snapshot
bigfix: layout add BFC
add 4.9.11 changelog
update snapshot
v4.9.11","add 4.9.11 changelog  d606df2
bigfix: layout add BFC  abd9eb0
feat: add children Wrapped div className ()  2372e69
bugfix: remove height for layout  2752721
feat: decoupling item path ()  8bcdfb2
bugifx: fix mobile menu ()  f985046
fix lint error  6783c23
big test router data  27cb868
add menuDateRender test  bb88440"
"fix(vtk.js): bump vtk.js to 26.9.15
chore(babelrc): avoid warnings
fix(createViewerTest): bump timeout","Bug Fixes
createViewerTest: bump timeout (48ed757)
vtk.js: bump vtk.js to 26.9.15 (e08eea0)"
"fix(createRenderingMachine): wait on requestAnimationFrame to render again
fix(ImageRenderingActor): avoid camera modified
perf(ImageRenderingActor): avoid slow unused range calculation
fix(Viewer): remove app level calls to renderWindow.render()","Bug Fixes
createRenderingMachine: wait on requestAnimationFrame to render again (899cae5)
ImageRenderingActor: avoid camera modified (dff35c4)
Viewer: remove app level calls to renderWindow.render() (72ea2e4)
Performance Improvements
ImageRenderingActor: avoid slow unused range calculation (0a00194)"
"fix(checkForWebGL): throw Error on failure
fix(viewer): Add background color toggle button

Adds a main ui button that allows toggling between a set of pre-defined
background colors (currently black, white, and grey).  Also emits a new
event 'backgroundColorChanged', as well as making sure to re-render the
scene when the existing publicAPI method for changing the background is
called.
fix(viewer): Expose labelMapBlend event and set method

Also internally renames labelMapOpacity to labelMapBlend","Bug Fixes
checkForWebGL: throw Error on failure (b4dba84)
viewer: Add background color toggle button (4d0c87e)
viewer: Expose labelMapBlend event and set method (e8463e8)"
"Remap sat_name for Tevel sats in LOTW controller
Update migration.php to version 122
Reupload Tevel QSOs to LOTW
Fix typo in Lotw.php controller for Tevel sats
[Visual decorations] Small decoration for header of the log overview view.
Transformed decoration to CSS class
Sepatate CSS classes for decoration station logbook name and station location name.
Add mode to CAT banner
We need to update QSO dates on cert update as well
Fix typos
Fix https://github.com/m0urs/Cloudlog/issues/147
Add German translations for lately added lang stuff
Add missing lang tags
Make eQSL buld download fucntion backwards compatible
[Contesting] Fixed sorting when adding qsos to table
Revert ""Merge pull request from cats-shadow/view-decoration""

This reverts commit 596480f029a0de06312cb4e8d954d368b5f8c9ab, reversing
changes made to a8f93191c242a9c1e080a9fcc4e700c6f34e4cda.
Fix missing span and remove not needed SQL column
Fix some typos and naming for activated grids
Add German
Fix confirmed activated grids function
[LoTW] Added table with users. Query to find unconfirmed QSOs and L marking in advanced logbook
Use datetime for db column and fix typos
[QSO Display] Added Lotw info in popup
Make contest table use padding for SRX and STX
Add some space before search box
[Advanced Logbook] Added formatting of date/time and country name
[LoTW mouse over] Formatted date
[Advanced Logbook] Fixed sorting for custom date format
[LoTW] use Ajax for manual sync

When you click the LoTW manual sync button it now loads the contents into the page using ajax get request using htmx.
[LoTW] Makes the cert table fill the card box rather than have a border
Link QSOs in eQSL card view
[Dashboard] Update radio frequency display every 5 seconds
[Dashboard] Load the radio table on page load
Update index.php
Show radio info updated every 5mins on public display
Update Visitor.php
fixed bugs
removed as it doesn't appear to be used","What's Changed
Make SAT filter appear also if propmode SAT is selected by @phl0 in
[User selectable columns] Add Location to possible columns by @dg0tm in
Fixes a few things that I forgot in the release the first time. by @magicbug in
Remove useless file writing by @phl0 in
added ""deleted DXCC"" translation by @cats-shadow in
[Translation] Translated the menu and header by @AndreasK79 in
[Translations][Russian] Added menu translation by @cats-shadow in
[QSL Card] Adjusted class and css to make QSL card images more responsive by @AndreasK79 in
Eqsl card download by @phl0 in
Deleted badge dxcc award by @phl0 in
Better language support by @AndreasK79 in
[Translation][Russian] Added ""eQSL view"" menu item translatiom by @cats-shadow in
[QSL Card] Centered QSL image at QSO data block. by @cats-shadow in
Remap & Reupload Tevel Sat QSOs to LOTW by @ve1cwj in
[Translation][Russian] mistype corrected by @cats-shadow in
[Translation][Russian] Statistics (partially), User, Options views by @cats-shadow in
[Visual decorations] Small decoration for header of the log overview … by @cats-shadow in
[CAT] Add mode to CAT banner by @phl0 in
[LotW] We need to update QSO dates on cert update as well by @phl0 in
German translations by @phl0 in
Add one more digit to frequency display in CAT Banner by @m0urs in
eQSL bulk download function by @phl0 in
Make eQSL buld download fucntion backwards compatible by @phl0 in
[Contesting] Fixed sorting when adding qsos to table by @AndreasK79 in
Update Distances_model : change ""round"" to ""ceil"" by @abarrau in
Fix missing span and remove not needed SQL column by @phl0 in
Fix activators by @phl0 in
Make contest table use padding for SRX and STX by @phl0 in
Add some space before search box by @phl0 in
Lotw information by @AndreasK79 in
Link QSOs in eQSL card view by @phl0 in
Merge dev into master by @magicbug in
Full Changelog: 2.4.2...2.4.3"
"Added the possibility of sending data to the ""qso"" method API also in www-x-form-urlencoded format to allow the automatic sending of QSOs via software such as Log4OM
minor translation correction
Added flags to QSO tables and in detail
formatted code better
Removed redundant code
tag 2.6.14
[Station Locations] catched showing us grid in testing","What's Changed
Added flags to QSO tables and in detail (You can enable this in your account settings) by @emics in
Added support in Station Locations for more country states by @magicbug
Improved Dashboard automatic updating by @magicbug
Fixed bug with Hamsat where it was checking 6 char grids instead of first 4 by @magicbug
Probably forgot a few other bits.
Full Changelog: 2.6.13...2.6.14"
"Sync local fallback files - 2022-04-03
Add test case which causes fatal error in DOM
Skip noscript fallback images from being considered for hero optimization","Bugfixes
Harden hero image optimization when noscript > img fallbacks are present []
Meta
Sync local fallback files []
Full Changelog: 0.11.0...0.11.1"
"google: fix nil name () ()

Co-authored-by: Caleb Doxsey <cdoxsey@pomerium.com>
docs: add reference to the go-sdk () ()

Signed-off-by: Bobby DeSimone <bobbydesimone@gmail.com>

Co-authored-by: bobby <1544881+desimone@users.noreply.github.com>
ci: fix usage of env variable in latest tag () ()

Co-authored-by: Travis Groth <travisgroth@users.noreply.github.com>
deployment: set maintainer field in packages () ()

Co-authored-by: Travis Groth <travisgroth@users.noreply.github.com>
ci: pin goreleaser ahead of go 1.16 () ()

Co-authored-by: Travis Groth <travisgroth@users.noreply.github.com>","NOTE: Due to a release error, a version of v0.12.2 was briefly published off the incorrect commit.  The correct version is 0.12.2-1613583129+2060f4e.
Full Changelog
Fixed
[Backport 0-12-0] deployment: set maintainer field in packages (@github-actions[bot])
Changed
[Backport 0-12-0] ci: fix usage of env variable in latest tag (@github-actions[bot])
[Backport 0-12-0] docs: add reference to the go-sdk (@github-actions[bot])"
"v0.10.0 ()

Signed-off-by: Bobby DeSimone <bobbydesimone@gmail.com>
config: omit empty subpolicies in yaml/json () ()

Co-authored-by: Travis Groth <travisgroth@users.noreply.github.com>
authorize: add databroker url check () ()

Signed-off-by: Bobby DeSimone <bobbydesimone@gmail.com>

Co-authored-by: bobby <1544881+desimone@users.noreply.github.com>
docs: prepare for enterprise / oss split () ()

Signed-off-by: Bobby DeSimone <bobbydesimone@gmail.com>

Co-authored-by: bobby <1544881+desimone@users.noreply.github.com>
docs: add / redirect () ()

Signed-off-by: Bobby DeSimone <bobbydesimone@gmail.com>

Co-authored-by: bobby <1544881+desimone@users.noreply.github.com>
docs: fix redirect loop () ()

Signed-off-by: Bobby DeSimone <bobbydesimone@gmail.com>

Co-authored-by: bobby <1544881+desimone@users.noreply.github.com>
docs: image, sitemap and redirect fixes () ()

* docs: fix image linkes for cdn

* docs: use relative top level redirect

* docs: generate sitemap under /docs/

Co-authored-by: Travis Groth <travisgroth@users.noreply.github.com>
docs: fix in-action video () ()

Co-authored-by: Travis Groth <travisgroth@users.noreply.github.com>
docs: use .com sitemap hostname () ()

Signed-off-by: Bobby DeSimone <bobbydesimone@gmail.com>

Co-authored-by: bobby <1544881+desimone@users.noreply.github.com>
autocert: fix  bootstrapped cache store path () ()

Signed-off-by: Bobby DeSimone <bobbydesimone@gmail.com>

Co-authored-by: bobby <1544881+desimone@users.noreply.github.com>
azure: support deriving credentials from client id, client secret and provider url () ()
authorize: log users and groups ()

Signed-off-by: Bobby DeSimone <bobbydesimone@gmail.com>
pkg/storage/redis: update tests to use local certs + upstream image () ()

Co-authored-by: Travis Groth <travisgroth@users.noreply.github.com>
docs: v0.10.1 changelog ()

* Update changelog for v0.10.1

Co-authored-by: bobby <1544881+desimone@users.noreply.github.com>

Co-authored-by: bobby <1544881+desimone@users.noreply.github.com>","Changes
config: omit empty subpolicies in yaml/json @travisgroth GH-1230
New
authorize: add databroker url check @desimone GH-1231
azure: support deriving credentials from client id, client secret and provider url @calebdoxsey GH-1300
Fixed
autocert: fix  bootstrapped cache store path @desimone GH-1291
authorize: log users and groups @desimone GH-1303
Documentation
docs: prepare for enterprise / oss split @desimone GH-1239
docs: add / redirect @desimone GH-1242
docs: remove enterprise button @desimone GH-1246
docs: image, sitemap and redirect fixes @travisgroth GH-1265
docs: fix in-action video @travisgroth GH-1269
docs: use .com sitemap hostname @desimone GH-1275"
"Update changelog for v0.10.5 ()
chore(deps): envoy 1.15.1 () ()

Signed-off-by: Bobby DeSimone <bobbydesimone@gmail.com>

Co-authored-by: bobby <1544881+desimone@users.noreply.github.com>
deps: update envoy arm64 to v1.15.1 () ()

Co-authored-by: Travis Groth <travisgroth@users.noreply.github.com>
Update changelog for v0.10.6 ()","Security
Envoy released a security update to addresses the following CVE(s):
CVE-2020-25017 (CVSS score 6.5, Medium): Incorrect handling of duplicate HTTP headers
This patch updates the underlying embedded version of Envoy to 1.15.1. If you instead are using the Envoy from your local $PATH you are encouraged to upgrade that binary as well.
deps: envoy 1.15.1 @desimone GH-1473
deps: update envoy arm64 to v1.15.1 @travisgroth GH-1475"
"docs: update changelog for 0.10.2 ()
docs: add nginx example () ()

* docs: add nginx example

Co-authored-by: bobby <1544881+desimone@users.noreply.github.com>

Co-authored-by: Travis Groth <travisgroth@users.noreply.github.com>
Co-authored-by: bobby <1544881+desimone@users.noreply.github.com>
internal/controlplane: add telemetry http handler () ()

Co-authored-by: Travis Groth <travisgroth@users.noreply.github.com>
internal/directory/okta: accept non-json service account () ()

Fixes

Co-authored-by: Cuong Manh Le <cuong.manhle.vn@gmail.com>
internal/directory/okta: remove rate limiter () ()

We did honor the rate limit header from okta, so don't bother to add our
rate limiter there.
docs: update azure docs () ()

Signed-off-by: Bobby DeSimone <bobbydesimone@gmail.com>

Co-authored-by: bobby <1544881+desimone@users.noreply.github.com>
Desimone/authenticate default logout ()

* authenticate: fix unset post_logout_redirect_uri
* don't show url if does not exist
Signed-off-by: Bobby DeSimone <bobbydesimone@gmail.com>
proxy: remove impersonate headers for kubernetes () ()

* proxy: remove impersonate headers for kubernetes

* master on frontend/statik

Co-authored-by: Caleb Doxsey <cdoxsey@pomerium.com>
ci: publish cloudrun latest tag () ()

* ci: publish cloudrun latest tag

Co-authored-by: Travis Groth <travisgroth@users.noreply.github.com>
Update changelog for v0.10.3 ()","Changes
ci: publish cloudrun latest tag @travisgroth GH-1398
docs: add nginx example @travisgroth GH-1329
docs: update azure docs @desimone GH-1377
internal/directory/okta: accept non-json service account @cuonglm GH-1359
internal/directory/okta: remove rate limiter @cuonglm GH-1370
Fixed
authenticate: fix unset post_logout_redirect_uri @desimone GH-1390
internal/controlplane: add telemetry http handler @travisgroth GH-1353
Security
proxy: remove impersonate headers for kubernetes @calebdoxsey GH-1394"
"as: Do not propagate the key unwrapping error
pba: Fix report deadlock
pba: Propagate cancelation to publisher workers
all: Use SameSite=Lax for all cookies
all: Use SameSite=None for OAuth state cookies
ci: Remove arm64 snapshots
console: Fix gateway secrets permission issue

Check rights for reading and writing gateway secrets before fetching or submitting
ci: Skip building Mage on cache hit
ci: Remove Coveralls from Go workflow
ci: Only run Proto workflow when relevant files changed
dev: Update CODEOWNERS
dev: Speed up end-to-end tests
ci: Add Go build cache
dev: Enable end-to-end test parallelization
all: Change signature of log interface
dev: Replace mock logger with memory handler
all: Remove multi log handler
all: Remove test log entry
all: Require log handler when setting up logger
all: Remove global logger
all: Add new log formats
dev: Fix reading logs from end-to-end tests
console: Fix pseudo rights selection
dev: bump @storybook/addon-actions from 5.3.21 to 6.2.9

Bumps [@storybook/addon-actions](https://github.com/storybookjs/storybook/tree/HEAD/addons/actions) from 5.3.21 to 6.2.9.
- [Release notes](https://github.com/storybookjs/storybook/releases)
- [Changelog](https://github.com/storybookjs/storybook/blob/next/CHANGELOG.md)
- [Commits](https://github.com/storybookjs/storybook/commits/v6.2.9/addons/actions)

Signed-off-by: dependabot[bot] <support@github.com>
dev: bump eslint from 7.25.0 to 7.28.0

Bumps [eslint](https://github.com/eslint/eslint) from 7.25.0 to 7.28.0.
- [Release notes](https://github.com/eslint/eslint/releases)
- [Changelog](https://github.com/eslint/eslint/blob/master/CHANGELOG.md)
- [Commits](https://github.com/eslint/eslint/compare/v7.25.0...v7.28.0)

---
updated-dependencies:
- dependency-name: eslint
  dependency-type: direct:development
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>
dev: bump dns-packet from 1.3.1 to 1.3.4

Bumps [dns-packet](https://github.com/mafintosh/dns-packet) from 1.3.1 to 1.3.4.
- [Release notes](https://github.com/mafintosh/dns-packet/releases)
- [Changelog](https://github.com/mafintosh/dns-packet/blob/master/CHANGELOG.md)
- [Commits](https://github.com/mafintosh/dns-packet/compare/v1.3.1...v1.3.4)

Signed-off-by: dependabot[bot] <support@github.com>
dev: Remove usage of isolated yarn dependency in tooling
dev: Disable PR labeling workflow for dependabot PRs
ns,as: Add uplink latency histograms
ns: Reduce buckets for uplink_gateways metric
ci: Add release signing
pba: Fix uneven balance in message handler and reporter worker pools
dev: Update changelog
ci,dev: Initialize and cache device repository index outside Docker
is: Clear EUI in gateway rights query
console: Adjust object diff function
console: Fix attributes handling applications
console: Fix attributes handling gateways
util: Extend default values for gateway fields
console: Fix attributes handling devices
console,account: Extend modal component props
util,console: Add purge methods
console: Extend feature checks

Add entry to check if the user can purge entities
console: Add delete-modal-button component
console: Change delete modal for organizations
console: Change delete modal for gateways
console: Change delete modal for applications
dev: Update locales
console: Add tooltips to device selection in device repo
api: Make claiming API consistent with TTS
cli: Make gateways claim command consistent with TTS
dev: bump postcss from 7.0.35 to 7.0.36

Bumps [postcss](https://github.com/postcss/postcss) from 7.0.35 to 7.0.36.
- [Release notes](https://github.com/postcss/postcss/releases)
- [Changelog](https://github.com/postcss/postcss/blob/main/CHANGELOG.md)
- [Commits](https://github.com/postcss/postcss/compare/7.0.35...7.0.36)

---
updated-dependencies:
- dependency-name: postcss
  dependency-type: indirect
...

Signed-off-by: dependabot[bot] <support@github.com>
dev: Update messages
cli: Update fetching CUPS trust from file
ns: Disable ADR for multicast devices
dev: Update changelog
data: Update external repositories
all: Bump to version 3.13.2","Added
Configurable log formats with the log.format configuration option.
The console format that prints logs as more human-friendly text. This is the new default.
The json format that prints logs as JSON. This is the recommended format for production deployments.
The old format (deprecated). This can be used if you need to adapt your log analysis tooling before v3.14.
ttn_lw_gs_ns_uplink_latency_seconds, ttn_lw_ns_as_uplink_latency_seconds and ttn_lw_gtw_as_uplink_latency_seconds metrics to track latency of uplink processing.
Signing of releases.
Hard delete option to delete applications, gateways and organizations in the Console.
Changed
Relaxed the cookie policy for cross-origin requests from Strict to Lax.
Changed the cookie policy for OAuth state to None.
Deprecated
The old log format is deprecated and will be removed in v3.14.
Fixed
Permissions issue for reading and writing gateway secrets in the Console.
Current and future rights selection for organization collaborators in the Console.
Current and future rights selection for user api keys in the Console.
Low or no throughput of message handling from Packet Broker when the ingress is high when Packet Broker Agent starts.
Unset ADR bit in downlink messages to multicast devices.
Docker images
docker pull thethingsnetwork/lorawan-stack:3.13
docker pull thethingsnetwork/lorawan-stack:3.13.2
docker pull ghcr.io/thethingsnetwork/lorawan-stack:3.13
docker pull ghcr.io/thethingsnetwork/lorawan-stack:3.13.2"
"cli: Make list of allowed values in storage commands consistent
api: Remove unused file
ns: Use uplink data rate index for ADR
api: Improve validation of CreateAPIKeyRequests
console,account: Fix byte input value handling in onChange
ci: Fix glob of public dir in tar.gz archives
ci: Upload proto files to S3
api: Add listed to PacketBrokerNetwork
pba: Get and set whether the home network is listed
console: Retrieve all webhook template fields
console: Use fields default values
api: Add optional field to webhook template fields
console: Fix side navigation restricted entries
console: Fix lorawan version handling
console: Display None in the rights field if the API key has no rights
util: Add as service to js sdk
console: Extend console api definitions

Add application server methods to encode/decode downlink/uplink
console: Add payload formatter testing form
dev: Update locales
console,account: Extend icons list
console,account: Add field-group component
gs: Pass local variable ref to event call
console: Close event stream when caller rights revoked
gs: Use different down instance in ScheduleDown
is: Add options to reject common passwords
console: Allow empty template fields
util: Only print actual/expected in verbose tests
api: Allow empty uplink frequency
ns: Fix `factory_preset_frequency` handling

- Assume `factory_preset_frequency` represents all enabled uplink
  channels on reset
- Merge with PHY channels instead of replacing
dev: Update jest dependency
data: Update external repositories
api: Add explicit validators for request messages with embedded messages
dev: Use dev protoc image
api: Skip validation of some empty fields
as: Add required uplink message to tests
ns: Set FPort in tests
is: Fix CUPS URI in Gateway test
console: Add required fields to simulateUplink message
console: Make hardcoded fields consistent
all: Bump to version 3.12.1","Added
Payload formatter testing functionality in the Console.
Options in the Identity Server to reject passwords that contain the user ID (is.user-registration.password-requirements.reject-user-id) or common passwords (is.user-registration.password-requirements.reject-common).
Changed
Network Server now takes uplink data rate index for ADR.
Event streams are now closed when the callers rights are revoked.
Fixed
It is no longer possible to accidentally create API keys without any rights.
Application overview page crashing for collaborators without certain rights.
mac_settings.factory_preset_frequencies handling in US-like bands.
Security
This release fixes an issue that prevented some request messages from being validated correctly, allowing invalid values in certain fields.
Release notes
Docker images
docker pull thethingsnetwork/lorawan-stack:3.12
docker pull thethingsnetwork/lorawan-stack:3.12.1
docker pull ghcr.io/thethingsnetwork/lorawan-stack:3.12
docker pull ghcr.io/thethingsnetwork/lorawan-stack:3.12.1"
"all: Enter release date of version 3.27.0 into the changelog
all: Ensure that jitter can be called
dev: bump @sentry/integrations from 7.57.0 to 7.61.0

Bumps [@sentry/integrations](https://github.com/getsentry/sentry-javascript) from 7.57.0 to 7.61.0.
- [Release notes](https://github.com/getsentry/sentry-javascript/releases)
- [Changelog](https://github.com/getsentry/sentry-javascript/blob/develop/CHANGELOG.md)
- [Commits](https://github.com/getsentry/sentry-javascript/compare/7.57.0...7.61.0)

---
updated-dependencies:
- dependency-name: ""@sentry/integrations""
  dependency-type: direct:production
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>
dev: bump eslint-plugin-jest from 27.2.2 to 27.2.3

Bumps [eslint-plugin-jest](https://github.com/jest-community/eslint-plugin-jest) from 27.2.2 to 27.2.3.
- [Release notes](https://github.com/jest-community/eslint-plugin-jest/releases)
- [Changelog](https://github.com/jest-community/eslint-plugin-jest/blob/main/CHANGELOG.md)
- [Commits](https://github.com/jest-community/eslint-plugin-jest/compare/v27.2.2...v27.2.3)

---
updated-dependencies:
- dependency-name: eslint-plugin-jest
  dependency-type: direct:development
  update-type: version-update:semver-patch
...

Signed-off-by: dependabot[bot] <support@github.com>
dev: bump @babel/eslint-parser from 7.22.5 to 7.22.9

Bumps [@babel/eslint-parser](https://github.com/babel/babel/tree/HEAD/eslint/babel-eslint-parser) from 7.22.5 to 7.22.9.
- [Release notes](https://github.com/babel/babel/releases)
- [Changelog](https://github.com/babel/babel/blob/main/CHANGELOG.md)
- [Commits](https://github.com/babel/babel/commits/v7.22.9/eslint/babel-eslint-parser)

---
updated-dependencies:
- dependency-name: ""@babel/eslint-parser""
  dependency-type: direct:development
  update-type: version-update:semver-patch
...

Signed-off-by: dependabot[bot] <support@github.com>
dev: bump jest from 29.6.0 to 29.6.2

Bumps [jest](https://github.com/facebook/jest/tree/HEAD/packages/jest) from 29.6.0 to 29.6.2.
- [Release notes](https://github.com/facebook/jest/releases)
- [Changelog](https://github.com/jestjs/jest/blob/main/CHANGELOG.md)
- [Commits](https://github.com/facebook/jest/commits/v29.6.2/packages/jest)

---
updated-dependencies:
- dependency-name: jest
  dependency-type: direct:development
  update-type: version-update:semver-patch
...

Signed-off-by: dependabot[bot] <support@github.com>
dev: bump cypress-io/github-action from 4 to 5

Bumps [cypress-io/github-action](https://github.com/cypress-io/github-action) from 4 to 5.
- [Release notes](https://github.com/cypress-io/github-action/releases)
- [Changelog](https://github.com/cypress-io/github-action/blob/master/CHANGELOG.md)
- [Commits](https://github.com/cypress-io/github-action/compare/v4...v5)

---
updated-dependencies:
- dependency-name: cypress-io/github-action
  dependency-type: direct:production
  update-type: version-update:semver-major
...

Signed-off-by: dependabot[bot] <support@github.com>
dev: bump gocloud.dev/pubsub/natspubsub from 0.30.0 to 0.32.0

Bumps [gocloud.dev/pubsub/natspubsub](https://github.com/google/go-cloud) from 0.30.0 to 0.32.0.
- [Release notes](https://github.com/google/go-cloud/releases)
- [Commits](https://github.com/google/go-cloud/compare/v0.30.0...v0.32.0)

---
updated-dependencies:
- dependency-name: gocloud.dev/pubsub/natspubsub
  dependency-type: direct:production
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>
dev: bump @babel/cli from 7.22.5 to 7.22.9

Bumps [@babel/cli](https://github.com/babel/babel/tree/HEAD/packages/babel-cli) from 7.22.5 to 7.22.9.
- [Release notes](https://github.com/babel/babel/releases)
- [Changelog](https://github.com/babel/babel/blob/main/CHANGELOG.md)
- [Commits](https://github.com/babel/babel/commits/v7.22.9/packages/babel-cli)

---
updated-dependencies:
- dependency-name: ""@babel/cli""
  dependency-type: direct:development
  update-type: version-update:semver-patch
...

Signed-off-by: dependabot[bot] <support@github.com>
console: Refactor application title section
console: Refactor gateway title section
console: Refactor organization title section
dev: Update locales
console: Fix middleware error
all: Update pull request template
console: Update e2e tests
console: Fix locales
dev: Tidy tools
console: Refactor modal button
console: Refactor key value map component
console: Refactor table component
dev: bump github.com/emersion/go-smtp from 0.16.0 to 0.17.0

Bumps [github.com/emersion/go-smtp](https://github.com/emersion/go-smtp) from 0.16.0 to 0.17.0.
- [Release notes](https://github.com/emersion/go-smtp/releases)
- [Commits](https://github.com/emersion/go-smtp/compare/v0.16.0...v0.17.0)

---
updated-dependencies:
- dependency-name: github.com/emersion/go-smtp
  dependency-type: direct:production
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>
dev: bump github.com/aws/aws-sdk-go from 1.44.294 to 1.44.314

Bumps [github.com/aws/aws-sdk-go](https://github.com/aws/aws-sdk-go) from 1.44.294 to 1.44.314.
- [Release notes](https://github.com/aws/aws-sdk-go/releases)
- [Commits](https://github.com/aws/aws-sdk-go/compare/v1.44.294...v1.44.314)

---
updated-dependencies:
- dependency-name: github.com/aws/aws-sdk-go
  dependency-type: direct:production
  update-type: version-update:semver-patch
...

Signed-off-by: dependabot[bot] <support@github.com>
dev: bump go.uber.org/automaxprocs from 1.5.2 to 1.5.3

Bumps [go.uber.org/automaxprocs](https://github.com/uber-go/automaxprocs) from 1.5.2 to 1.5.3.
- [Release notes](https://github.com/uber-go/automaxprocs/releases)
- [Changelog](https://github.com/uber-go/automaxprocs/blob/master/CHANGELOG.md)
- [Commits](https://github.com/uber-go/automaxprocs/compare/v1.5.2...v1.5.3)

---
updated-dependencies:
- dependency-name: go.uber.org/automaxprocs
  dependency-type: direct:production
  update-type: version-update:semver-patch
...

Signed-off-by: dependabot[bot] <support@github.com>
dev: Tidy tools
dev: Tidy tools
dev: Tidy tools
dev: bump github.com/getsentry/sentry-go from 0.22.0 to 0.23.0

Bumps [github.com/getsentry/sentry-go](https://github.com/getsentry/sentry-go) from 0.22.0 to 0.23.0.
- [Release notes](https://github.com/getsentry/sentry-go/releases)
- [Changelog](https://github.com/getsentry/sentry-go/blob/master/CHANGELOG.md)
- [Commits](https://github.com/getsentry/sentry-go/compare/v0.22.0...v0.23.0)

---
updated-dependencies:
- dependency-name: github.com/getsentry/sentry-go
  dependency-type: direct:production
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>
dev: Tidy tools
dev: bump google.golang.org/grpc from 1.56.2 to 1.57.0

Bumps [google.golang.org/grpc](https://github.com/grpc/grpc-go) from 1.56.2 to 1.57.0.
- [Release notes](https://github.com/grpc/grpc-go/releases)
- [Commits](https://github.com/grpc/grpc-go/compare/v1.56.2...v1.57.0)

---
updated-dependencies:
- dependency-name: google.golang.org/grpc
  dependency-type: direct:production
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>
dev: bump github.com/iancoleman/strcase from 0.2.0 to 0.3.0

Bumps [github.com/iancoleman/strcase](https://github.com/iancoleman/strcase) from 0.2.0 to 0.3.0.
- [Commits](https://github.com/iancoleman/strcase/compare/v0.2.0...v0.3.0)

---
updated-dependencies:
- dependency-name: github.com/iancoleman/strcase
  dependency-type: direct:production
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>
dev: bump github.com/nats-io/nats-server/v2 from 2.9.19 to 2.9.20

Bumps [github.com/nats-io/nats-server/v2](https://github.com/nats-io/nats-server) from 2.9.19 to 2.9.20.
- [Release notes](https://github.com/nats-io/nats-server/releases)
- [Changelog](https://github.com/nats-io/nats-server/blob/main/.goreleaser.yml)
- [Commits](https://github.com/nats-io/nats-server/compare/v2.9.19...v2.9.20)

---
updated-dependencies:
- dependency-name: github.com/nats-io/nats-server/v2
  dependency-type: direct:production
  update-type: version-update:semver-patch
...

Signed-off-by: dependabot[bot] <support@github.com>
dev: Tidy tools
dev: Tidy tools
dev: Tidy tools
dev: bump gocloud.dev/pubsub/natspubsub from 0.32.0 to 0.33.0

Bumps [gocloud.dev/pubsub/natspubsub](https://github.com/google/go-cloud) from 0.32.0 to 0.33.0.
- [Release notes](https://github.com/google/go-cloud/releases)
- [Commits](https://github.com/google/go-cloud/compare/v0.32.0...v0.33.0)

---
updated-dependencies:
- dependency-name: gocloud.dev/pubsub/natspubsub
  dependency-type: direct:production
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>
dev: bump github.com/grpc-ecosystem/grpc-gateway/v2

Bumps [github.com/grpc-ecosystem/grpc-gateway/v2](https://github.com/grpc-ecosystem/grpc-gateway) from 2.16.0 to 2.16.2.
- [Release notes](https://github.com/grpc-ecosystem/grpc-gateway/releases)
- [Changelog](https://github.com/grpc-ecosystem/grpc-gateway/blob/main/.goreleaser.yml)
- [Commits](https://github.com/grpc-ecosystem/grpc-gateway/compare/v2.16.0...v2.16.2)

---
updated-dependencies:
- dependency-name: github.com/grpc-ecosystem/grpc-gateway/v2
  dependency-type: direct:production
  update-type: version-update:semver-patch
...

Signed-off-by: dependabot[bot] <support@github.com>
dev: bump github.com/smarty/assertions from 1.15.0 to 1.15.1

Bumps [github.com/smarty/assertions](https://github.com/smarty/assertions) from 1.15.0 to 1.15.1.
- [Commits](https://github.com/smarty/assertions/compare/v1.15.0...v1.15.1)

---
updated-dependencies:
- dependency-name: github.com/smarty/assertions
  dependency-type: direct:production
  update-type: version-update:semver-patch
...

Signed-off-by: dependabot[bot] <support@github.com>
dev: bump github.com/eclipse/paho.mqtt.golang from 1.4.2 to 1.4.3

Bumps [github.com/eclipse/paho.mqtt.golang](https://github.com/eclipse/paho.mqtt.golang) from 1.4.2 to 1.4.3.
- [Release notes](https://github.com/eclipse/paho.mqtt.golang/releases)
- [Commits](https://github.com/eclipse/paho.mqtt.golang/compare/v1.4.2...v1.4.3)

---
updated-dependencies:
- dependency-name: github.com/eclipse/paho.mqtt.golang
  dependency-type: direct:production
  update-type: version-update:semver-patch
...

Signed-off-by: dependabot[bot] <support@github.com>
dev: bump go.uber.org/zap from 1.24.0 to 1.25.0

Bumps [go.uber.org/zap](https://github.com/uber-go/zap) from 1.24.0 to 1.25.0.
- [Release notes](https://github.com/uber-go/zap/releases)
- [Changelog](https://github.com/uber-go/zap/blob/master/CHANGELOG.md)
- [Commits](https://github.com/uber-go/zap/compare/v1.24.0...v1.25.0)

---
updated-dependencies:
- dependency-name: go.uber.org/zap
  dependency-type: direct:production
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>
dev: bump github.com/jackc/pgx/v5 from 5.4.1 to 5.4.2

Bumps [github.com/jackc/pgx/v5](https://github.com/jackc/pgx) from 5.4.1 to 5.4.2.
- [Changelog](https://github.com/jackc/pgx/blob/master/CHANGELOG.md)
- [Commits](https://github.com/jackc/pgx/compare/v5.4.1...v5.4.2)

---
updated-dependencies:
- dependency-name: github.com/jackc/pgx/v5
  dependency-type: direct:production
  update-type: version-update:semver-patch
...

Signed-off-by: dependabot[bot] <support@github.com>
dev: Tidy tools
dev: Tidy tools
dev: Tidy tools
dev: Tidy tools
dev: Tidy tools
console: Refactor fetch table and remove with request
console: Remove unnecessary fetching and error selectors
console: Refactor rights group
console: Refactor require component
console: Add computed props hook
console: Fix entry component
console: Fix CI
is: Restrict client creation's notification for admin users
dev: Update changelog
ns: Validate current channels length
console: Use useMemo()
console: Add useDerivedRightsProp hook
console: Fix entry
console: Fix hook
console: Fix entry
console: Fix argument
api: Reorganize protos
api: Add buf module and workspace
dev: Format and lint proto files
dev: Push protos to Buf Schema Registry
console: Fix network links in PB panel
console: Fix display issue with loading spinner
dev: Update changelog
console: Apply comments
as: Propagate received at timestamps
as: Use full identifiers on uplink generation
dev: Update changelog
console: Fix application last seen
dev: Swap CLI telemetry UUID dependency
cli: Enable telemetry collection by default
is: Enable telemetry collection by default
cli: Add telemetry log message informing that is enabled
is: Add log info message when telemetry is enabled
dev: Allow stack telemetry's UID elements to be specified by the user
dev: Update CHANGELOG
all: Use paho.mqtt.golang unreleased version
all: Remove css-hot-loader
ns: Pick device address prefixes in a weighted manner
ns: Fix prefix count test
is: Mock BatchGet
dcs: Fetch devices from IS for Unclaim and GetClaimStatus
api: Update comments
dev: Generate messages
api: Add BatchUnclaim RPC
dcs: Implement batch unclaiming RPC
dcs: Implement BatchUnclaim logic
dcs: Add TTJSv2 unit tests
dcs: Add RPC tests
api: Add GetInfoByEUIs RPC
dcs: Implement GetInfoByJoinEUIs
cli: Support unclaiming on end device batch deletion
dev: Generate items
api, dcs: Make returned error a map
dcs: Update error type
cli: Log return value
dev: Format files
dcs: Concatenate errors
cli: Account for invalid device registrations
dev: bump loader-utils from 2.0.2 to 2.0.4

Bumps [loader-utils](https://github.com/webpack/loader-utils) from 2.0.2 to 2.0.4.
- [Release notes](https://github.com/webpack/loader-utils/releases)
- [Changelog](https://github.com/webpack/loader-utils/blob/v2.0.4/CHANGELOG.md)
- [Commits](https://github.com/webpack/loader-utils/compare/v2.0.2...v2.0.4)

---
updated-dependencies:
- dependency-name: loader-utils
  dependency-type: indirect
...

Signed-off-by: dependabot[bot] <support@github.com>
all: Refactor health checks
gs: Wait for secondary gateway disconnection
gs: Refactor ping pong tests
gs: Fix ping race condition
console: Fix wording and styling of CH upgrade notification
console: Fix PB network policy selectors
gs: Fix off by one error
console: Fix wrong order of device view breadcrumbs
gs: Handle missing ping pong settings
ns: Change error margins for device address allocations
dcs: Fix map ordering race in tests
all: Cut off changelog version 3.27.1
all: Bump to version 3.27.1
console: Fix extra limitless request
all: Enter release date of version 3.27.1 into the changelog","Added
Add support for administrative_contact and technical_contact in the Console.
Reimplement move away prompt in payload formatter views in the Console.
Add telemetry collection for the CLI. A background process was added to the CLI in order to send the following information: Operating System, Architecture, Binary version and Golang version. The message is sent every 24 hours and it contains an unique random number as an identifier. It is enabled by default and in order to disable it, set telemetry.enable to false in the CLI configuration. For more information, consult the documentation here.
Add telemetry collection for the IdentityServer. A background task was added in the Identity Server which is responsible for collecting information regarding the amount of each entity in the database, this has the purpose of allowing us to better understand how users are interacting with the system, an example being if tenants are using Organizations or just Users. All information is sent every 24 hours and it contains an identifier composed of the URLs present in the following configuration fields console.ui.[is|gs|ns|as|js].base-url. It is enabled by default and in order to disable it, set telemetry.enable to false in the Stack configuration. For more information, consult the documentation here.
Fixed
OAuth clients created by an admin no longer trigger an email requesting approval from one of the tenant's admins.
Broken network routing policy links in the Packet Broker panel of the admin panel in the Console.
Application Server downlink related events now contain the complete set of end device identifiers, and the received at timestamp is now provided at all times.
Wrong order of breadcrumbs in the device views of the Console."
"all: Enter release date of version 3.28.0 into the changelog
dev: Increase release tag resources
ns: Add limit to deduplication of accumulated metadata
console: Add protocol authentication
console: Add events API rate limiting
is: Skip membership chains check if no entities are to be checked
dev: bump axios from 1.5.1 to 1.6.0 in /sdk/js

Bumps [axios](https://github.com/axios/axios) from 1.5.1 to 1.6.0.
- [Release notes](https://github.com/axios/axios/releases)
- [Changelog](https://github.com/axios/axios/blob/v1.x/CHANGELOG.md)
- [Commits](https://github.com/axios/axios/compare/v1.5.1...v1.6.0)

---
updated-dependencies:
- dependency-name: axios
  dependency-type: direct:production
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>
dev: bump @babel/cli from 7.22.9 to 7.23.0

Bumps [@babel/cli](https://github.com/babel/babel/tree/HEAD/packages/babel-cli) from 7.22.9 to 7.23.0.
- [Release notes](https://github.com/babel/babel/releases)
- [Changelog](https://github.com/babel/babel/blob/main/CHANGELOG.md)
- [Commits](https://github.com/babel/babel/commits/v7.23.0/packages/babel-cli)

---
updated-dependencies:
- dependency-name: ""@babel/cli""
  dependency-type: direct:development
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>
dev: bump @formatjs/intl-pluralrules from 5.2.4 to 5.2.7

Bumps [@formatjs/intl-pluralrules](https://github.com/formatjs/formatjs) from 5.2.4 to 5.2.7.
- [Release notes](https://github.com/formatjs/formatjs/releases)
- [Commits](https://github.com/formatjs/formatjs/compare/@formatjs/intl-pluralrules@5.2.4...@formatjs/intl-pluralrules@5.2.7)

---
updated-dependencies:
- dependency-name: ""@formatjs/intl-pluralrules""
  dependency-type: direct:production
  update-type: version-update:semver-patch
...

Signed-off-by: dependabot[bot] <support@github.com>
dev: bump @babel/runtime-corejs2 from 7.22.5 to 7.23.2

Bumps [@babel/runtime-corejs2](https://github.com/babel/babel/tree/HEAD/packages/babel-runtime-corejs2) from 7.22.5 to 7.23.2.
- [Release notes](https://github.com/babel/babel/releases)
- [Changelog](https://github.com/babel/babel/blob/main/CHANGELOG.md)
- [Commits](https://github.com/babel/babel/commits/v7.23.2/packages/babel-runtime-corejs2)

---
updated-dependencies:
- dependency-name: ""@babel/runtime-corejs2""
  dependency-type: direct:development
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>
dev: bump @babel/preset-react from 7.22.5 to 7.22.15

Bumps [@babel/preset-react](https://github.com/babel/babel/tree/HEAD/packages/babel-preset-react) from 7.22.5 to 7.22.15.
- [Release notes](https://github.com/babel/babel/releases)
- [Changelog](https://github.com/babel/babel/blob/main/CHANGELOG.md)
- [Commits](https://github.com/babel/babel/commits/v7.22.15/packages/babel-preset-react)

---
updated-dependencies:
- dependency-name: ""@babel/preset-react""
  dependency-type: direct:development
  update-type: version-update:semver-patch
...

Signed-off-by: dependabot[bot] <support@github.com>
dev: bump eslint-import-resolver-webpack from 0.13.7 to 0.13.8

Bumps [eslint-import-resolver-webpack](https://github.com/import-js/eslint-plugin-import) from 0.13.7 to 0.13.8.
- [Release notes](https://github.com/import-js/eslint-plugin-import/releases)
- [Changelog](https://github.com/import-js/eslint-plugin-import/blob/main/CHANGELOG.md)
- [Commits](https://github.com/import-js/eslint-plugin-import/compare/resolvers/webpack/v0.13.7...resolvers/webpack/v0.13.8)

---
updated-dependencies:
- dependency-name: eslint-import-resolver-webpack
  dependency-type: direct:development
  update-type: version-update:semver-patch
...

Signed-off-by: dependabot[bot] <support@github.com>
api: Add initial relay MAC commands
api: Add relay metadata
api: Add relay related MAC parameters
api: Add relay zero field support
all: Add relay command marshaling
ns: Implement RelayConfReq
ns: Implement RelayConfigureFwdLimitReq
ns: Implement RelayNotifyNewEndDeviceReq
ns: Implement RelayEndDeviceConfReq
all: Add relay root key derivation
ns: Add BatchGetByID
ns: Sanitize pending requests after downlink generation
ns: Add relay key derivation service
ns: Implement RelayUpdateUplinkListReq
ns: Add relay MAC state generation
api: Add relay fields to allowed field mask
ns: Add relay uplink flow
all: Support relay metadata
ns: Add relay session key delivery during join
ns: Relay downlink flow
ns: Add relay forwarding rule unique index
ns: Implement RelayCtrlUplinkListReq
ns: Validate relay fields
ns: Add zero field checks
dev: bump @babel/register from 7.22.5 to 7.22.15

Bumps [@babel/register](https://github.com/babel/babel/tree/HEAD/packages/babel-register) from 7.22.5 to 7.22.15.
- [Release notes](https://github.com/babel/babel/releases)
- [Changelog](https://github.com/babel/babel/blob/main/CHANGELOG.md)
- [Commits](https://github.com/babel/babel/commits/v7.22.15/packages/babel-register)

---
updated-dependencies:
- dependency-name: ""@babel/register""
  dependency-type: direct:development
  update-type: version-update:semver-patch
...

Signed-off-by: dependabot[bot] <support@github.com>
dev: bump @sentry/browser from 7.57.0 to 7.77.0

Bumps [@sentry/browser](https://github.com/getsentry/sentry-javascript) from 7.57.0 to 7.77.0.
- [Release notes](https://github.com/getsentry/sentry-javascript/releases)
- [Changelog](https://github.com/getsentry/sentry-javascript/blob/develop/CHANGELOG.md)
- [Commits](https://github.com/getsentry/sentry-javascript/compare/7.57.0...7.77.0)

---
updated-dependencies:
- dependency-name: ""@sentry/browser""
  dependency-type: direct:production
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>
dev: bump github.com/nats-io/nats-server/v2 from 2.10.2 to 2.10.4

Bumps [github.com/nats-io/nats-server/v2](https://github.com/nats-io/nats-server) from 2.10.2 to 2.10.4.
- [Release notes](https://github.com/nats-io/nats-server/releases)
- [Changelog](https://github.com/nats-io/nats-server/blob/main/.goreleaser.yml)
- [Commits](https://github.com/nats-io/nats-server/compare/v2.10.2...v2.10.4)

---
updated-dependencies:
- dependency-name: github.com/nats-io/nats-server/v2
  dependency-type: direct:production
...

Signed-off-by: dependabot[bot] <support@github.com>
dev: bump go.packetbroker.org/api/mapping/v2 from 2.1.32 to 2.2.1

Bumps [go.packetbroker.org/api/mapping/v2](https://github.com/packetbroker/go-api) from 2.1.32 to 2.2.1.
- [Release notes](https://github.com/packetbroker/go-api/releases)
- [Commits](https://github.com/packetbroker/go-api/compare/mapping/v2.1.32...iam/v2.2.1)

---
updated-dependencies:
- dependency-name: go.packetbroker.org/api/mapping/v2
  dependency-type: direct:production
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>
dev: bump go.packetbroker.org/api/iam/v2 from 2.7.13 to 2.8.1

Bumps [go.packetbroker.org/api/iam/v2](https://github.com/packetbroker/go-api) from 2.7.13 to 2.8.1.
- [Release notes](https://github.com/packetbroker/go-api/releases)
- [Commits](https://github.com/packetbroker/go-api/compare/iam/v2.7.13...iam/v2.8.1)

---
updated-dependencies:
- dependency-name: go.packetbroker.org/api/iam/v2
  dependency-type: direct:production
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>
# Conflicts:
#	go.mod
#	go.sum
dev: bump go.packetbroker.org/api/iam from 1.7.0 to 1.8.1

Bumps [go.packetbroker.org/api/iam](https://github.com/packetbroker/go-api) from 1.7.0 to 1.8.1.
- [Release notes](https://github.com/packetbroker/go-api/releases)
- [Commits](https://github.com/packetbroker/go-api/compare/iam/v1.7.0...iam/v1.8.1)

---
updated-dependencies:
- dependency-name: go.packetbroker.org/api/iam
  dependency-type: direct:production
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>
# Conflicts:
#	go.mod
#	go.sum
dev: bump github.com/redis/go-redis/v9 from 9.2.1 to 9.3.0

Bumps [github.com/redis/go-redis/v9](https://github.com/redis/go-redis) from 9.2.1 to 9.3.0.
- [Release notes](https://github.com/redis/go-redis/releases)
- [Changelog](https://github.com/redis/go-redis/blob/master/CHANGELOG.md)
- [Commits](https://github.com/redis/go-redis/compare/v9.2.1...v9.3.0)

---
updated-dependencies:
- dependency-name: github.com/redis/go-redis/v9
  dependency-type: direct:production
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>
# Conflicts:
#	go.mod
dev: bump golang.org/x/oauth2 from 0.12.0 to 0.13.0

Bumps [golang.org/x/oauth2](https://github.com/golang/oauth2) from 0.12.0 to 0.13.0.
- [Commits](https://github.com/golang/oauth2/compare/v0.12.0...v0.13.0)

---
updated-dependencies:
- dependency-name: golang.org/x/oauth2
  dependency-type: direct:production
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>
dev: bump github.com/prometheus/common from 0.44.0 to 0.45.0

Bumps [github.com/prometheus/common](https://github.com/prometheus/common) from 0.44.0 to 0.45.0.
- [Release notes](https://github.com/prometheus/common/releases)
- [Commits](https://github.com/prometheus/common/compare/v0.44.0...v0.45.0)

---
updated-dependencies:
- dependency-name: github.com/prometheus/common
  dependency-type: direct:production
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>
# Conflicts:
#	go.mod
dev: Update go.packetbroker.org/api/routing to v1.9.1
dev: Update github.com/google/go-cmp to v0.6.0
dev: Update github.com/vmihailenco/msgpack/v5 to v5.4.1
dev: Update github.com/hellofresh/health-go/v5 to v5.5.0
dev: Update github.com/getsentry/sentry-go to v0.25.0
dev: Update github.com/google/uuid to v1.4.0
dev: Update google.golang.org/appengine to v1.6.8
dev: Update github.com/aws/aws-sdk-go to v1.47.1
dev: Update golang.org/x/sync to v0.4.0
dev: Update github.com/spf13/viper to v1.17.0
dev: Update github.com/dop251/goja to v0.0.0-20231027120936-b396bb4c349d
api: Increase gateway identifiers limit
dev: bump golang.org/x/image from 0.5.0 to 0.10.0

Bumps [golang.org/x/image](https://github.com/golang/image) from 0.5.0 to 0.10.0.
- [Commits](https://github.com/golang/image/compare/v0.5.0...v0.10.0)

---
updated-dependencies:
- dependency-name: golang.org/x/image
  dependency-type: indirect
...

Signed-off-by: dependabot[bot] <support@github.com>
dev: Use Go 1.21
dev: Remove experimental slices package
dev: Partially remove experimental maps package
dev: Update Packet Broker API
pba: Fix comment
pba: Set caller network identifier
console: Use Gateway Stats Batch API
dev: bump eslint-plugin-import from 2.27.5 to 2.29.0

Bumps [eslint-plugin-import](https://github.com/import-js/eslint-plugin-import) from 2.27.5 to 2.29.0.
- [Release notes](https://github.com/import-js/eslint-plugin-import/releases)
- [Changelog](https://github.com/import-js/eslint-plugin-import/blob/main/CHANGELOG.md)
- [Commits](https://github.com/import-js/eslint-plugin-import/compare/v2.27.5...v2.29.0)

---
updated-dependencies:
- dependency-name: eslint-plugin-import
  dependency-type: direct:development
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>
dev: bump @babel/preset-env from 7.22.5 to 7.23.2

Bumps [@babel/preset-env](https://github.com/babel/babel/tree/HEAD/packages/babel-preset-env) from 7.22.5 to 7.23.2.
- [Release notes](https://github.com/babel/babel/releases)
- [Changelog](https://github.com/babel/babel/blob/main/CHANGELOG.md)
- [Commits](https://github.com/babel/babel/commits/v7.23.2/packages/babel-preset-env)

---
updated-dependencies:
- dependency-name: ""@babel/preset-env""
  dependency-type: direct:development
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>
all: Do not expose gRPC trailers in the gRPC bridge
Update CODEOWNERS

Add @PavelJankoski as codeowner for web-related files
all: Add HTTP client transport compression
all: Add HTTP server transport compression
all: Fix experimental definition tests
console: Fix camera switching for ios, android and desktop
console: Fix linting error
dcs: Apply context to claim request
doc: Fix links ()
dev: bump go.opentelemetry.io/contrib/instrumentation/google.golang.org/grpc/otelgrpc

Bumps [go.opentelemetry.io/contrib/instrumentation/google.golang.org/grpc/otelgrpc](https://github.com/open-telemetry/opentelemetry-go-contrib) from 0.45.0 to 0.46.0.
- [Release notes](https://github.com/open-telemetry/opentelemetry-go-contrib/releases)
- [Changelog](https://github.com/open-telemetry/opentelemetry-go-contrib/blob/main/CHANGELOG.md)
- [Commits](https://github.com/open-telemetry/opentelemetry-go-contrib/compare/zpages/v0.45.0...zpages/v0.46.0)

---
updated-dependencies:
- dependency-name: go.opentelemetry.io/contrib/instrumentation/google.golang.org/grpc/otelgrpc
  dependency-type: direct:production
...

Signed-off-by: dependabot[bot] <support@github.com>
console: Fix fetching stats if there are no gateways
console: Updated CHANGELOG.md
gs: Ensure deterministic order of frequency plans
is: Fix universal rights effect on batch gateway rights assertions
api: Add band ID to list frequency plans RPC
api: Add band ID to list frequency plans request
all: Use upstream grpc-gateway/v2
all: Cut off changelog version 3.28.1
all: Bump to version 3.28.1
console: Add request
all: Enter release date of version 3.28.1 into the changelog","Added
The http.client.transport.compression experimental flag. It controls whether the HTTP clients used by the stack support gzip and zstd decompression of server responses. It is enabled by default.
The http.server.transport.compression experimental flag. It controls whether the HTTP servers used by the stack support gzip compression of the server response. It is enabled by default.
Changed
The Things Stack is now built with Go 1.21.
Statistics for gateways are now fetched in a single request.
Fixed
Resolve scroll jumps when selecting different tabs of a table in the Console.
BatchGetGatewayConnectionStats RPC rights check in certain cases."
"as: Add application packages processing timeout
as: Add application packages transaction registry
dev: Update third party folder path
as: Fix IS mock race
all: Replace populate_all opts with explicit opts for specific messages
all: Remove NetID customnames
js: Remove obsolete test; empty JoinEUI is allowed
js: Rewrite tests without populators
all: Remove gogoproto.marshaler and unmarshaler options
all: Use ShouldEqualProto assertion for proto messages
all: Use internal should package when comparing proto messages
gs,ns,as: Compare slices of proto messages manually
util: Use proto.Equal instead of reflect.DeepEqual
ns: Manually compare equality
all: Cache Root CA for TLS client auth
util: Rewrite encoding/lorawan tests without populators
dev: Avoid redundant frontend builds within runner matrix
util: Fix TTL in Redis mutex tests
console: Disable factory preset freq for certain bands
as,ns: Compare application ID instead of identifiers
all: Do not compare proto messages using ==
console: Update delete modal button component
console: Fix application deletion handling
console: Fix gateway deletion handling
console: Fix organization deletion handling
all: Remove gogoproto sizer options
ci: Do not duplicate snapshot name
api: Validate order fields in search RPCs on API level
is: Return error when removing last _ALL right from collaborator
dev: bump query-string from 7.0.0 to 7.0.1

Bumps [query-string](https://github.com/sindresorhus/query-string) from 7.0.0 to 7.0.1.
- [Release notes](https://github.com/sindresorhus/query-string/releases)
- [Commits](https://github.com/sindresorhus/query-string/compare/v7.0.0...v7.0.1)

---
updated-dependencies:
- dependency-name: query-string
  dependency-type: direct:production
  update-type: version-update:semver-patch
...

Signed-off-by: dependabot[bot] <support@github.com>
dev: bump eslint-plugin-react from 7.23.2 to 7.24.0

Bumps [eslint-plugin-react](https://github.com/yannickcr/eslint-plugin-react) from 7.23.2 to 7.24.0.
- [Release notes](https://github.com/yannickcr/eslint-plugin-react/releases)
- [Changelog](https://github.com/yannickcr/eslint-plugin-react/blob/master/CHANGELOG.md)
- [Commits](https://github.com/yannickcr/eslint-plugin-react/compare/v7.23.2...v7.24.0)

---
updated-dependencies:
- dependency-name: eslint-plugin-react
  dependency-type: direct:development
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>
dev: bump @storybook/addon-links from 6.2.9 to 6.3.6

Bumps [@storybook/addon-links](https://github.com/storybookjs/storybook/tree/HEAD/addons/links) from 6.2.9 to 6.3.6.
- [Release notes](https://github.com/storybookjs/storybook/releases)
- [Changelog](https://github.com/storybookjs/storybook/blob/next/CHANGELOG.md)
- [Commits](https://github.com/storybookjs/storybook/commits/v6.3.6/addons/links)

---
updated-dependencies:
- dependency-name: ""@storybook/addon-links""
  dependency-type: direct:development
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>
api: Remove IDContains customname
console: Fix frequency plan warning
console: Fix missing required prop in gateway form
api: Remove CorrelationID customnames
api: Remove ID customnames
api: Remove BrandID and ModelID customnames
api: Remove UserIds customname
api: Remove BandID and FrequencyPlanID customnames
api: Remove VersionIDs customnames
api: Remove remaining ID customnames
api: Remove RSSI customnames
api: Remove SNR customname
api: Remove KEK customnames
api: Remove CUPS and LNS customnames
api: Remove URI customnames
api: Remove APIKey, OAuth and Token customnames
api: Remove ineffective customname options
api: Remove remaining customname options from cluster.proto
api: Remove remaining customname options from dcs proto
api: Remove remaining customname option from events.proto
api: Remove remaining customname option from gateway.proto
api: Remove remaining customname option from mqtt.proto
api: Remove remaining customname options from regional.proto
all: Remove remaining customname options from LoRaWAN protos
util: Remove customname option handling
console: Fix gateway rights check
console,account: Refactor button component to allow data props
pba: Update API and fill out new fields
all: Add FindDownlinkDataRate
gs: Add TODOs for getting rid of the data rate index
pba: Use new error codes
pba: Map AS923-1 to AS923
pba: Use fully described data rate
pba: Use default LoRa coding rate and add TODO
gs: Add TODO to set coding rate from data rate
pba: Set forwarder gateway ID if known
all: Make diff between protos readable
pba: Account for coding rate in data rate
pba: Adapt to updated API
console,account: Add error details to error view
console,account: Update shared messages
dev: Update locales
dev: Update changelog
console,account: Preload fonts
ns: Skip the application uplink queue if the peer is available
dev: bump tar from 6.1.0 to 6.1.4

Bumps [tar](https://github.com/npm/node-tar) from 6.1.0 to 6.1.4.
- [Release notes](https://github.com/npm/node-tar/releases)
- [Changelog](https://github.com/npm/node-tar/blob/main/CHANGELOG.md)
- [Commits](https://github.com/npm/node-tar/compare/v6.1.0...v6.1.4)

---
updated-dependencies:
- dependency-name: tar
  dependency-type: indirect
...

Signed-off-by: dependabot[bot] <support@github.com>
api: Update ClaimGatewayRequest fields
console: Add gateway antenna placement options
gcs: Add metrics
dev: Update changelog
gcs: Restrict allowed values of station
gcs: Remove labels
dev: Make webpack config more deterministic wrt i18n
console,account: Refactor with-locale component wrt new i18n system
dev: Remove xx locale and locale generation
console,account: Refactor footer for i18n and styling fixes
console,account: Various styling fixes related to i18n
dev: Add japanese locale
dev: Update changelog
console: Fix relative time component re-render bug
pba: List unlisted networks and tenants with a policy defined
pba: Increase update gateway timeout and interval
console,account: Fix active styling of dropdown items
console,account: Use correct assets URL
console,account: Fix hardcoded footer support link
console,account: Do not provide error details for not found errors
console: Resolve error view related styling issues
data: Update external repositories
all: Bump to version 3.14.1","Added
New config option --as.packages.timeout to control the message processing timeout of application packages.
Option to view and copy error details in full view errors in the Console.
Metrics for CUPS requests.
Language chooser in the footer in the Console.
Japanese language support in the Console.
Changed
Cache Root CA for client TLS configuration.
Identity Server no longer allows removing the _ALL right from entity collaborators if that leaves the entity without any collaborator that has the _ALL right.
The Network Server application uplink queue may now be skipped if the Application Server peer is available at enqueue time.
The interval for updating gateways in Packet Broker is now 10 minutes (was 5 minutes) and the timeout is 5 seconds (was 2 seconds).
Fixed
Improved errors when ordering search requests by non-existent fields.
LNS authentication key handling for gateways in the Console.
Docker images
docker pull thethingsnetwork/lorawan-stack:3.14
docker pull thethingsnetwork/lorawan-stack:3.14.1
docker pull ghcr.io/thethingsnetwork/lorawan-stack:3.14
docker pull ghcr.io/thethingsnetwork/lorawan-stack:3.14.1"
"all: Bump to version 3.4.0
is: Remove base url from component api config when disabled
console: Improve component card rendering
console: Improve welcome message
ci: Make Github Actions TEST_SLOWDOWN same as Travis
doc: Add Network Server documentation
doc: Add Network Server API reference
api: Fix NS service ordering
api: Regenerate
is: Move ordering to List/Find funcs
is: Add ordering to search
is: Make FindMemberships more consistent with FindEntities
is: Order sessions and tokens by created_at
api: Set validation rules on order field of list requests
is: Parse order specification
is: Add ordering to list and search RPCs
is: Rewrite order field of organization and user IDs
cli: Add support for ordering in list comands
doc: Add ordering of List RPCs to CHANGELOG
doc: Clarify user search in Console
doc: Add vi key bindings
gs: Reduce UDP expiry times and block address while gateway is connected
gs: Rollover clock from 31 bits shift
gs: Support concentrator timestamp rollovers detected by the server
gs: Add synchronizing clock with known concentrator time
gs: Store session before handling upstream message
gs: Recover Basic Station concentrator time epoch
all: Update release notes
all: Regenerate messages
all: Bump to version 3.4.1","Added
Support for ordering in List RPCs.
Detect existing Basic Station time epoch when the gateway was already running long before it (re)connected to the Gateway Server.
Changed
Reduce the downlink path expiry window to 15 seconds, i.e. typically missing three PULL_DATA frames.
Reduce the connection expiry window to 1 minute.
Reduce default UDP address block time from 5 minutes to 1 minute. This allows for faster reconnecting if the gateway changes IP address. The downlink path and connection now expire before the UDP source address is released.
Fixed
Fix class A downlink scheduling when an uplink message has been received between the triggering uplink message.
Changelog
Docker images
docker pull thethingsnetwork/lorawan-stack:latest
docker pull thethingsnetwork/lorawan-stack:3
docker pull thethingsnetwork/lorawan-stack:3.4
docker pull thethingsnetwork/lorawan-stack:3.4.1"
"all: Bump to version 3.4.1
dev: Fix propagation of Go tags to unconvert
console: Fix pseudo right issue
doc: Update changelog
console: Extend form component
add enableReinitialize prop
console: Extend device general settings messages
console: Add collapse component
console: Add is device edit form
console: Add as device edit form
console: Add js device edit form
console: Add ns device edit form
console: Add delete section for device edit form
console: Add utils for device form
console: Refactor device general settings page
util,console: Extend device request field mask
util,console: Extend js field mask
console: Change dev_eui field description
console: Fix appEUI field description
console: Fix byte input nullable value
console: Add toast notification on device update
console: Fix nwk_s_key field title and description
console: Refactor device reducer
console: Fix ns form in device gs
dev: Add lodash dependency
dev: Add lodash babel plugin
console: Fix merging updated devices in the store
use lodash to deeply merge updated devices. this is needed mostly for entries like root_keys and session that can be updated separately and should be handled properly among devices of different types
util: Ignore mismatched ns and as adresses
console: Move device deletion to is form
console: Add support for joined otaa devices
dev: Update locales
console: Fix js section whe external js used
console: Fix as section description
console: Change message in device modal
inform the user about non reusable ids
console: Change network keys message descriptors
util: Batch component adresses fetch in js sdk
console: Cleanup ns form
console: Remove hidden field from js form
dev: Update locales
console: Simplify is form
console: Simplify ns form
console: Simplify js form
console: Add description for dev_addr field
console: Add description for net_id field
console: Add description for frequency_plan_id field
console: Add description for lorawan_version field
console: Add description for lorawan_phy_version field
dev: Update locales
all: Support multiple copyright years in headers check
console: Fix require component condition
console: Add feature toggles to application status bar
console: Add feature toggles to gateway status bar
console: Add feature toggles to organization status bar
is: Allow restricted users to view own user info
util: Add simple event system to JS SDK
util: Emit warning event for header warnings in responses
util: Add auth service to JS SDK
util: Add util to add missing state prop to users
console,oauth: Add option to prevent toast flooding
console: Add auth info to api tree
console: Enhance init logic to account for users with too few rights
console: Remove unnecessary decoration from user logic
console: Move toast container
console: Forward sdk warnings to toast message queue
dev: Update locales
doc: Update changelog
doc: Update changelog
console: Refactor device store for pagination
console: Streamline device store files
console: Refactor api key store logic for new pagination workflow
console: Refactor collaborator store logic for new pagination workflow
console: Refactor webhook store
console: Refactor pubsub store
console: Use unique combined id for devices
console: Remove unnecessary shared name
dev: Update copyright year for new files
console: Fix faulty default props
console,oauth: Fix header items styling
console: Fix logo dimension bug
console: Improve wording of automatic linking
console: Improve application general settings form
dev: Update locales
doc: Add NASYS LoRaWAN Outdoor Gateway connection guide
gs: Increase ScheduleTimeLong to 500 ms

This increases the chance that packets arrive on time on gateways with a
high latency backhauls, like 3G.

This is a trade-off between delay in transmitting class C downlink
messages and making sure the packet arrives on time on the gateway. This
should serve as a reasonable default value for all gateways.
console: Fix deadlock of application add form submit after error
doc: Update changelog
doc: Update Kerlink Wirnet Station provisioning documentation
doc: Add Kerlink Wirnet iStation provisioning guide
dev: Add myself and Krishna to gcs and pfconfig code owners
gcs: Include Gateway EUI on configuration
cli: Fix `gateways update` command refusing to update EUI
all: Fail component start when interop server can't start
all: Bump to version 3.4.2","Added
Forwarding of backend warnings to the Console.
Auth Info service to the JavaScript SDK.
Subscribable events to the JavaScript SDK.
Include gateway_ID field in Semtech UDP configuration response from Gateway Configuration Server.
Changed
Increase time that class C messages are scheduled in advance from 300 to 500 ms to support higher latency gateway backhauls.
Fixed
Fix selection of pseudo wildcard rights being possible (leading to crash) in the Console even when such right cannot be granted.
Fix loading spinner being stuck infinitely in gateway / application / organization overview when some rights aren't granted to the collaborator.
Fix deadlock of application add form in the Console when the submit results in an error.
Fix ttn-lw-cli sometimes refusing to update Gateway EUI.
Changelog
Docker images
docker pull thethingsnetwork/lorawan-stack:latest
docker pull thethingsnetwork/lorawan-stack:3
docker pull thethingsnetwork/lorawan-stack:3.4
docker pull thethingsnetwork/lorawan-stack:3.4.2"
"v15.5.0
Resetting package fields for development
Yarn upgrade ()

Apologies if this means everyone has to `rm -rf node_modules`: react-ace
decided to turn some paths that were regular files into directories
and it turns out this really confuses yarn: https://github.com/securingsincity/react-ace/issues/1048
Refactor thread model to be created from the root event ()
Add thread relation to sticker message ()
Keep a reference to the latest thread created ()
Add thread relation in sendEvent if it's missing ()
MatrixEvent.getRoomId can return undefined ()
TypeScript: opts parameter of client.startClient is optional ()
Fix initial sync fail when event fetching unsuccessful ()
Avoid re-doing as much work when processing m.receipt event ()
Out of sync thread summary in main timeline ()
Send references to thread root to threads, even out of order ()

Co-authored-by: Germain <germains@element.io>
Account for encryption in `maySendMessage()` ()
Fix edge cases around RR calculations ()
Don't store streams that are only used once ()

Signed-off-by: Šimon Brandner <simon.bra.ag@gmail.com>
Expose room state helper ()
Fix issue with rooms not getting marked as unread ()
Prepare changelog for v15.5.1-rc.1
v15.5.1-rc.1
Revert event-mapper optimisations () ()

Co-authored-by: Germain <germains@element.io>
Prepare changelog for v15.5.1
v15.5.1","Bug Fixes
Fix issue with rooms not getting marked as unread (). Fixes element-hq/element-web.
Don't store streams that are only used once (). Fixes element-hq/element-web. Contributed by @SimonBrandner.
Fix edge cases around RR calculations (). Fixes element-hq/element-web.
Account for encryption in maySendMessage() (). Contributed by @SimonBrandner.
Send references to thread root to threads, even out of order ().
Fix initial sync fail when event fetching unsuccessful (). Fixes element-hq/element-web.
Don't decrypt redacted messages (). Contributed by @SimonBrandner."
"release v1.4.8
Added 8-band asset types and 3-band UDM2 asset type to DEFAULT_ASSET_TYPES.
Updates CHANGES with current changes.
Updated version by +0.0.1
Reverted back to v1.4.8 and will change in next release.
Updates CHANGES with changes for v1.4.9
Updated version by +0.0.1 to v1.4.9","New: analytic_8b_udm2 asset
New: basic_analytic_8b_udm2 asset
New: analytic_8b_sr_udm2 asset
New: analytic_3b_udm2 asset
Add support for 8-band asset types
Add support for 3-band UDM2 asset type"
"fix development status classifier
bump version
undo RELEASE.md changes
revert RELEASE.md
add release information for maintenance releases, differentiate maintenance and feature releases
Create .gitlab-ci.yml
Update .gitlab-ci.yml
release 2.0.3","Changed:
Orders CLI now forces STAC to false for GEE deliveries. This is due to the
Orders API change to surface validation errors when stac is specified for GEE
orders.()"
"bump to next dev version
Add conda-forge package build notes

The package builds are largely automated, only need a human maintainer to click a button or two.
Security Peace-of-mind

Eliminates the chance that someone could make an evil custom theme.
fixed docstrings to new syntax
changed wording
added another high level example to the subscriptions file
formatted documents
Update docs/custom_theme/home.html

Co-authored-by: JuLee Burdekin <91982271+JuLeeAtPlanet@users.noreply.github.com>
Update docs/custom_theme/home.html

Co-authored-by: JuLee Burdekin <91982271+JuLeeAtPlanet@users.noreply.github.com>
Update planet/clients/subscriptions.py

Co-authored-by: Kevin Lacaille <kevinlacaille@gmail.com>
removed redundant lines
Removed the --pre flag for the install command.
Removed the --user flag, as is not needed.
Fixed two broken links.
Fixed a broken link.
enforce restricting secret file permissions to user read/write
move log message to info, simplify for readability
release 2.0.1","Fixed:
Fix security issue where secret file was being created with read access other
users on the machine. Automatically fixes the file permissions to only read
and write the first time the file is accessed and continues to enforce the
proper file permissions going forward.
Docs:
Fixed broken links on ""CLI for Data API Tutorial"" page ().
Protect against injecting javascript:URI into edited href tags in docs ().
Remove --pre --user from pip install instructions ().
Update the syntax of example code in the docstrings in the Order and Data
clients and add example code to the Subscriptions client docstring ()."
