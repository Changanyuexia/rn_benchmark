"commits","release"
"Status: Modified
Files: README.md, package.json

diff --git a/README.md b/README.md
index 6b338417..afe0bb56 100644
--- a/README.md
+++ b/README.md
@@ -21,7 +21,7 @@ Requires Node version 8 or above. `node --version` will tell you what version yo
 
 ### Installation
 
-Available [on npm](https://www.npmjs.com/package/@11ty/cli).
+Available [on npm](https://www.npmjs.com/package/@11ty/eleventy).
 
 ```
 npm install -g @11ty/eleventy
diff --git a/package.json b/package.json
index 1e519d2e..91fdad0f 100644
--- a/package.json
+++ b/package.json
@@ -1,6 +1,6 @@
 {
   ""name"": ""@11ty/eleventy"",
-  ""version"": ""0.2.1"",
+  ""version"": ""0.2.2"",
   ""description"": ""Transform a directory of templates into HTML."",
   ""main"": ""src/Eleventy.js"",
   ""license"": ""MIT"",
","Installation
npm install --save-dev @11ty/eleventy
WARNING npm package name has been renamed to use the @11ty scope. Install using @11ty/eleventy. Previous version (eleventy-cli) is now deprecated (but still works as is). Sorry, y’all—for proper code organization and future maintenance I needed to pull that bandaid off as soon as possible.
Links
README
List all issues closed
Release notes
Tagged content and collections! Add a tags list to your front matter and use the collections.tagName variables in your data. Read more about Collections and Tags
Adds friendly warning message if you don’t meet minimum Node version requirement (version 8+)
Worth noting explicitly that unlike Jekyll, files and directories that start with an underscore are processed.
Adds continuous integration with Travis CI
A little help from my friends
With a pull request from @aakoch—thanks!
For our version naming pattern, major and minor versions are combined with https://en.wiktionary.org/wiki/eleventy"
"Status: Modified
Files: docs-src/_data/coverage.json, docs/coverage.md, package.json, src/Engines/Liquid.js, test/EleventyTest.js
Status: Added
Files: test/stubs-2367/_includes/layout.liquid, test/stubs-2367/templateWithLiquidShortcodeMultipleArguments-template2.liquid, test/stubs-2367/templateWithLiquidShortcodeMultipleArguments.liquid

diff --git a/docs-src/_data/coverage.json b/docs-src/_data/coverage.json
index 71cf34f6..5606d9cd 100644
--- a/docs-src/_data/coverage.json
+++ b/docs-src/_data/coverage.json
@@ -1,4 +1,4 @@
-{""total"": {""lines"":{""total"":4916,""covered"":4120,""skipped"":0,""pct"":83.8},""statements"":{""total"":4944,""covered"":4145,""skipped"":0,""pct"":83.83},""functions"":{""total"":1064,""covered"":901,""skipped"":0,""pct"":84.68},""branches"":{""total"":2283,""covered"":1726,""skipped"":0,""pct"":75.6},""branchesTrue"":{""total"":0,""covered"":0,""skipped"":0,""pct"":100}}
+{""total"": {""lines"":{""total"":4904,""covered"":4109,""skipped"":0,""pct"":83.78},""statements"":{""total"":4931,""covered"":4133,""skipped"":0,""pct"":83.81},""functions"":{""total"":1050,""covered"":888,""skipped"":0,""pct"":84.57},""branches"":{""total"":2280,""covered"":1716,""skipped"":0,""pct"":75.26},""branchesTrue"":{""total"":0,""covered"":0,""skipped"":0,""pct"":100}}
 ,""/Users/zachleat/Code/eleventy/cmd.js"": {""lines"":{""total"":53,""covered"":33,""skipped"":0,""pct"":62.26},""functions"":{""total"":11,""covered"":1,""skipped"":0,""pct"":9.09},""statements"":{""total"":53,""covered"":33,""skipped"":0,""pct"":62.26},""branches"":{""total"":22,""covered"":13,""skipped"":0,""pct"":59.09}}
 ,""/Users/zachleat/Code/eleventy/.cache/vue/include.js"": {""lines"":{""total"":5,""covered"":5,""skipped"":0,""pct"":100},""functions"":{""total"":0,""covered"":0,""skipped"":0,""pct"":100},""statements"":{""total"":5,""covered"":5,""skipped"":0,""pct"":100},""branches"":{""total"":0,""covered"":0,""skipped"":0,""pct"":100}}
 ,""/Users/zachleat/Code/eleventy/.cache/vue/include.vue_vue_type_script_lang.js"": {""lines"":{""total"":2,""covered"":2,""skipped"":0,""pct"":100},""functions"":{""total"":0,""covered"":0,""skipped"":0,""pct"":100},""statements"":{""total"":2,""covered"":2,""skipped"":0,""pct"":100},""branches"":{""total"":0,""covered"":0,""skipped"":0,""pct"":100}}
@@ -9,17 +9,17 @@
 ,""/Users/zachleat/Code/eleventy/.cache/vue/_includes/include.js"": {""lines"":{""total"":5,""covered"":5,""skipped"":0,""pct"":100},""functions"":{""total"":0,""covered"":0,""skipped"":0,""pct"":100},""statements"":{""total"":5,""covered"":5,""skipped"":0,""pct"":100},""branches"":{""total"":0,""covered"":0,""skipped"":0,""pct"":100}}
 ,""/Users/zachleat/Code/eleventy/.cache/vue/_includes/include.vue_vue_type_script_lang.js"": {""lines"":{""total"":2,""covered"":2,""skipped"":0,""pct"":100},""functions"":{""total"":1,""covered"":1,""skipped"":0,""pct"":100},""statements"":{""total"":2,""covered"":2,""skipped"":0,""pct"":100},""branches"":{""total"":0,""covered"":0,""skipped"":0,""pct"":100}}
 ,""/Users/zachleat/Code/eleventy/.cache/vue/_includes/include.vue_vue_type_template_id_d3bb7f88_lang.js"": {""lines"":{""total"":4,""covered"":4,""skipped"":0,""pct"":100},""functions"":{""total"":1,""covered"":1,""skipped"":0,""pct"":100},""statements"":{""total"":4,""covered"":4,""skipped"":0,""pct"":100},""branches"":{""total"":0,""covered"":0,""skipped"":0,""pct"":100}}
-,""/Users/zachleat/Code/eleventy/src/Benchmark.js"": {""lines"":{""total"":18,""covered"":17,""skipped"":0,""pct"":94.44},""functions"":{""total"":7,""covered"":7,""skipped"":0,""pct"":100},""statements"":{""total"":18,""covered"":17,""skipped"":0,""pct"":94.44},""branches"":{""total"":6,""covered"":5,""skipped"":0,""pct"":83.33}}
-,""/Users/zachleat/Code/eleventy/src/BenchmarkGroup.js"": {""lines"":{""total"":45,""covered"":34,""skipped"":0,""pct"":75.55},""functions"":{""total"":10,""covered"":7,""skipped"":0,""pct"":70},""statements"":{""total"":45,""covered"":34,""skipped"":0,""pct"":75.55},""branches"":{""total"":15,""covered"":9,""skipped"":0,""pct"":60}}
-,""/Users/zachleat/Code/eleventy/src/BenchmarkManager.js"": {""lines"":{""total"":27,""covered"":21,""skipped"":0,""pct"":77.77},""functions"":{""total"":8,""covered"":6,""skipped"":0,""pct"":75},""statements"":{""total"":27,""covered"":21,""skipped"":0,""pct"":77.77},""branches"":{""total"":8,""covered"":6,""skipped"":0,""pct"":75}}
+,""/Users/zachleat/Code/eleventy/src/Benchmark.js"": {""lines"":{""total"":19,""covered"":18,""skipped"":0,""pct"":94.73},""functions"":{""total"":8,""covered"":8,""skipped"":0,""pct"":100},""statements"":{""total"":19,""covered"":18,""skipped"":0,""pct"":94.73},""branches"":{""total"":6,""covered"":5,""skipped"":0,""pct"":83.33}}
+,""/Users/zachleat/Code/eleventy/src/BenchmarkGroup.js"": {""lines"":{""total"":46,""covered"":34,""skipped"":0,""pct"":73.91},""functions"":{""total"":11,""covered"":7,""skipped"":0,""pct"":63.63},""statements"":{""total"":46,""covered"":34,""skipped"":0,""pct"":73.91},""branches"":{""total"":15,""covered"":9,""skipped"":0,""pct"":60}}
+,""/Users/zachleat/Code/eleventy/src/BenchmarkManager.js"": {""lines"":{""total"":27,""covered"":20,""skipped"":0,""pct"":74.07},""functions"":{""total"":9,""covered"":6,""skipped"":0,""pct"":66.66},""statements"":{""total"":27,""covered"":20,""skipped"":0,""pct"":74.07},""branches"":{""total"":8,""covered"":6,""skipped"":0,""pct"":75}}
 ,""/Users/zachleat/Code/eleventy/src/ComputedData.js"": {""lines"":{""total"":60,""covered"":60,""skipped"":0,""pct"":100},""functions"":{""total"":8,""covered"":8,""skipped"":0,""pct"":100},""statements"":{""total"":60,""covered"":60,""skipped"":0,""pct"":100},""branches"":{""total"":29,""covered"":28,""skipped"":0,""pct"":96.55}}
-,""/Users/zachleat/Code/eleventy/src/ComputedDataProxy.js"": {""lines"":{""total"":51,""covered"":50,""skipped"":0,""pct"":98.03},""functions"":{""total"":10,""covered"":10,""skipped"":0,""pct"":100},""statements"":{""total"":51,""covered"":50,""skipped"":0,""pct"":98.03},""branches"":{""total"":32,""covered"":29,""skipped"":0,""pct"":90.62}}
+,""/Users/zachleat/Code/eleventy/src/ComputedDataProxy.js"": {""lines"":{""total"":51,""covered"":49,""skipped"":0,""pct"":96.07},""functions"":{""total"":10,""covered"":10,""skipped"":0,""pct"":100},""statements"":{""total"":51,""covered"":49,""skipped"":0,""pct"":96.07},""branches"":{""total"":32,""covered"":28,""skipped"":0,""pct"":87.5}}
 ,""/Users/zachleat/Code/eleventy/src/ComputedDataQueue.js"": {""lines"":{""total"":21,""covered"":21,""skipped"":0,""pct"":100},""functions"":{""total"":10,""covered"":10,""skipped"":0,""pct"":100},""statements"":{""total"":21,""covered"":21,""skipped"":0,""pct"":100},""branches"":{""total"":11,""covered"":8,""skipped"":0,""pct"":72.72}}
 ,""/Users/zachleat/Code/eleventy/src/ComputedDataTemplateString.js"": {""lines"":{""total"":26,""covered"":24,""skipped"":0,""pct"":92.3},""functions"":{""total"":4,""covered"":4,""skipped"":0,""pct"":100},""statements"":{""total"":26,""covered"":24,""skipped"":0,""pct"":92.3},""branches"":{""total"":7,""covered"":5,""skipped"":0,""pct"":71.42}}
-,""/Users/zachleat/Code/eleventy/src/Eleventy.js"": {""lines"":{""total"":323,""covered"":210,""skipped"":0,""pct"":65.01},""functions"":{""total"":49,""covered"":33,""skipped"":0,""pct"":67.34},""statements"":{""total"":324,""covered"":210,""skipped"":0,""pct"":64.81},""branches"":{""total"":117,""covered"":76,""skipped"":0,""pct"":64.95}}
+,""/Users/zachleat/Code/eleventy/src/Eleventy.js"": {""lines"":{""total"":324,""covered"":211,""skipped"":0,""pct"":65.12},""functions"":{""total"":51,""covered"":35,""skipped"":0,""pct"":68.62},""statements"":{""total"":325,""covered"":211,""skipped"":0,""pct"":64.92},""branches"":{""total"":115,""covered"":75,""skipped"":0,""pct"":65.21}}
 ,""/Users/zachleat/Code/eleventy/src/EleventyBaseError.js"": {""lines"":{""total"":6,""covered"":6,""skipped"":0,""pct"":100},""functions"":{""total"":1,""covered"":1,""skipped"":0,""pct"":100},""statements"":{""total"":6,""covered"":6,""skipped"":0,""pct"":100},""branches"":{""total"":2,""covered"":2,""skipped"":0,""pct"":100}}
 ,""/Users/zachleat/Code/eleventy/src/EleventyCommandCheckError.js"": {""lines"":{""total"":2,""covered"":2,""skipped"":0,""pct"":100},""functions"":{""total"":0,""covered"":0,""skipped"":0,""pct"":100},""statements"":{""total"":2,""covered"":2,""skipped"":0,""pct"":100},""branches"":{""total"":0,""covered"":0,""skipped"":0,""pct"":100}}
-,""/Users/zachleat/Code/eleventy/src/EleventyErrorHandler.js"": {""lines"":{""total"":38,""covered"":35,""skipped"":0,""pct"":92.1},""functions"":{""total"":10,""covered"":10,""skipped"":0,""pct"":100},""statements"":{""total"":38,""covered"":35,""skipped"":0,""pct"":92.1},""branches"":{""total"":37,""covered"":25,""skipped"":0,""pct"":67.56}}
+,""/Users/zachleat/Code/eleventy/src/EleventyErrorHandler.js"": {""lines"":{""total"":45,""covered"":42,""skipped"":0,""pct"":93.33},""functions"":{""total"":10,""covered"":10,""skipped"":0,""pct"":100},""statements"":{""total"":45,""covered"":42,""skipped"":0,""pct"":93.33},""branches"":{""total"":32,""covered"":21,""skipped"":0,""pct"":65.62}}
 ,""/Users/zachleat/Code/eleventy/src/EleventyErrorUtil.js"": {""lines"":{""total"":23,""covered"":23,""skipped"":0,""pct"":100},""functions"":{""total"":7,""covered"":7,""skipped"":0,""pct"":100},""statements"":{""total"":23,""covered"":23,""skipped"":0,""pct"":100},""branches"":{""total"":20,""covered"":20,""skipped"":0,""pct"":100}}
 ,""/Users/zachleat/Code/eleventy/src/EleventyExtensionMap.js"": {""lines"":{""total"":107,""covered"":104,""skipped"":0,""pct"":97.19},""functions"":{""total"":30,""covered"":29,""skipped"":0,""pct"":96.66},""statements"":{""total"":107,""covered"":104,""skipped"":0,""pct"":97.19},""branches"":{""total"":49,""covered"":43,""skipped"":0,""pct"":87.75}}
 ,""/Users/zachleat/Code/eleventy/src/EleventyFiles.js"": {""lines"":{""total"":191,""covered"":171,""skipped"":0,""pct"":89.52},""functions"":{""total"":45,""covered"":40,""skipped"":0,""pct"":88.88},""statements"":{""total"":193,""covered"":173,""skipped"":0,""pct"":89.63},""branches"":{""total"":73,""covered"":56,""skipped"":0,""pct"":76.71}}
@@ -27,29 +27,28 @@
 ,""/Users/zachleat/Code/eleventy/src/EleventyWatch.js"": {""lines"":{""total"":39,""covered"":39,""skipped"":0,""pct"":100},""functions"":{""total"":17,""covered"":17,""skipped"":0,""pct"":100},""statements"":{""total"":40,""covered"":40,""skipped"":0,""pct"":100},""branches"":{""total"":21,""covered"":19,""skipped"":0,""pct"":90.47}}
 ,""/Users/zachleat/Code/eleventy/src/EleventyWatchTargets.js"": {""lines"":{""total"":49,""covered"":45,""skipped"":0,""pct"":91.83},""functions"":{""total"":21,""covered"":18,""skipped"":0,""pct"":85.71},""statements"":{""total"":49,""covered"":45,""skipped"":0,""pct"":91.83},""branches"":{""total"":15,""covered"":14,""skipped"":0,""pct"":93.33}}
 ,""/Users/zachleat/Code/eleventy/src/EventBus.js"": {""lines"":{""total"":6,""covered"":6,""skipped"":0,""pct"":100},""functions"":{""total"":0,""covered"":0,""skipped"":0,""pct"":100},""statements"":{""total"":6,""covered"":6,""skipped"":0,""pct"":100},""branches"":{""total"":0,""covered"":0,""skipped"":0,""pct"":100}}
-,""/Users/zachleat/Code/eleventy/src/Serverless.js"": {""lines"":{""total"":95,""covered"":72,""skipped"":0,""pct"":75.78},""functions"":{""total"":14,""covered"":12,""skipped"":0,""pct"":85.71},""statements"":{""total"":95,""covered"":72,""skipped"":0,""pct"":75.78},""branches"":{""total"":38,""covered"":24,""skipped"":0,""pct"":63.15}}
-,""/Users/zachleat/Code/eleventy/src/Template.js"": {""lines"":{""total"":411,""covered"":383,""skipped"":0,""pct"":93.18},""functions"":{""total"":71,""covered"":69,""skipped"":0,""pct"":97.18},""statements"":{""total"":413,""covered"":385,""skipped"":0,""pct"":93.22},""branches"":{""total"":195,""covered"":168,""skipped"":0,""pct"":86.15}}
+,""/Users/zachleat/Code/eleventy/src/Serverless.js"": {""lines"":{""total"":94,""covered"":71,""skipped"":0,""pct"":75.53},""functions"":{""total"":14,""covered"":12,""skipped"":0,""pct"":85.71},""statements"":{""total"":94,""covered"":71,""skipped"":0,""pct"":75.53},""branches"":{""total"":38,""covered"":24,""skipped"":0,""pct"":63.15}}
+,""/Users/zachleat/Code/eleventy/src/Template.js"": {""lines"":{""total"":418,""covered"":394,""skipped"":0,""pct"":94.25},""functions"":{""total"":71,""covered"":70,""skipped"":0,""pct"":98.59},""statements"":{""total"":420,""covered"":396,""skipped"":0,""pct"":94.28},""branches"":{""total"":200,""covered"":173,""skipped"":0,""pct"":86.5}}
 ,""/Users/zachleat/Code/eleventy/src/TemplateBehavior.js"": {""lines"":{""total"":24,""covered"":21,""skipped"":0,""pct"":87.5},""functions"":{""total"":7,""covered"":7,""skipped"":0,""pct"":100},""statements"":{""total"":24,""covered"":21,""skipped"":0,""pct"":87.5},""branches"":{""total"":14,""covered"":12,""skipped"":0,""pct"":85.71}}
 ,""/Users/zachleat/Code/eleventy/src/TemplateCache.js"": {""lines"":{""total"":11,""covered"":9,""skipped"":0,""pct"":81.81},""functions"":{""total"":7,""covered"":6,""skipped"":0,""pct"":85.71},""statements"":{""total"":11,""covered"":9,""skipped"":0,""pct"":81.81},""branches"":{""total"":4,""covered"":2,""skipped"":0,""pct"":50}}
 ,""/Users/zachleat/Code/eleventy/src/TemplateCollection.js"": {""lines"":{""total"":42,""covered"":37,""skipped"":0,""pct"":88.09},""functions"":{""total"":15,""covered"":14,""skipped"":0,""pct"":93.33},""statements"":{""total"":44,""covered"":39,""skipped"":0,""pct"":88.63},""branches"":{""total"":16,""covered"":11,""skipped"":0,""pct"":68.75}}
-,""/Users/zachleat/Code/eleventy/src/TemplateConfig.js"": {""lines"":{""total"":86,""covered"":74,""skipped"":0,""pct"":86.04},""functions"":{""total"":14,""covered"":9,""skipped"":0,""pct"":64.28},""statements"":{""total"":86,""covered"":74,""skipped"":0,""pct"":86.04},""branches"":{""total"":41,""covered"":35,""skipped"":0,""pct"":85.36}}
-,""/Users/zachleat/Code/eleventy/src/TemplateContent.js"": {""lines"":{""total"":207,""covered"":185,""skipped"":0,""pct"":89.37},""functions"":{""total"":36,""covered"":35,""skipped"":0,""pct"":97.22},""statements"":{""total"":207,""covered"":185,""skipped"":0,""pct"":89.37},""branches"":{""total"":115,""covered"":89,""skipped"":0,""pct"":77.39}}
-,""/Users/zachleat/Code/eleventy/src/TemplateData.js"": {""lines"":{""total"":264,""covered"":252,""skipped"":0,""pct"":95.45},""functions"":{""total"":50,""covered"":49,""skipped"":0,""pct"":98},""statements"":{""total"":267,""covered"":255,""skipped"":0,""pct"":95.5},""branches"":{""total"":105,""covered"":89,""skipped"":0,""pct"":84.76}}
+,""/Users/zachleat/Code/eleventy/src/TemplateConfig.js"": {""lines"":{""total"":94,""covered"":75,""skipped"":0,""pct"":79.78},""functions"":{""total"":14,""covered"":8,""skipped"":0,""pct"":57.14},""statements"":{""total"":94,""covered"":75,""skipped"":0,""pct"":79.78},""branches"":{""total"":45,""covered"":35,""skipped"":0,""pct"":77.77}}
+,""/Users/zachleat/Code/eleventy/src/TemplateContent.js"": {""lines"":{""total"":214,""covered"":193,""skipped"":0,""pct"":90.18},""functions"":{""total"":37,""covered"":36,""skipped"":0,""pct"":97.29},""statements"":{""total"":214,""covered"":193,""skipped"":0,""pct"":90.18},""branches"":{""total"":123,""covered"":98,""skipped"":0,""pct"":79.67}}
+,""/Users/zachleat/Code/eleventy/src/TemplateData.js"": {""lines"":{""total"":267,""covered"":255,""skipped"":0,""pct"":95.5},""functions"":{""total"":50,""covered"":49,""skipped"":0,""pct"":98},""statements"":{""total"":270,""covered"":258,""skipped"":0,""pct"":95.55},""branches"":{""total"":105,""covered"":89,""skipped"":0,""pct"":84.76}}
 ,""/Users/zachleat/Code/eleventy/src/TemplateEngineManager.js"": {""lines"":{""total"":52,""covered"":50,""skipped"":0,""pct"":96.15},""functions"":{""total"":7,""covered"":6,""skipped"":0,""pct"":85.71},""statements"":{""total"":52,""covered"":50,""skipped"":0,""pct"":96.15},""branches"":{""total"":34,""covered"":33,""skipped"":0,""pct"":97.05}}
 ,""/Users/zachleat/Code/eleventy/src/TemplateFileSlug.js"": {""lines"":{""total"":22,""covered"":22,""skipped"":0,""pct"":100},""functions"":{""total"":4,""covered"":4,""skipped"":0,""pct"":100},""statements"":{""total"":22,""covered"":22,""skipped"":0,""pct"":100},""branches"":{""total"":8,""covered"":8,""skipped"":0,""pct"":100}}
 ,""/Users/zachleat/Code/eleventy/src/TemplateGlob.js"": {""lines"":{""total"":15,""covered"":14,""skipped"":0,""pct"":93.33},""functions"":{""total"":4,""covered"":4,""skipped"":0,""pct"":100},""statements"":{""total"":15,""covered"":14,""skipped"":0,""pct"":93.33},""branches"":{""total"":8,""covered"":7,""skipped"":0,""pct"":87.5}}
 ,""/Users/zachleat/Code/eleventy/src/TemplateLayout.js"": {""lines"":{""total"":78,""covered"":72,""skipped"":0,""pct"":92.3},""functions"":{""total"":10,""covered"":10,""skipped"":0,""pct"":100},""statements"":{""total"":79,""covered"":73,""skipped"":0,""pct"":92.4},""branches"":{""total"":20,""covered"":17,""skipped"":0,""pct"":85}}
 ,""/Users/zachleat/Code/eleventy/src/TemplateLayoutPathResolver.js"": {""lines"":{""total"":48,""covered"":44,""skipped"":0,""pct"":91.66},""functions"":{""total"":11,""covered"":11,""skipped"":0,""pct"":100},""statements"":{""total"":48,""covered"":44,""skipped"":0,""pct"":91.66},""branches"":{""total"":22,""covered"":18,""skipped"":0,""pct"":81.81}}
-,""/Users/zachleat/Code/eleventy/src/TemplateMap.js"": {""lines"":{""total"":279,""covered"":270,""skipped"":0,""pct"":96.77},""functions"":{""total"":37,""covered"":35,""skipped"":0,""pct"":94.59},""statements"":{""total"":279,""covered"":270,""skipped"":0,""pct"":96.77},""branches"":{""total"":152,""covered"":131,""skipped"":0,""pct"":86.18}}
-,""/Users/zachleat/Code/eleventy/src/TemplatePassthrough.js"": {""lines"":{""total"":60,""covered"":57,""skipped"":0,""pct"":95},""functions"":{""total"":14,""covered"":13,""skipped"":0,""pct"":92.85},""statements"":{""total"":60,""covered"":57,""skipped"":0,""pct"":95},""branches"":{""total"":14,""covered"":12,""skipped"":0,""pct"":85.71}}
-,""/Users/zachleat/Code/eleventy/src/TemplatePassthroughManager.js"": {""lines"":{""total"":93,""covered"":80,""skipped"":0,""pct"":86.02},""functions"":{""total"":23,""covered"":23,""skipped"":0,""pct"":100},""statements"":{""total"":93,""covered"":80,""skipped"":0,""pct"":86.02},""branches"":{""total"":38,""covered"":27,""skipped"":0,""pct"":71.05}}
-,""/Users/zachleat/Code/eleventy/src/TemplatePath.js"": {""lines"":{""total"":98,""covered"":98,""skipped"":0,""pct"":100},""functions"":{""total"":28,""covered"":27,""skipped"":0,""pct"":96.42},""statements"":{""total"":99,""covered"":99,""skipped"":0,""pct"":100},""branches"":{""total"":55,""covered"":55,""skipped"":0,""pct"":100}}
-,""/Users/zachleat/Code/eleventy/src/TemplatePermalink.js"": {""lines"":{""total"":78,""covered"":70,""skipped"":0,""pct"":89.74},""functions"":{""total"":10,""covered"":9,""skipped"":0,""pct"":90},""statements"":{""total"":78,""covered"":70,""skipped"":0,""pct"":89.74},""branches"":{""total"":69,""covered"":62,""skipped"":0,""pct"":89.85}}
+,""/Users/zachleat/Code/eleventy/src/TemplateMap.js"": {""lines"":{""total"":279,""covered"":270,""skipped"":0,""pct"":96.77},""functions"":{""total"":37,""covered"":35,""skipped"":0,""pct"":94.59},""statements"":{""total"":279,""covered"":270,""skipped"":0,""pct"":96.77},""branches"":{""total"":154,""covered"":133,""skipped"":0,""pct"":86.36}}
+,""/Users/zachleat/Code/eleventy/src/TemplatePassthrough.js"": {""lines"":{""total"":70,""covered"":66,""skipped"":0,""pct"":94.28},""functions"":{""total"":15,""covered"":14,""skipped"":0,""pct"":93.33},""statements"":{""total"":70,""covered"":66,""skipped"":0,""pct"":94.28},""branches"":{""total"":20,""covered"":17,""skipped"":0,""pct"":85}}
+,""/Users/zachleat/Code/eleventy/src/TemplatePassthroughManager.js"": {""lines"":{""total"":100,""covered"":86,""skipped"":0,""pct"":86},""functions"":{""total"":23,""covered"":23,""skipped"":0,""pct"":100},""statements"":{""total"":100,""covered"":86,""skipped"":0,""pct"":86},""branches"":{""total"":44,""covered"":31,""skipped"":0,""pct"":70.45}}
+,""/Users/zachleat/Code/eleventy/src/TemplatePermalink.js"": {""lines"":{""total"":81,""covered"":72,""skipped"":0,""pct"":88.88},""functions"":{""total"":10,""covered"":9,""skipped"":0,""pct"":90},""statements"":{""total"":81,""covered"":72,""skipped"":0,""pct"":88.88},""branches"":{""total"":71,""covered"":63,""skipped"":0,""pct"":88.73}}
 ,""/Users/zachleat/Code/eleventy/src/TemplateRender.js"": {""lines"":{""total"":91,""covered"":86,""skipped"":0,""pct"":94.5},""functions"":{""total"":23,""covered"":23,""skipped"":0,""pct"":100},""statements"":{""total"":91,""covered"":86,""skipped"":0,""pct"":94.5},""branches"":{""total"":59,""covered"":53,""skipped"":0,""pct"":89.83}}
 ,""/Users/zachleat/Code/eleventy/src/TemplateWriter.js"": {""lines"":{""total"":145,""covered"":117,""skipped"":0,""pct"":80.68},""functions"":{""total"":39,""covered"":28,""skipped"":0,""pct"":71.79},""statements"":{""total"":145,""covered"":117,""skipped"":0,""pct"":80.68},""branches"":{""total"":36,""covered"":19,""skipped"":0,""pct"":52.77}}
-,""/Users/zachleat/Code/eleventy/src/UserConfig.js"": {""lines"":{""total"":246,""covered"":168,""skipped"":0,""pct"":68.29},""functions"":{""total"":65,""covered"":40,""skipped"":0,""pct"":61.53},""statements"":{""total"":246,""covered"":168,""skipped"":0,""pct"":68.29},""branches"":{""total"":101,""covered"":52,""skipped"":0,""pct"":51.48}}
+,""/Users/zachleat/Code/eleventy/src/UserConfig.js"": {""lines"":{""total"":253,""covered"":183,""skipped"":0,""pct"":72.33},""functions"":{""total"":66,""covered"":43,""skipped"":0,""pct"":65.15},""statements"":{""total"":253,""covered"":183,""skipped"":0,""pct"":72.33},""branches"":{""total"":107,""covered"":58,""skipped"":0,""pct"":54.2}}
 ,""/Users/zachleat/Code/eleventy/src/defaultConfig.js"": {""lines"":{""total"":21,""covered"":18,""skipped"":0,""pct"":85.71},""functions"":{""total"":5,""covered"":2,""skipped"":0,""pct"":40},""statements"":{""total"":21,""covered"":18,""skipped"":0,""pct"":85.71},""branches"":{""total"":2,""covered"":2,""skipped"":0,""pct"":100}}
-,""/Users/zachleat/Code/eleventy/src/Engines/Custom.js"": {""lines"":{""total"":92,""covered"":81,""skipped"":0,""pct"":88.04},""functions"":{""total"":13,""covered"":13,""skipped"":0,""pct"":100},""statements"":{""total"":93,""covered"":82,""skipped"":0,""pct"":88.17},""branches"":{""total"":62,""covered"":49,""skipped"":0,""pct"":79.03}}
+,""/Users/zachleat/Code/eleventy/src/Engines/Custom.js"": {""lines"":{""total"":94,""covered"":84,""skipped"":0,""pct"":89.36},""functions"":{""total"":14,""covered"":14,""skipped"":0,""pct"":100},""statements"":{""total"":96,""covered"":86,""skipped"":0,""pct"":89.58},""branches"":{""total"":70,""covered"":57,""skipped"":0,""pct"":81.42}}
 ,""/Users/zachleat/Code/eleventy/src/Engines/Ejs.js"": {""lines"":{""total"":19,""covered"":18,""skipped"":0,""pct"":94.73},""functions"":{""total"":7,""covered"":6,""skipped"":0,""pct"":85.71},""statements"":{""total"":19,""covered"":18,""skipped"":0,""pct"":94.73},""branches"":{""total"":9,""covered"":8,""skipped"":0,""pct"":88.88}}
 ,""/Users/zachleat/Code/eleventy/src/Engines/Haml.js"": {""lines"":{""total"":8,""covered"":8,""skipped"":0,""pct"":100},""functions"":{""total"":3,""covered"":3,""skipped"":0,""pct"":100},""statements"":{""total"":8,""covered"":8,""skipped"":0,""pct"":100},""branches"":{""total"":2,""covered"":2,""skipped"":0,""pct"":100}}
 ,""/Users/zachleat/Code/eleventy/src/Engines/Handlebars.js"": {""lines"":{""total"":29,""covered"":29,""skipped"":0,""pct"":100},""functions"":{""total"":9,""covered"":9,""skipped"":0,""pct"":100},""statements"":{""total"":29,""covered"":29,""skipped"":0,""pct"":100},""branches"":{""total"":6,""covered"":5,""skipped"":0,""pct"":83.33}}
@@ -60,12 +59,12 @@
 ,""/Users/zachleat/Code/eleventy/src/Engines/Mustache.js"": {""lines"":{""total"":10,""covered"":10,""skipped"":0,""pct"":100},""functions"":{""total"":4,""covered"":4,""skipped"":0,""pct"":100},""statements"":{""total"":10,""covered"":10,""skipped"":0,""pct"":100},""branches"":{""total"":2,""covered"":2,""skipped"":0,""pct"":100}}
 ,""/Users/zachleat/Code/eleventy/src/Engines/Nunjucks.js"": {""lines"":{""total"":203,""covered"":138,""skipped"":0,""pct"":67.98},""functions"":{""total"":49,""covered"":37,""skipped"":0,""pct"":75.51},""statements"":{""total"":203,""covered"":138,""skipped"":0,""pct"":67.98},""branches"":{""total"":84,""covered"":54,""skipped"":0,""pct"":64.28}}
 ,""/Users/zachleat/Code/eleventy/src/Engines/Pug.js"": {""lines"":{""total"":14,""covered"":14,""skipped"":0,""pct"":100},""functions"":{""total"":4,""covered"":4,""skipped"":0,""pct"":100},""statements"":{""total"":14,""covered"":14,""skipped"":0,""pct"":100},""branches"":{""total"":11,""covered"":9,""skipped"":0,""pct"":81.81}}
-,""/Users/zachleat/Code/eleventy/src/Engines/TemplateEngine.js"": {""lines"":{""total"":75,""covered"":74,""skipped"":0,""pct"":98.66},""functions"":{""total"":26,""covered"":26,""skipped"":0,""pct"":100},""statements"":{""total"":77,""covered"":76,""skipped"":0,""pct"":98.7},""branches"":{""total"":16,""covered"":15,""skipped"":0,""pct"":93.75}}
+,""/Users/zachleat/Code/eleventy/src/Engines/TemplateEngine.js"": {""lines"":{""total"":77,""covered"":76,""skipped"":0,""pct"":98.7},""functions"":{""total"":27,""covered"":27,""skipped"":0,""pct"":100},""statements"":{""total"":79,""covered"":78,""skipped"":0,""pct"":98.73},""branches"":{""total"":18,""covered"":17,""skipped"":0,""pct"":94.44}}
 ,""/Users/zachleat/Code/eleventy/src/Errors/TemplateContentPrematureUseError.js"": {""lines"":{""total"":2,""covered"":2,""skipped"":0,""pct"":100},""functions"":{""total"":0,""covered"":0,""skipped"":0,""pct"":100},""statements"":{""total"":2,""covered"":2,""skipped"":0,""pct"":100},""branches"":{""total"":0,""covered"":0,""skipped"":0,""pct"":100}}
 ,""/Users/zachleat/Code/eleventy/src/Errors/TemplateContentUnrenderedTemplateError.js"": {""lines"":{""total"":2,""covered"":2,""skipped"":0,""pct"":100},""functions"":{""total"":0,""covered"":0,""skipped"":0,""pct"":100},""statements"":{""total"":2,""covered"":2,""skipped"":0,""pct"":100},""branches"":{""total"":0,""covered"":0,""skipped"":0,""pct"":100}}
 ,""/Users/zachleat/Code/eleventy/src/Errors/UsingCircularTemplateContentReferenceError.js"": {""lines"":{""total"":2,""covered"":2,""skipped"":0,""pct"":100},""functions"":{""total"":0,""covered"":0,""skipped"":0,""pct"":100},""statements"":{""total"":2,""covered"":2,""skipped"":0,""pct"":100},""branches"":{""total"":0,""covered"":0,""skipped"":0,""pct"":100}}
 ,""/Users/zachleat/Code/eleventy/src/Filters/GetCollectionItem.js"": {""lines"":{""total"":10,""covered"":10,""skipped"":0,""pct"":100},""functions"":{""total"":1,""covered"":1,""skipped"":0,""pct"":100},""statements"":{""total"":10,""covered"":10,""skipped"":0,""pct"":100},""branches"":{""total"":14,""covered"":13,""skipped"":0,""pct"":92.85}}
-,""/Users/zachleat/Code/eleventy/src/Filters/ServerlessUrl.js"": {""lines"":{""total"":7,""covered"":7,""skipped"":0,""pct"":100},""functions"":{""total"":3,""covered"":3,""skipped"":0,""pct"":100},""statements"":{""total"":8,""covered"":8,""skipped"":0,""pct"":100},""branches"":{""total"":4,""covered"":3,""skipped"":0,""pct"":75}}
+,""/Users/zachleat/Code/eleventy/src/Filters/ServerlessUrl.js"": {""lines"":{""total"":17,""covered"":17,""skipped"":0,""pct"":100},""functions"":{""total"":4,""covered"":4,""skipped"":0,""pct"":100},""statements"":{""total"":17,""covered"":17,""skipped"":0,""pct"":100},""branches"":{""total"":6,""covered"":5,""skipped"":0,""pct"":83.33}}
 ,""/Users/zachleat/Code/eleventy/src/Filters/Slug.js"": {""lines"":{""total"":3,""covered"":3,""skipped"":0,""pct"":100},""functions"":{""total"":1,""covered"":1,""skipped"":0,""pct"":100},""statements"":{""total"":3,""covered"":3,""skipped"":0,""pct"":100},""branches"":{""total"":1,""covered"":1,""skipped"":0,""pct"":100}}
 ,""/Users/zachleat/Code/eleventy/src/Filters/Slugify.js"": {""lines"":{""total"":3,""covered"":3,""skipped"":0,""pct"":100},""functions"":{""total"":1,""covered"":1,""skipped"":0,""pct"":100},""statements"":{""total"":3,""covered"":3,""skipped"":0,""pct"":100},""branches"":{""total"":1,""covered"":1,""skipped"":0,""pct"":100}}
 ,""/Users/zachleat/Code/eleventy/src/Filters/Url.js"": {""lines"":{""total"":20,""covered"":19,""skipped"":0,""pct"":95},""functions"":{""total"":2,""covered"":2,""skipped"":0,""pct"":100},""statements"":{""total"":20,""covered"":19,""skipped"":0,""pct"":95},""branches"":{""total"":21,""covered"":20,""skipped"":0,""pct"":95.23}}
@@ -74,8 +73,10 @@
 ,""/Users/zachleat/Code/eleventy/src/Plugins/ServerlessBundlerPlugin.js"": {""lines"":{""total"":186,""covered"":12,""skipped"":0,""pct"":6.45},""functions"":{""total"":34,""covered"":0,""skipped"":0,""pct"":0},""statements"":{""total"":188,""covered"":12,""skipped"":0,""pct"":6.38},""branches"":{""total"":91,""covered"":0,""skipped"":0,""pct"":0}}
 ,""/Users/zachleat/Code/eleventy/src/Util/AsyncEventEmitter.js"": {""lines"":{""total"":6,""covered"":6,""skipped"":0,""pct"":100},""functions"":{""total"":2,""covered"":2,""skipped"":0,""pct"":100},""statements"":{""total"":7,""covered"":7,""skipped"":0,""pct"":100},""branches"":{""total"":2,""covered"":2,""skipped"":0,""pct"":100}}
 ,""/Users/zachleat/Code/eleventy/src/Util/ConsoleLogger.js"": {""lines"":{""total"":28,""covered"":24,""skipped"":0,""pct"":85.71},""functions"":{""total"":13,""covered"":10,""skipped"":0,""pct"":76.92},""statements"":{""total"":28,""covered"":24,""skipped"":0,""pct"":85.71},""branches"":{""total"":19,""covered"":17,""skipped"":0,""pct"":89.47}}
+,""/Users/zachleat/Code/eleventy/src/Util/DateGitLastUpdated.js"": {""lines"":{""total"":6,""covered"":6,""skipped"":0,""pct"":100},""functions"":{""total"":2,""covered"":2,""skipped"":0,""pct"":100},""statements"":{""total"":6,""covered"":6,""skipped"":0,""pct"":100},""branches"":{""total"":2,""covered"":1,""skipped"":0,""pct"":50}}
 ,""/Users/zachleat/Code/eleventy/src/Util/DeleteRequireCache.js"": {""lines"":{""total"":4,""covered"":4,""skipped"":0,""pct"":100},""functions"":{""total"":1,""covered"":1,""skipped"":0,""pct"":100},""statements"":{""total"":4,""covered"":4,""skipped"":0,""pct"":100},""branches"":{""total"":0,""covered"":0,""skipped"":0,""pct"":100}}
 ,""/Users/zachleat/Code/eleventy/src/Util/GetJavaScriptData.js"": {""lines"":{""total"":8,""covered"":8,""skipped"":0,""pct"":100},""functions"":{""total"":1,""covered"":1,""skipped"":0,""pct"":100},""statements"":{""total"":8,""covered"":8,""skipped"":0,""pct"":100},""branches"":{""total"":14,""covered"":14,""skipped"":0,""pct"":100}}
+,""/Users/zachleat/Code/eleventy/src/Util/IsPlainObject.js"": {""lines"":{""total"":5,""covered"":5,""skipped"":0,""pct"":100},""functions"":{""total"":1,""covered"":1,""skipped"":0,""pct"":100},""statements"":{""total"":5,""covered"":5,""skipped"":0,""pct"":100},""branches"":{""total"":6,""covered"":6,""skipped"":0,""pct"":100}}
 ,""/Users/zachleat/Code/eleventy/src/Util/Merge.js"": {""lines"":{""total"":28,""covered"":26,""skipped"":0,""pct"":92.85},""functions"":{""total"":2,""covered"":2,""skipped"":0,""pct"":100},""statements"":{""total"":28,""covered"":26,""skipped"":0,""pct"":92.85},""branches"":{""total"":24,""covered"":21,""skipped"":0,""pct"":87.5}}
 ,""/Users/zachleat/Code/eleventy/src/Util/Pluralize.js"": {""lines"":{""total"":2,""covered"":2,""skipped"":0,""pct"":100},""functions"":{""total"":1,""covered"":1,""skipped"":0,""pct"":100},""statements"":{""total"":2,""covered"":2,""skipped"":0,""pct"":100},""branches"":{""total"":2,""covered"":2,""skipped"":0,""pct"":100}}
 ,""/Users/zachleat/Code/eleventy/src/Util/Sortable.js"": {""lines"":{""total"":48,""covered"":45,""skipped"":0,""pct"":93.75},""functions"":{""total"":20,""covered"":18,""skipped"":0,""pct"":90},""statements"":{""total"":48,""covered"":45,""skipped"":0,""pct"":93.75},""branches"":{""total"":20,""covered"":18,""skipped"":0,""pct"":90}}
diff --git a/docs/coverage.md b/docs/coverage.md
index 0d0332a7..ce4b3303 100644
--- a/docs/coverage.md
+++ b/docs/coverage.md
@@ -1,8 +1,8 @@
-# Code Coverage for Eleventy v1.0.0
+# Code Coverage for Eleventy v1.0.2
 
 | Filename                                                                 | % Lines | % Statements | % Functions | % Branches |
 | ------------------------------------------------------------------------ | ------- | ------------ | ----------- | ---------- |
-| `total`                                                                  | 83.8%   | 83.83%       | 84.68%      | 75.6%      |
+| `total`                                                                  | 83.78%  | 83.81%       | 84.57%      | 75.26%     |
 | `cmd.js`                                                                 | 62.26%  | 62.26%       | 9.09%       | 59.09%     |
 | `.cache/vue/include.js`                                                  | 100%    | 100%         | 100%        | 100%       |
 | `.cache/vue/include.vue_vue_type_script_lang.js`                         | 100%    | 100%         | 100%        | 100%       |
@@ -13,17 +13,17 @@
 | `.cache/vue/_includes/include.js`                                        | 100%    | 100%         | 100%        | 100%       |
 | `.cache/vue/_includes/include.vue_vue_type_script_lang.js`               | 100%    | 100%         | 100%        | 100%       |
 | `.cache/vue/_includes/include.vue_vue_type_template_id_d3bb7f88_lang.js` | 100%    | 100%         | 100%        | 100%       |
-| `src/Benchmark.js`                                                       | 94.44%  | 94.44%       | 100%        | 83.33%     |
-| `src/BenchmarkGroup.js`                                                  | 75.55%  | 75.55%       | 70%         | 60%        |
-| `src/BenchmarkManager.js`                                                | 77.77%  | 77.77%       | 75%         | 75%        |
+| `src/Benchmark.js`                                                       | 94.73%  | 94.73%       | 100%        | 83.33%     |
+| `src/BenchmarkGroup.js`                                                  | 73.91%  | 73.91%       | 63.63%      | 60%        |
+| `src/BenchmarkManager.js`                                                | 74.07%  | 74.07%       | 66.66%      | 75%        |
 | `src/ComputedData.js`                                                    | 100%    | 100%         | 100%        | 96.55%     |
-| `src/ComputedDataProxy.js`                                               | 98.03%  | 98.03%       | 100%        | 90.62%     |
+| `src/ComputedDataProxy.js`                                               | 96.07%  | 96.07%       | 100%        | 87.5%      |
 | `src/ComputedDataQueue.js`                                               | 100%    | 100%         | 100%        | 72.72%     |
 | `src/ComputedDataTemplateString.js`                                      | 92.3%   | 92.3%        | 100%        | 71.42%     |
-| `src/Eleventy.js`                                                        | 65.01%  | 64.81%       | 67.34%      | 64.95%     |
+| `src/Eleventy.js`                                                        | 65.12%  | 64.92%       | 68.62%      | 65.21%     |
 | `src/EleventyBaseError.js`                                               | 100%    | 100%         | 100%        | 100%       |
 | `src/EleventyCommandCheckError.js`                                       | 100%    | 100%         | 100%        | 100%       |
-| `src/EleventyErrorHandler.js`                                            | 92.1%   | 92.1%        | 100%        | 67.56%     |
+| `src/EleventyErrorHandler.js`                                            | 93.33%  | 93.33%       | 100%        | 65.62%     |
 | `src/EleventyErrorUtil.js`                                               | 100%    | 100%         | 100%        | 100%       |
 | `src/EleventyExtensionMap.js`                                            | 97.19%  | 97.19%       | 96.66%      | 87.75%     |
 | `src/EleventyFiles.js`                                                   | 89.52%  | 89.63%       | 88.88%      | 76.71%     |
@@ -31,29 +31,28 @@
 | `src/EleventyWatch.js`                                                   | 100%    | 100%         | 100%        | 90.47%     |
 | `src/EleventyWatchTargets.js`                                            | 91.83%  | 91.83%       | 85.71%      | 93.33%     |
 | `src/EventBus.js`                                                        | 100%    | 100%         | 100%        | 100%       |
-| `src/Serverless.js`                                                      | 75.78%  | 75.78%       | 85.71%      | 63.15%     |
-| `src/Template.js`                                                        | 93.18%  | 93.22%       | 97.18%      | 86.15%     |
+| `src/Serverless.js`                                                      | 75.53%  | 75.53%       | 85.71%      | 63.15%     |
+| `src/Template.js`                                                        | 94.25%  | 94.28%       | 98.59%      | 86.5%      |
 | `src/TemplateBehavior.js`                                                | 87.5%   | 87.5%        | 100%        | 85.71%     |
 | `src/TemplateCache.js`                                                   | 81.81%  | 81.81%       | 85.71%      | 50%        |
 | `src/TemplateCollection.js`                                              | 88.09%  | 88.63%       | 93.33%      | 68.75%     |
-| `src/TemplateConfig.js`                                                  | 86.04%  | 86.04%       | 64.28%      | 85.36%     |
-| `src/TemplateContent.js`                                                 | 89.37%  | 89.37%       | 97.22%      | 77.39%     |
-| `src/TemplateData.js`                                                    | 95.45%  | 95.5%        | 98%         | 84.76%     |
+| `src/TemplateConfig.js`                                                  | 79.78%  | 79.78%       | 57.14%      | 77.77%     |
+| `src/TemplateContent.js`                                                 | 90.18%  | 90.18%       | 97.29%      | 79.67%     |
+| `src/TemplateData.js`                                                    | 95.5%   | 95.55%       | 98%         | 84.76%     |
 | `src/TemplateEngineManager.js`                                           | 96.15%  | 96.15%       | 85.71%      | 97.05%     |
 | `src/TemplateFileSlug.js`                                                | 100%    | 100%         | 100%        | 100%       |
 | `src/TemplateGlob.js`                                                    | 93.33%  | 93.33%       | 100%        | 87.5%      |
 | `src/TemplateLayout.js`                                                  | 92.3%   | 92.4%        | 100%        | 85%        |
 | `src/TemplateLayoutPathResolver.js`                                      | 91.66%  | 91.66%       | 100%        | 81.81%     |
-| `src/TemplateMap.js`                                                     | 96.77%  | 96.77%       | 94.59%      | 86.18%     |
-| `src/TemplatePassthrough.js`                                             | 95%     | 95%          | 92.85%      | 85.71%     |
-| `src/TemplatePassthroughManager.js`                                      | 86.02%  | 86.02%       | 100%        | 71.05%     |
-| `src/TemplatePath.js`                                                    | 100%    | 100%         | 96.42%      | 100%       |
-| `src/TemplatePermalink.js`                                               | 89.74%  | 89.74%       | 90%         | 89.85%     |
+| `src/TemplateMap.js`                                                     | 96.77%  | 96.77%       | 94.59%      | 86.36%     |
+| `src/TemplatePassthrough.js`                                             | 94.28%  | 94.28%       | 93.33%      | 85%        |
+| `src/TemplatePassthroughManager.js`                                      | 86%     | 86%          | 100%        | 70.45%     |
+| `src/TemplatePermalink.js`                                               | 88.88%  | 88.88%       | 90%         | 88.73%     |
 | `src/TemplateRender.js`                                                  | 94.5%   | 94.5%        | 100%        | 89.83%     |
 | `src/TemplateWriter.js`                                                  | 80.68%  | 80.68%       | 71.79%      | 52.77%     |
-| `src/UserConfig.js`                                                      | 68.29%  | 68.29%       | 61.53%      | 51.48%     |
+| `src/UserConfig.js`                                                      | 72.33%  | 72.33%       | 65.15%      | 54.2%      |
 | `src/defaultConfig.js`                                                   | 85.71%  | 85.71%       | 40%         | 100%       |
-| `src/Engines/Custom.js`                                                  | 88.04%  | 88.17%       | 100%        | 79.03%     |
+| `src/Engines/Custom.js`                                                  | 89.36%  | 89.58%       | 100%        | 81.42%     |
 | `src/Engines/Ejs.js`                                                     | 94.73%  | 94.73%       | 85.71%      | 88.88%     |
 | `src/Engines/Haml.js`                                                    | 100%    | 100%         | 100%        | 100%       |
 | `src/Engines/Handlebars.js`                                              | 100%    | 100%         | 100%        | 83.33%     |
@@ -64,12 +63,12 @@
 | `src/Engines/Mustache.js`                                                | 100%    | 100%         | 100%        | 100%       |
 | `src/Engines/Nunjucks.js`                                                | 67.98%  | 67.98%       | 75.51%      | 64.28%     |
 | `src/Engines/Pug.js`                                                     | 100%    | 100%         | 100%        | 81.81%     |
-| `src/Engines/TemplateEngine.js`                                          | 98.66%  | 98.7%        | 100%        | 93.75%     |
+| `src/Engines/TemplateEngine.js`                                          | 98.7%   | 98.73%       | 100%        | 94.44%     |
 | `src/Errors/TemplateContentPrematureUseError.js`                         | 100%    | 100%         | 100%        | 100%       |
 | `src/Errors/TemplateContentUnrenderedTemplateError.js`                   | 100%    | 100%         | 100%        | 100%       |
 | `src/Errors/UsingCircularTemplateContentReferenceError.js`               | 100%    | 100%         | 100%        | 100%       |
 | `src/Filters/GetCollectionItem.js`                                       | 100%    | 100%         | 100%        | 92.85%     |
-| `src/Filters/ServerlessUrl.js`                                           | 100%    | 100%         | 100%        | 75%        |
+| `src/Filters/ServerlessUrl.js`                                           | 100%    | 100%         | 100%        | 83.33%     |
 | `src/Filters/Slug.js`                                                    | 100%    | 100%         | 100%        | 100%       |
 | `src/Filters/Slugify.js`                                                 | 100%    | 100%         | 100%        | 100%       |
 | `src/Filters/Url.js`                                                     | 95%     | 95%          | 100%        | 95.23%     |
@@ -78,8 +77,10 @@
 | `src/Plugins/ServerlessBundlerPlugin.js`                                 | 6.45%   | 6.38%        | 0%          | 0%         |
 | `src/Util/AsyncEventEmitter.js`                                          | 100%    | 100%         | 100%        | 100%       |
 | `src/Util/ConsoleLogger.js`                                              | 85.71%  | 85.71%       | 76.92%      | 89.47%     |
+| `src/Util/DateGitLastUpdated.js`                                         | 100%    | 100%         | 100%        | 50%        |
 | `src/Util/DeleteRequireCache.js`                                         | 100%    | 100%         | 100%        | 100%       |
 | `src/Util/GetJavaScriptData.js`                                          | 100%    | 100%         | 100%        | 100%       |
+| `src/Util/IsPlainObject.js`                                              | 100%    | 100%         | 100%        | 100%       |
 | `src/Util/Merge.js`                                                      | 92.85%  | 92.85%       | 100%        | 87.5%      |
 | `src/Util/Pluralize.js`                                                  | 100%    | 100%         | 100%        | 100%       |
 | `src/Util/Sortable.js`                                                   | 93.75%  | 93.75%       | 90%         | 90%        |
diff --git a/package.json b/package.json
index 26fb67ca..fbab56f5 100755
--- a/package.json
+++ b/package.json
@@ -1,6 +1,6 @@
 {
   ""name"": ""@11ty/eleventy"",
-  ""version"": ""1.0.1"",
+  ""version"": ""1.0.2"",
   ""description"": ""Transform a directory of templates into HTML."",
   ""publishConfig"": {
     ""access"": ""public""
@@ -76,43 +76,43 @@
     ]
   },
   ""devDependencies"": {
-    ""@11ty/eleventy-plugin-syntaxhighlight"": ""^4.0.0"",
+    ""@11ty/eleventy-plugin-syntaxhighlight"": ""^4.1.0"",
     ""@11ty/eleventy-plugin-vue"": ""1.0.0-canary.8"",
-    ""@vue/server-renderer"": ""^3.2.33"",
+    ""@vue/server-renderer"": ""^3.2.37"",
     ""ava"": ""^3.15.0"",
-    ""husky"": ""^7.0.4"",
+    ""husky"": ""^8.0.1"",
     ""js-yaml"": ""^4.1.0"",
-    ""lint-staged"": ""^12.3.8"",
-    ""markdown-it-emoji"": ""^2.0.0"",
-    ""marked"": ""^4.0.14"",
+    ""lint-staged"": ""^13.0.3"",
+    ""markdown-it-emoji"": ""^2.0.2"",
+    ""marked"": ""^4.0.18"",
     ""nyc"": ""^15.1.0"",
-    ""prettier"": ""^2.6.2"",
+    ""prettier"": ""^2.7.1"",
     ""rimraf"": ""^3.0.2"",
-    ""sass"": ""^1.50.0"",
+    ""sass"": ""^1.54.4"",
     ""toml"": ""^3.0.0"",
-    ""vue"": ""^3.2.33""
+    ""vue"": ""^3.2.37""
   },
   ""dependencies"": {
     ""@11ty/dependency-tree"": ""^2.0.1"",
     ""@11ty/eleventy-utils"": ""^1.0.1"",
     ""@iarna/toml"": ""^2.2.5"",
     ""@sindresorhus/slugify"": ""^1.1.2"",
-    ""browser-sync"": ""^2.27.9"",
+    ""browser-sync"": ""^2.27.10"",
     ""chokidar"": ""^3.5.3"",
     ""cross-spawn"": ""^7.0.3"",
     ""debug"": ""^4.3.4"",
     ""dependency-graph"": ""^0.11.0"",
-    ""ejs"": ""^3.1.6"",
+    ""ejs"": ""^3.1.8"",
     ""fast-glob"": ""^3.2.11"",
     ""graceful-fs"": ""^4.2.10"",
     ""gray-matter"": ""^4.0.3"",
     ""hamljs"": ""^0.6.2"",
     ""handlebars"": ""^4.7.7"",
     ""is-glob"": ""^4.0.3"",
-    ""kleur"": ""^4.1.4 "",
-    ""liquidjs"": ""^9.36.1"",
+    ""kleur"": ""^4.1.5"",
+    ""liquidjs"": ""^9.40.0"",
     ""lodash"": ""^4.17.21"",
-    ""luxon"": ""^2.3.2"",
+    ""luxon"": ""^2.5.0"",
     ""markdown-it"": ""^12.3.2"",
     ""minimist"": ""^1.2.6"",
     ""moo"": ""^0.5.1"",
@@ -120,7 +120,7 @@
     ""mustache"": ""^4.2.0"",
     ""normalize-path"": ""^3.0.0"",
     ""nunjucks"": ""^3.2.3"",
-    ""path-to-regexp"": ""^6.2.0"",
+    ""path-to-regexp"": ""^6.2.1"",
     ""please-upgrade-node"": ""^3.2.0"",
     ""pretty"": ""^2.0.0"",
     ""pug"": ""^3.0.2"",
diff --git a/src/Engines/Liquid.js b/src/Engines/Liquid.js
index cc26c256..87ab9d62 100644
--- a/src/Engines/Liquid.js
+++ b/src/Engines/Liquid.js
@@ -116,13 +116,16 @@ class Liquid extends TemplateEngine {
           line: 1,
           col: 1 }*/
         if (arg.type.indexOf(""ignore:"") === -1) {
-          argArray.push(await engine.evalValue(arg.value, scope));
+          // Push the promise into an array instead of awaiting it here.
+          // This forces the promises to run in order with the correct scope value for each arg.
+          // Otherwise they run out of order and can lead to undefined values for arguments in layout template shortcodes.
+          argArray.push(engine.evalValue(arg.value, scope));
         }
         arg = lexer.next();
       }
     }
 
-    return argArray;
+    return await Promise.all(argArray);
   }
 
   static _normalizeShortcodeScope(ctx) {
diff --git a/test/EleventyTest.js b/test/EleventyTest.js
index e50dce3b..a385cfdc 100644
--- a/test/EleventyTest.js
+++ b/test/EleventyTest.js
@@ -3,6 +3,7 @@ const Eleventy = require(""../src/Eleventy"");
 const EleventyWatchTargets = require(""../src/EleventyWatchTargets"");
 const TemplateConfig = require(""../src/TemplateConfig"");
 const DateGitLastUpdated = require(""../src/Util/DateGitLastUpdated"");
+const normalizeNewLines = require(""./Util/normalizeNewLines"");
 
 test(""Eleventy, defaults inherit from config"", async (t) => {
   let elev = new Eleventy();
@@ -424,3 +425,31 @@ test(""#142: date 'git Last Modified' populates page.date"", async (t) => {
   let comparisonDate = DateGitLastUpdated(""./test/stubs-142/index.njk"");
   t.is(result.content.trim(), """" + comparisonDate.getTime());
 });
+
+test(""Liquid shortcode with multiple arguments(issue #2348)"", async (t) => {
+  // NOTE issue #2348 was only active when you were processing multiple templates at the same time.
+
+  let elev = new Eleventy(""./test/stubs-2367/"", ""./test/stubs-2367/_site"", {
+    config: function (eleventyConfig) {
+      eleventyConfig.addShortcode(""simplelink"", function (...args) {
+        return JSON.stringify(args);
+      });
+    },
+  });
+
+  let arr = [
+    ""layout"",
+    ""/mylayout"",
+    ""layout"",
+    ""/mylayout"",
+    ""layout"",
+    ""/mylayout"",
+  ];
+  let str = normalizeNewLines(`${JSON.stringify(arr)}
+${JSON.stringify(arr)}`);
+  let results = await elev.toJSON();
+  t.is(results.length, 2);
+  let content = results.map((entry) => entry.content).sort();
+  t.is(normalizeNewLines(content[0]), str);
+  t.is(normalizeNewLines(content[1]), str);
+});
diff --git a/test/stubs-2367/_includes/layout.liquid b/test/stubs-2367/_includes/layout.liquid
new file mode 100644
index 00000000..6d74116f
--- /dev/null
+++ b/test/stubs-2367/_includes/layout.liquid
@@ -0,0 +1,6 @@
+---
+text: layout
+url: ""/mylayout""
+---
+{% simplelink text url text url text url %}
+{% simplelink text, url, text, url, text, url %}
\\ No newline at end of file
diff --git a/test/stubs-2367/templateWithLiquidShortcodeMultipleArguments-template2.liquid b/test/stubs-2367/templateWithLiquidShortcodeMultipleArguments-template2.liquid
new file mode 100644
index 00000000..716072b7
--- /dev/null
+++ b/test/stubs-2367/templateWithLiquidShortcodeMultipleArguments-template2.liquid
@@ -0,0 +1,3 @@
+---
+layout: layout.liquid
+---
\\ No newline at end of file
diff --git a/test/stubs-2367/templateWithLiquidShortcodeMultipleArguments.liquid b/test/stubs-2367/templateWithLiquidShortcodeMultipleArguments.liquid
new file mode 100644
index 00000000..716072b7
--- /dev/null
+++ b/test/stubs-2367/templateWithLiquidShortcodeMultipleArguments.liquid
@@ -0,0 +1,3 @@
+---
+layout: layout.liquid
+---
\\ No newline at end of file
","Eleventy v1.0.2
Full docs for v1.0.2 on our web site
This project would not be possible without our lovely community. Thank you to everyone that built something with Eleventy (×595 authors on our web site!), wrote a blog post about Eleventy, contributed code to core or plugins, documentation, asked questions, answered questions, braved The Leaderboards, participated on Discord, filed issues, attended (or organized!) a meetup, said a kind word on Twitter .
A super special thanks to Peter DeHaan for their tireless contributions on the Eleventy Issue tracker.
All of our supporters on Open Collective
Gold Sponsors: Sanity.io, Nordhealth, CloudCannon and Silver Sponsors: Set Creative Studio, Unabridged Software, PQINA, The Coders Guild, Bejamas, Nathan Smith, Flatirons Development, Monarch Air Group, Ben Nash, getform.io, OCEG, Mercury Jets
A full list of Backers can be found below!
Contribute on Open Collective
How else can you contribute to Eleventy?
Install or Upgrade
Install to your local project: npm install @11ty/eleventy
Already installed in your local project? Upgrade your version: npm update @11ty/eleventy
Read more about local project versus global installation
Features
Fixes for liquid argument parsing on shortcodes
Help from @epelc @lexoyo @denisenadal @mahnunchik @harttle
Milestone
All bug fix issues can be perused at the GitHub milestone:
Major Version Dependency Upgrades
There are no major version dependency updates between 1.0.2 and 1.0.1.
THANK YOU NOTES
Gold Sponsors: Sanity.io, Nordhealth, CloudCannon
Silver Sponsors: Set Creative Studio, Unabridged Software, PQINA, The Coders Guild, Bejamas, Nathan Smith, Flatirons Development, Monarch Air Group, Ben Nash, getform.io, OCEG, Mercury Jets
OpenCollective Monthly Backers: Viljami Salminen, Tyler Gaw, Peter deHaan, Melanie Sumner, Alejandro Rodríguez, Mat Marquis, Philip Borenstein, Jérôme Coupé, Max Böck, Bryce Wray, Kristof Michiels, Nicolas Hoizey, Mike Aparicio, Ben Myers, Katie Sylor-Miller, Mark Buskbjerg, mortendk, Aaron Hans, Lauris Consulting, John Meyerhofer, Todd Libby, Luke Bonaccorsi, Dimitrios Grammatikogiannis, Wellness Researched, Devin Clark, Eric Bailey, Dave Rupert, Manuel Matuzovic, Phil Hawksworth, shawn j sandy, Jenn Schiffer, Tianyu Ge, Kyosuke Nakamura, Hans Gerwitz, Makoto Kawasaki, Horacio Gonzalez, Matthew Tole, Ivan Buncic, Rob Sterlini, Mark Boulton, Søren Birkemeyer, Richard  Hemmer, Nick Nisi, Andrew Harvard, John SJ Anderson, Ryan Swaney, Tim Giles, Alistair Shepherd, Ivo Herrmann, Flaki, John Hall, Scott McCracken, James Steinbach, Miriam Suzanne, Bentley Davis, Angelique Weger, vince falconi, Martin Schneider, Stephanie Eckles, Frontend Weekly Tokyo, Ferpection, Josh Crain, Chris Burnell, Ximenav Vf., Juan Miguel, Rich Holman, Kasper Storgaard, Kevin Healy, Greg Gibson, Hidde, Michelle Barker, Alesandro Ortiz, David A. Herron, Paul Robert Lloyd, Andrea Vaghi, Bryan Robinson, Ashur Cabrera, Raymond Camden, John Meguerian, Joe Lamyman, Jeffrey A Morgan, Brett Nelson, Paul Welsh, Ingo Steinke, Melanie Richards, Dorin Vancea, Marco Zehe, Wes Ruvalcaba, Luc Poupard, Entle Web Solutions, Ken Hawkins, Ara Abcarians, Fershad Irani, Nikita Dubko, Aaron Gustafson, Chris, Sam, Benjamin Geese, Marcus Relacion, Netin nopeustesti, Bobby Ray, Christian Miles, Cthos, Sia Karamalegos, Daniel Ryan, Raphael Höser, Noel Forte, Saneef Ansari, Flemming Meyer, Colin Fahrion, Dan Burzo, Jon Kuperman, Dan Ott, Mobilemall.pk, Cheap VPS, David Darnes, Jon Roobottom, Dana Byerly, Oisín Quinn, Renkaatsopivasti, Windesol Sähkön Kilpailutus, Luke Mitchell, SignpostMarv, THE PADDING, Bob Monsour, Patrick Byrne, zapscribbles, Frank Reding, quinnanya, Richmond Insulation, Cory Birdsong, Aram ZS, Michel van der Kroef, Vinicius Depizzol, Andy Stevenson, HelppoHinta.fi, Tanner Dolby, jpoehnelt, Ingo Sobolewski, Andrew Weisbeck, Richmond Concrete, Tom, CelineDesign, Nic Chan, Duc Lam, Alex Zappa, Stephen Bell, Brett DeWoody, alistairtweedie, Meta Tier List, Robert Haselbacher, Lene"
"Status: Modified
Files: .travis.yml, LICENSE, README.md, docs-src/_data/coverage.json, docs/coverage.md, package.json, src/Engines/Markdown.js, src/Engines/Nunjucks.js, src/Template.js, src/TemplatePath.js, src/TemplateWriter.js, test/TemplateMapTest.js, test/TemplatePathTest.js, test/TemplateRenderMarkdownTest.js, test/TemplateRenderNunjucksTest.js, test/TemplateTest.js, test/TemplateWriterTest.js, test/stubs/_includes/test.js

diff --git a/.travis.yml b/.travis.yml
index 0662013d..0daa7ca9 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -12,4 +12,4 @@ sudo: false
 os:
   - linux
   - osx
-#  - windows
\\ No newline at end of file
+  - windows
\\ No newline at end of file
diff --git a/LICENSE b/LICENSE
index 89a43620..b1726d08 100644
--- a/LICENSE
+++ b/LICENSE
@@ -1,6 +1,6 @@
 MIT License
 
-Copyright (c) 2018 Zach Leatherman @zachleat
+Copyright (c) 2019 Zach Leatherman @zachleat
 
 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the ""Software""), to deal
@@ -18,4 +18,4 @@ FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
-SOFTWARE.
+SOFTWARE.
\\ No newline at end of file
diff --git a/README.md b/README.md
index c06567e2..658431a9 100644
--- a/README.md
+++ b/README.md
@@ -13,7 +13,7 @@ Works with HTML, Markdown, Liquid, Nunjucks, Handlebars, Mustache, EJS, Haml, Pu
 - [@11ty on npm](https://www.npmjs.com/org/11ty)
 - [@11ty on GitHub](https://github.com/11ty)
 
-[![npm Version](https://img.shields.io/npm/v/@11ty/eleventy.svg?style=for-the-badge)](https://www.npmjs.com/package/@11ty/eleventy) [![Build Status](https://img.shields.io/travis/11ty/eleventy/master.svg?style=for-the-badge)](https://travis-ci.org/11ty/eleventy) [![GitHub issues](https://img.shields.io/github/issues/11ty/eleventy.svg?style=for-the-badge)](https://github.com/11ty/eleventy/issues) [![code style: prettier](https://img.shields.io/badge/code_style-prettier-ff69b4.svg?style=for-the-badge)](https://github.com/prettier/prettier) [![npm Downloads](https://img.shields.io/npm/dt/@11ty/eleventy.svg?style=for-the-badge)](https://www.npmjs.com/package/@11ty/eleventy)
+[![npm Version](https://img.shields.io/npm/v/@11ty/eleventy.svg?style=for-the-badge)](https://www.npmjs.com/package/@11ty/eleventy) [![GitHub issues](https://img.shields.io/github/issues/11ty/eleventy.svg?style=for-the-badge)](https://github.com/11ty/eleventy/issues) [![code style: prettier](https://img.shields.io/badge/code_style-prettier-ff69b4.svg?style=for-the-badge)](https://github.com/prettier/prettier) [![npm Downloads](https://img.shields.io/npm/dt/@11ty/eleventy.svg?style=for-the-badge)](https://www.npmjs.com/package/@11ty/eleventy)
 
 ## Tests
 
diff --git a/docs-src/_data/coverage.json b/docs-src/_data/coverage.json
index f66634b6..8d657eec 100644
--- a/docs-src/_data/coverage.json
+++ b/docs-src/_data/coverage.json
@@ -1,4 +1,4 @@
-{""total"": {""lines"":{""total"":2637,""covered"":2332,""skipped"":0,""pct"":88.43},""statements"":{""total"":2651,""covered"":2346,""skipped"":0,""pct"":88.49},""functions"":{""total"":640,""covered"":560,""skipped"":0,""pct"":87.5},""branches"":{""total"":995,""covered"":802,""skipped"":0,""pct"":80.6}}
+{""total"": {""lines"":{""total"":2643,""covered"":2331,""skipped"":0,""pct"":88.2},""statements"":{""total"":2657,""covered"":2345,""skipped"":0,""pct"":88.26},""functions"":{""total"":640,""covered"":558,""skipped"":0,""pct"":87.19},""branches"":{""total"":999,""covered"":803,""skipped"":0,""pct"":80.38}}
 ,""/Users/zachleat/Code/eleventy/config.js"": {""lines"":{""total"":6,""covered"":6,""skipped"":0,""pct"":100},""functions"":{""total"":1,""covered"":1,""skipped"":0,""pct"":100},""statements"":{""total"":6,""covered"":6,""skipped"":0,""pct"":100},""branches"":{""total"":0,""covered"":0,""skipped"":0,""pct"":100}}
 ,""/Users/zachleat/Code/eleventy/src/Benchmark.js"": {""lines"":{""total"":12,""covered"":11,""skipped"":0,""pct"":91.67},""functions"":{""total"":6,""covered"":5,""skipped"":0,""pct"":83.33},""statements"":{""total"":12,""covered"":11,""skipped"":0,""pct"":91.67},""branches"":{""total"":6,""covered"":4,""skipped"":0,""pct"":66.67}}
 ,""/Users/zachleat/Code/eleventy/src/BenchmarkGroup.js"": {""lines"":{""total"":34,""covered"":23,""skipped"":0,""pct"":67.65},""functions"":{""total"":7,""covered"":5,""skipped"":0,""pct"":71.43},""statements"":{""total"":34,""covered"":23,""skipped"":0,""pct"":67.65},""branches"":{""total"":10,""covered"":3,""skipped"":0,""pct"":30}}
@@ -31,7 +31,7 @@
 ,""/Users/zachleat/Code/eleventy/src/TemplatePermalink.js"": {""lines"":{""total"":30,""covered"":30,""skipped"":0,""pct"":100},""functions"":{""total"":7,""covered"":7,""skipped"":0,""pct"":100},""statements"":{""total"":30,""covered"":30,""skipped"":0,""pct"":100},""branches"":{""total"":20,""covered"":20,""skipped"":0,""pct"":100}}
 ,""/Users/zachleat/Code/eleventy/src/TemplatePermalinkNoWrite.js"": {""lines"":{""total"":3,""covered"":3,""skipped"":0,""pct"":100},""functions"":{""total"":2,""covered"":2,""skipped"":0,""pct"":100},""statements"":{""total"":3,""covered"":3,""skipped"":0,""pct"":100},""branches"":{""total"":0,""covered"":0,""skipped"":0,""pct"":100}}
 ,""/Users/zachleat/Code/eleventy/src/TemplateRender.js"": {""lines"":{""total"":77,""covered"":76,""skipped"":0,""pct"":98.7},""functions"":{""total"":22,""covered"":22,""skipped"":0,""pct"":100},""statements"":{""total"":77,""covered"":76,""skipped"":0,""pct"":98.7},""branches"":{""total"":42,""covered"":40,""skipped"":0,""pct"":95.24}}
-,""/Users/zachleat/Code/eleventy/src/TemplateWriter.js"": {""lines"":{""total"":87,""covered"":75,""skipped"":0,""pct"":86.21},""functions"":{""total"":20,""covered"":15,""skipped"":0,""pct"":75},""statements"":{""total"":87,""covered"":75,""skipped"":0,""pct"":86.21},""branches"":{""total"":8,""covered"":3,""skipped"":0,""pct"":37.5}}
+,""/Users/zachleat/Code/eleventy/src/TemplateWriter.js"": {""lines"":{""total"":94,""covered"":78,""skipped"":0,""pct"":82.98},""functions"":{""total"":21,""covered"":15,""skipped"":0,""pct"":71.43},""statements"":{""total"":94,""covered"":78,""skipped"":0,""pct"":82.98},""branches"":{""total"":10,""covered"":3,""skipped"":0,""pct"":30}}
 ,""/Users/zachleat/Code/eleventy/src/UserConfig.js"": {""lines"":{""total"":163,""covered"":105,""skipped"":0,""pct"":64.42},""functions"":{""total"":44,""covered"":23,""skipped"":0,""pct"":52.27},""statements"":{""total"":164,""covered"":106,""skipped"":0,""pct"":64.63},""branches"":{""total"":63,""covered"":34,""skipped"":0,""pct"":53.97}}
 ,""/Users/zachleat/Code/eleventy/src/Engines/Ejs.js"": {""lines"":{""total"":19,""covered"":18,""skipped"":0,""pct"":94.74},""functions"":{""total"":7,""covered"":6,""skipped"":0,""pct"":85.71},""statements"":{""total"":19,""covered"":18,""skipped"":0,""pct"":94.74},""branches"":{""total"":6,""covered"":4,""skipped"":0,""pct"":66.67}}
 ,""/Users/zachleat/Code/eleventy/src/Engines/Haml.js"": {""lines"":{""total"":9,""covered"":9,""skipped"":0,""pct"":100},""functions"":{""total"":3,""covered"":3,""skipped"":0,""pct"":100},""statements"":{""total"":9,""covered"":9,""skipped"":0,""pct"":100},""branches"":{""total"":2,""covered"":2,""skipped"":0,""pct"":100}}
@@ -40,9 +40,9 @@
 ,""/Users/zachleat/Code/eleventy/src/Engines/JavaScript.js"": {""lines"":{""total"":35,""covered"":35,""skipped"":0,""pct"":100},""functions"":{""total"":10,""covered"":10,""skipped"":0,""pct"":100},""statements"":{""total"":35,""covered"":35,""skipped"":0,""pct"":100},""branches"":{""total"":22,""covered"":22,""skipped"":0,""pct"":100}}
 ,""/Users/zachleat/Code/eleventy/src/Engines/JavaScriptTemplateLiteral.js"": {""lines"":{""total"":18,""covered"":17,""skipped"":0,""pct"":94.44},""functions"":{""total"":3,""covered"":3,""skipped"":0,""pct"":100},""statements"":{""total"":18,""covered"":17,""skipped"":0,""pct"":94.44},""branches"":{""total"":6,""covered"":6,""skipped"":0,""pct"":100}}
 ,""/Users/zachleat/Code/eleventy/src/Engines/Liquid.js"": {""lines"":{""total"":69,""covered"":66,""skipped"":0,""pct"":95.65},""functions"":{""total"":26,""covered"":25,""skipped"":0,""pct"":96.15},""statements"":{""total"":69,""covered"":66,""skipped"":0,""pct"":95.65},""branches"":{""total"":10,""covered"":8,""skipped"":0,""pct"":80}}
-,""/Users/zachleat/Code/eleventy/src/Engines/Markdown.js"": {""lines"":{""total"":28,""covered"":25,""skipped"":0,""pct"":89.29},""functions"":{""total"":8,""covered"":7,""skipped"":0,""pct"":87.5},""statements"":{""total"":28,""covered"":25,""skipped"":0,""pct"":89.29},""branches"":{""total"":12,""covered"":9,""skipped"":0,""pct"":75}}
+,""/Users/zachleat/Code/eleventy/src/Engines/Markdown.js"": {""lines"":{""total"":31,""covered"":28,""skipped"":0,""pct"":90.32},""functions"":{""total"":9,""covered"":8,""skipped"":0,""pct"":88.89},""statements"":{""total"":31,""covered"":28,""skipped"":0,""pct"":90.32},""branches"":{""total"":14,""covered"":11,""skipped"":0,""pct"":78.57}}
 ,""/Users/zachleat/Code/eleventy/src/Engines/Mustache.js"": {""lines"":{""total"":10,""covered"":10,""skipped"":0,""pct"":100},""functions"":{""total"":4,""covered"":4,""skipped"":0,""pct"":100},""statements"":{""total"":10,""covered"":10,""skipped"":0,""pct"":100},""branches"":{""total"":2,""covered"":2,""skipped"":0,""pct"":100}}
-,""/Users/zachleat/Code/eleventy/src/Engines/Nunjucks.js"": {""lines"":{""total"":62,""covered"":58,""skipped"":0,""pct"":93.55},""functions"":{""total"":21,""covered"":21,""skipped"":0,""pct"":100},""statements"":{""total"":62,""covered"":58,""skipped"":0,""pct"":93.55},""branches"":{""total"":8,""covered"":7,""skipped"":0,""pct"":87.5}}
+,""/Users/zachleat/Code/eleventy/src/Engines/Nunjucks.js"": {""lines"":{""total"":58,""covered"":51,""skipped"":0,""pct"":87.93},""functions"":{""total"":19,""covered"":18,""skipped"":0,""pct"":94.74},""statements"":{""total"":58,""covered"":51,""skipped"":0,""pct"":87.93},""branches"":{""total"":8,""covered"":6,""skipped"":0,""pct"":75}}
 ,""/Users/zachleat/Code/eleventy/src/Engines/Pug.js"": {""lines"":{""total"":15,""covered"":15,""skipped"":0,""pct"":100},""functions"":{""total"":5,""covered"":5,""skipped"":0,""pct"":100},""statements"":{""total"":15,""covered"":15,""skipped"":0,""pct"":100},""branches"":{""total"":4,""covered"":3,""skipped"":0,""pct"":75}}
 ,""/Users/zachleat/Code/eleventy/src/Engines/TemplateEngine.js"": {""lines"":{""total"":51,""covered"":51,""skipped"":0,""pct"":100},""functions"":{""total"":18,""covered"":18,""skipped"":0,""pct"":100},""statements"":{""total"":53,""covered"":53,""skipped"":0,""pct"":100},""branches"":{""total"":8,""covered"":8,""skipped"":0,""pct"":100}}
 ,""/Users/zachleat/Code/eleventy/src/Errors/TemplateContentPrematureUseError.js"": {""lines"":{""total"":2,""covered"":2,""skipped"":0,""pct"":100},""functions"":{""total"":0,""covered"":0,""skipped"":0,""pct"":100},""statements"":{""total"":2,""covered"":2,""skipped"":0,""pct"":100},""branches"":{""total"":0,""covered"":0,""skipped"":0,""pct"":100}}
diff --git a/docs/coverage.md b/docs/coverage.md
index 6d990bb2..ce85ec83 100644
--- a/docs/coverage.md
+++ b/docs/coverage.md
@@ -1,8 +1,8 @@
-# Code Coverage for Eleventy v0.8.2
+# Code Coverage for Eleventy v0.8.3
 
 | Filename                                                   | % Lines | % Statements | % Functions | % Branches |
 | ---------------------------------------------------------- | ------- | ------------ | ----------- | ---------- |
-| `total`                                                    | 88.43%  | 88.49%       | 87.5%       | 80.6%      |
+| `total`                                                    | 88.2%   | 88.26%       | 87.19%      | 80.38%     |
 | `config.js`                                                | 100%    | 100%         | 100%        | 100%       |
 | `src/Benchmark.js`                                         | 91.67%  | 91.67%       | 83.33%      | 66.67%     |
 | `src/BenchmarkGroup.js`                                    | 67.65%  | 67.65%       | 71.43%      | 30%        |
@@ -35,7 +35,7 @@
 | `src/TemplatePermalink.js`                                 | 100%    | 100%         | 100%        | 100%       |
 | `src/TemplatePermalinkNoWrite.js`                          | 100%    | 100%         | 100%        | 100%       |
 | `src/TemplateRender.js`                                    | 98.7%   | 98.7%        | 100%        | 95.24%     |
-| `src/TemplateWriter.js`                                    | 86.21%  | 86.21%       | 75%         | 37.5%      |
+| `src/TemplateWriter.js`                                    | 82.98%  | 82.98%       | 71.43%      | 30%        |
 | `src/UserConfig.js`                                        | 64.42%  | 64.63%       | 52.27%      | 53.97%     |
 | `src/Engines/Ejs.js`                                       | 94.74%  | 94.74%       | 85.71%      | 66.67%     |
 | `src/Engines/Haml.js`                                      | 100%    | 100%         | 100%        | 100%       |
@@ -44,9 +44,9 @@
 | `src/Engines/JavaScript.js`                                | 100%    | 100%         | 100%        | 100%       |
 | `src/Engines/JavaScriptTemplateLiteral.js`                 | 94.44%  | 94.44%       | 100%        | 100%       |
 | `src/Engines/Liquid.js`                                    | 95.65%  | 95.65%       | 96.15%      | 80%        |
-| `src/Engines/Markdown.js`                                  | 89.29%  | 89.29%       | 87.5%       | 75%        |
+| `src/Engines/Markdown.js`                                  | 90.32%  | 90.32%       | 88.89%      | 78.57%     |
 | `src/Engines/Mustache.js`                                  | 100%    | 100%         | 100%        | 100%       |
-| `src/Engines/Nunjucks.js`                                  | 93.55%  | 93.55%       | 100%        | 87.5%      |
+| `src/Engines/Nunjucks.js`                                  | 87.93%  | 87.93%       | 94.74%      | 75%        |
 | `src/Engines/Pug.js`                                       | 100%    | 100%         | 100%        | 75%        |
 | `src/Engines/TemplateEngine.js`                            | 100%    | 100%         | 100%        | 100%       |
 | `src/Errors/TemplateContentPrematureUseError.js`           | 100%    | 100%         | 100%        | 100%       |
diff --git a/package.json b/package.json
index b77ddfce..7922791b 100644
--- a/package.json
+++ b/package.json
@@ -1,6 +1,6 @@
 {
   ""name"": ""@11ty/eleventy"",
-  ""version"": ""0.8.2"",
+  ""version"": ""0.8.3"",
   ""description"": ""Transform a directory of templates into HTML."",
   ""main"": ""src/Eleventy.js"",
   ""license"": ""MIT"",
@@ -115,4 +115,4 @@
       ""pre-push"": ""npx ava""
     }
   }
-}
\\ No newline at end of file
+}
diff --git a/src/Engines/Markdown.js b/src/Engines/Markdown.js
index 157958ac..99627662 100644
--- a/src/Engines/Markdown.js
+++ b/src/Engines/Markdown.js
@@ -68,10 +68,16 @@ class Markdown extends TemplateEngine {
         };
       }
     } else {
-      return function() {
-        // throw away data if preTemplateEngine is falsy
-        return mdlib.render(str);
-      };
+      if (bypassMarkdown) {
+        return function() {
+          return str;
+        };
+      } else {
+        return function() {
+          // throw away data if preTemplateEngine is falsy
+          return mdlib.render(str);
+        };
+      }
     }
   }
 }
diff --git a/src/Engines/Nunjucks.js b/src/Engines/Nunjucks.js
index 682d535c..ead7f8c3 100644
--- a/src/Engines/Nunjucks.js
+++ b/src/Engines/Nunjucks.js
@@ -63,67 +63,70 @@ class Nunjucks extends TemplateEngine {
   }
 
   addShortcode(shortcodeName, shortcodeFn) {
-    this.addTag(shortcodeName, function(nunjucksEngine) {
-      return new function() {
-        this.tags = [shortcodeName];
-
-        this.parse = function(parser, nodes, lexer) {
-          let args;
-          let tok = parser.nextToken();
-
-          args = parser.parseSignature(true, true);
-
-          // Nunjucks bug with non-paired custom tags bug still exists even
-          // though this issue is closed. Works fine for paired.
-          // https://github.com/mozilla/nunjucks/issues/158
-          if (args.children.length === 0) {
-            args.addChild(new nodes.Literal(0, 0, """"));
-          }
+    function ShortcodeFunction() {
+      this.tags = [shortcodeName];
+
+      this.parse = function(parser, nodes, lexer) {
+        let args;
+        let tok = parser.nextToken();
+
+        args = parser.parseSignature(true, true);
+
+        // Nunjucks bug with non-paired custom tags bug still exists even
+        // though this issue is closed. Works fine for paired.
+        // https://github.com/mozilla/nunjucks/issues/158
+        if (args.children.length === 0) {
+          args.addChild(new nodes.Literal(0, 0, """"));
+        }
+
+        parser.advanceAfterBlockEnd(tok.value);
+
+        // return new nodes.CallExtensionAsync(this, ""run"", args);
+        return new nodes.CallExtension(this, ""run"", args);
+      };
+
+      this.run = function(...args) {
+        // let callback = args.pop();
+        let [context, ...argArray] = args;
+        let ret = new NunjucksLib.runtime.SafeString(shortcodeFn(...argArray));
+        // callback(null, ret);
+        return ret;
+      };
+    }
 
-          parser.advanceAfterBlockEnd(tok.value);
-          return new nodes.CallExtensionAsync(this, ""run"", args);
-        };
-
-        this.run = function(...args) {
-          let callback = args.pop();
-          let [context, ...argArray] = args;
-          let ret = new nunjucksEngine.runtime.SafeString(
-            shortcodeFn(...argArray)
-          );
-          callback(null, ret);
-        };
-      }();
-    });
+    this.njkEnv.addExtension(shortcodeName, new ShortcodeFunction());
   }
 
   addPairedShortcode(shortcodeName, shortcodeFn) {
-    this.addTag(shortcodeName, function(nunjucksEngine, nunjucksEnv) {
-      return new function() {
-        this.tags = [shortcodeName];
-
-        this.parse = function(parser, nodes, lexer) {
-          var tok = parser.nextToken();
-
-          var args = parser.parseSignature(true, true);
-          parser.advanceAfterBlockEnd(tok.value);
-
-          var body = parser.parseUntilBlocks(""end"" + shortcodeName);
-          parser.advanceAfterBlockEnd();
-
-          return new nodes.CallExtensionAsync(this, ""run"", args, [body]);
-        };
-
-        this.run = function(...args) {
-          let callback = args.pop();
-          let body = args.pop();
-          let [context, ...argArray] = args;
-          let ret = new nunjucksEngine.runtime.SafeString(
-            shortcodeFn(body(), ...argArray)
-          );
-          callback(null, ret);
-        };
-      }();
-    });
+    function PairedShortcodeFunction() {
+      this.tags = [shortcodeName];
+
+      this.parse = function(parser, nodes, lexer) {
+        var tok = parser.nextToken();
+
+        var args = parser.parseSignature(true, true);
+        parser.advanceAfterBlockEnd(tok.value);
+
+        var body = parser.parseUntilBlocks(""end"" + shortcodeName);
+        parser.advanceAfterBlockEnd();
+
+        // return new nodes.CallExtensionAsync(this, ""run"", args, [body]);
+        return new nodes.CallExtension(this, ""run"", args, [body]);
+      };
+
+      this.run = function(...args) {
+        // let callback = args.pop();
+        let body = args.pop();
+        let [context, ...argArray] = args;
+        let ret = new NunjucksLib.runtime.SafeString(
+          shortcodeFn(body(), ...argArray)
+        );
+        // callback(null, ret);
+        return ret;
+      };
+    }
+
+    this.njkEnv.addExtension(shortcodeName, new PairedShortcodeFunction());
   }
 
   async compile(str, inputPath) {
diff --git a/src/Template.js b/src/Template.js
index 22bdd135..a5040019 100644
--- a/src/Template.js
+++ b/src/Template.js
@@ -525,7 +525,7 @@ class Template extends TemplateContent {
       );
       content = await layout.render(page.data, page.templateContent);
       await this.runLinters(content, page.inputPath, page.outputPath);
-      content = await this.runTransforms(content, page.outputPath);
+      content = await this.runTransforms(content, page.outputPath); // pass in page.inputPath?
       return content;
     } else {
       content = page.templateContent;
@@ -534,7 +534,7 @@ class Template extends TemplateContent {
         page.inputPath,
         page.outputPath
       );
-      content = await this.runTransforms(content, page.outputPath);
+      content = await this.runTransforms(content, page.outputPath); // pass in page.inputPath?
     }
     return content;
   }
diff --git a/src/TemplatePath.js b/src/TemplatePath.js
index 4d71a5fe..c9080c4b 100644
--- a/src/TemplatePath.js
+++ b/src/TemplatePath.js
@@ -78,7 +78,7 @@ TemplatePath.getAllDirs = function(path) {
 
   return path
     .split(""/"")
-    .map(segment => path.substring(0, path.indexOf(segment) + segment.length))
+    .map((segment, index, array) => array.slice(0, index + 1).join(""/""))
     .filter(path => path !== ""."")
     .reverse();
 };
@@ -121,7 +121,7 @@ TemplatePath.join = function(...paths) {
  * @returns {String} a normalized URL path described by the given URL path segments.
  */
 TemplatePath.normalizeUrlPath = function(...urlPaths) {
-  const urlPath = path.join(...urlPaths);
+  const urlPath = path.posix.join(...urlPaths);
   return urlPath.replace(/\\/+$/, ""/"");
 };
 
diff --git a/src/TemplateWriter.js b/src/TemplateWriter.js
index e16e0de4..f5eb75c8 100644
--- a/src/TemplateWriter.js
+++ b/src/TemplateWriter.js
@@ -5,6 +5,7 @@ const TemplateRender = require(""./TemplateRender"");
 const EleventyFiles = require(""./EleventyFiles"");
 const EleventyBaseError = require(""./EleventyBaseError"");
 const EleventyErrorHandler = require(""./EleventyErrorHandler"");
+const EleventyErrorUtil = require(""./EleventyErrorUtil"");
 
 const config = require(""./Config"");
 const debug = require(""debug"")(""Eleventy:TemplateWriter"");
@@ -129,17 +130,9 @@ TemplateWriter.prototype._createTemplateMap = async function(paths) {
 TemplateWriter.prototype._writeTemplate = async function(mapEntry) {
   let tmpl = mapEntry.template;
   // we don’t re-use the map templateContent because it doesn’t include layouts
-  return tmpl
-    .writeMapEntry(mapEntry)
-    .then(() => {
-      this.writeCount += tmpl.getWriteCount();
-    })
-    .catch(function(e) {
-      throw new TemplateWriterWriteError(
-        `Having trouble writing template: ${mapEntry.outputPath}`,
-        e
-      );
-    });
+  return tmpl.writeMapEntry(mapEntry).then(() => {
+    this.writeCount += tmpl.getWriteCount();
+  });
 };
 
 TemplateWriter.prototype.write = async function() {
@@ -160,8 +153,36 @@ TemplateWriter.prototype.write = async function() {
   await this._createTemplateMap(paths);
   debug(""Template map created."");
 
-  for (let mapEntry of this.templateMap.getMap()) {
-    promises.push(this._writeTemplate(mapEntry));
+  let mapEntry;
+  let usedTemplateContentTooEarlyMap = [];
+  for (mapEntry of this.templateMap.getMap()) {
+    promises.push(
+      this._writeTemplate(mapEntry).catch(function(e) {
+        // Premature templateContent in layout render, this also happens in
+        // TemplateMap.populateContentDataInMap for non-layout content
+        if (EleventyErrorUtil.isPrematureTemplateContentError(e)) {
+          usedTemplateContentTooEarlyMap.push(mapEntry);
+        } else {
+          throw new TemplateWriterWriteError(
+            `Having trouble writing template: ${mapEntry.outputPath}`,
+            e
+          );
+        }
+      })
+    );
+  }
+
+  for (mapEntry of usedTemplateContentTooEarlyMap) {
+    promises.push(
+      this._writeTemplate(mapEntry).catch(function(e) {
+        throw new TemplateWriterWriteError(
+          `Having trouble writing template (second pass): ${
+            mapEntry.outputPath
+          }`,
+          e
+        );
+      })
+    );
   }
 
   return Promise.all(promises).catch(e => {
diff --git a/test/TemplateMapTest.js b/test/TemplateMapTest.js
index f388fd65..c5eef01c 100644
--- a/test/TemplateMapTest.js
+++ b/test/TemplateMapTest.js
@@ -959,15 +959,24 @@ test(""Paginate over collections.all WITH a paginate over collections (tag pages)
 });
 
 test(""Test a transform with a layout (via templateMap)"", async t => {
-  t.plan(3);
+  t.plan(7);
   let tm = new TemplateMap();
   let tmpl = new Template(
     ""./test/stubs-475/transform-layout/transform-layout.njk"",
     ""./test/stubs-475/"",
     ""./test/stubs-475/_site""
   );
-  tmpl.addTransform(function(content) {
-    t.is(content, `<html><body>This is content.</body></html>`);
+
+  tmpl.addLinter(function(content, inputPath, outputPath) {
+    // should be pre-transform content
+    t.is(content, ""<html><body>This is content.</body></html>"");
+    t.true(inputPath.endsWith(""transform-layout.njk""));
+    t.true(outputPath.endsWith(""transform-layout/index.html""));
+  });
+
+  tmpl.addTransform(function(content, outputPath) {
+    t.is(content, ""<html><body>This is content.</body></html>"");
+    t.true(outputPath.endsWith(""transform-layout/index.html""));
     return ""OVERRIDE BY A TRANSFORM"";
   });
 
@@ -985,3 +994,22 @@ test(""Test a transform with a layout (via templateMap)"", async t => {
     }
   }
 });
+
+test(""Async user collection addCollection method"", async t => {
+  let tm = new TemplateMap();
+  await tm.add(tmpl1);
+  tm.setUserConfigCollections({
+    userCollection: async function(collection) {
+      return new Promise((resolve, reject) => {
+        setTimeout(function() {
+          resolve(collection.getAll());
+        }, 50);
+      });
+    }
+  });
+
+  let collections = await tm.getCollectionsData();
+  t.is(collections.userCollection[0].url, ""/templateMapCollection/test1/"");
+
+  t.is(collections.userCollection[0].data.collections.userCollection.length, 1);
+});
diff --git a/test/TemplatePathTest.js b/test/TemplatePathTest.js
index 1171da2c..57dc8d98 100644
--- a/test/TemplatePathTest.js
+++ b/test/TemplatePathTest.js
@@ -30,15 +30,43 @@ test(""getAllDirs"", t => {
   t.deepEqual(TemplatePath.getAllDirs(""./testing/""), [""./testing""]);
   t.deepEqual(TemplatePath.getAllDirs(""testing/""), [""testing""]);
   t.deepEqual(TemplatePath.getAllDirs(""testing""), [""testing""]);
+
   t.deepEqual(TemplatePath.getAllDirs(""./testing/hello""), [
     ""./testing/hello"",
     ""./testing""
   ]);
+
   t.deepEqual(TemplatePath.getAllDirs(""./src/collections/posts""), [
     ""./src/collections/posts"",
     ""./src/collections"",
     ""./src""
   ]);
+
+  t.deepEqual(
+    TemplatePath.getAllDirs(""./src/site/content/en/paths/performanceAudits""),
+    [
+      ""./src/site/content/en/paths/performanceAudits"",
+      ""./src/site/content/en/paths"",
+      ""./src/site/content/en"",
+      ""./src/site/content"",
+      ""./src/site"",
+      ""./src""
+    ]
+  );
+
+  t.deepEqual(TemplatePath.getAllDirs(""./src/_site/src""), [
+    ""./src/_site/src"",
+    ""./src/_site"",
+    ""./src""
+  ]);
+
+  t.deepEqual(TemplatePath.getAllDirs(""./src/_site/src/src/src""), [
+    ""./src/_site/src/src/src"",
+    ""./src/_site/src/src"",
+    ""./src/_site/src"",
+    ""./src/_site"",
+    ""./src""
+  ]);
 });
 
 test(""normalize"", async t => {
diff --git a/test/TemplateRenderMarkdownTest.js b/test/TemplateRenderMarkdownTest.js
index c1e6c59a..cb9e9bf8 100644
--- a/test/TemplateRenderMarkdownTest.js
+++ b/test/TemplateRenderMarkdownTest.js
@@ -41,6 +41,14 @@ test(""Markdown Render: Ignore markdown, use only preprocess engine (useful for v
   t.is((await fn({ title: ""My Title"" })).trim(), ""My Title"");
 });
 
+test(""Markdown Render: Skip markdown and preprocess engine (issue #466)"", async t => {
+  let tr = new TemplateRender(""md"");
+  tr.setMarkdownEngine(false);
+  tr.setUseMarkdown(false);
+  let fn = await tr.getCompiledTemplate(""404.html"");
+  t.is((await fn({ title: ""My Title"" })).trim(), ""404.html"");
+});
+
 test(""Markdown Render: Set markdown engine to false, don’t parse"", async t => {
   let tr = new TemplateRender(""md"");
   tr.setMarkdownEngine(false);
diff --git a/test/TemplateRenderNunjucksTest.js b/test/TemplateRenderNunjucksTest.js
index ab32a84f..50fb03a1 100644
--- a/test/TemplateRenderNunjucksTest.js
+++ b/test/TemplateRenderNunjucksTest.js
@@ -38,14 +38,7 @@ test(""Nunjucks Render Include a JS file (Issue 398)"", async t => {
   let fn = await tr.getCompiledTemplate(
     ""{% set ga %}{% include 'test.js' %}{% endset %}{{ ga | safe | jsmin }}""
   );
-  t.is(
-    await fn(),
-    `/**
- * THIS IS A COMMENT
- */
-alert(""Issue #398"");
